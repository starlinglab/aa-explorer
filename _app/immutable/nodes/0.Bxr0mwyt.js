import{c as j,e as C,a as t,t as l,s as X,n as Je,b as je}from"../chunks/nuOQF-VX.js";import{C as Xe,D as Qe,B as We,E as Ze,K as et,P as tt,as as at,M as rt,p as Ee,at as st,i as g,j as Ae,au as it,k as r,l as a,s as o,t as W,v as V,a8 as ot,av as re,g as e,aw as ke,ax as nt,X as Te,ay as O}from"../chunks/gyiEl3Uc.js";import{i as He}from"../chunks/BkNFsCzC.js";import{p as Pe,i as v,r as lt,s as vt,b as dt}from"../chunks/CtItQhWX.js";import{s as ct,e as Ke,a as ut,r as qe,b as ze,i as pt,v as ft,c as mt,h as gt,d as ht,u as Fe,C as Oe,H as Be,f as _t,g as bt}from"../chunks/DRsdIuIW.js";function xt(M,d,w,s,u){var n;Xe&&Qe();var i=(n=d.$$slots)==null?void 0:n[w],k=!1;i===!0&&(i=d.children,k=!0),i===void 0||i(M,k?()=>s:s)}function yt(M,d,...w){var s=M,u=tt,i;We(()=>{u!==(u=d())&&(i&&(at(i),i=null),i=et(()=>u(s,...w)))},Ze),Xe&&(s=rt)}var wt=l('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-white rounded-lg p-6 max-w-xl w-full max-h-[90vh] overflow-auto" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold"> </h2> <button class="text-gray-500 hover:text-gray-700">✕</button></div> <div class="mb-4"><!></div> <div class="flex justify-end"><button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Close</button></div></div></div>');function Ye(M,d){Ee(d,!1);let w=Pe(d,"showModal",12),s=Pe(d,"title",8,"");const u=st();function i(){w(!1),u("close")}function k(f){f.key==="Escape"&&i()}function n(f){f.target===f.currentTarget&&i()}He();var p=j();C("keydown",it,k);var B=g(p);{var c=f=>{var Z=wt(),m=r(Z),b=r(m),T=r(b),K=r(T,!0);a(T);var fe=o(T,2);a(b);var se=o(b,2),ne=r(se);xt(ne,d,"default",{}),a(se);var me=o(se,2),ge=r(me);a(me),a(m),a(Z),W(()=>X(K,s())),C("click",fe,i),C("click",ge,i),C("click",Z,n),C("keydown",Z,k),t(f,Z)};v(B,f=>{w()&&f(c)})}t(M,p),Ae()}var kt=Je('<svg><path fill="currentColor" d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"></path></svg>');function Tt(M,d){const w=lt(d,["$$slots","$$events","$$legacy"]);var s=kt();let u;W(()=>u=ct(s,u,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...w},void 0,!0)),t(M,s)}var Ct=l('<button class="p-1 text-red-500 hover:text-red-700" title="Remove endpoint">✕</button>'),Mt=l('<div class="flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-200 svelte-1kec5vf" draggable="true"><div class="cursor-move p-1 svelte-1kec5vf">☰</div> <div class="flex-grow grid grid-cols-2 gap-2"><input type="text" class="p-2 border border-gray-300 rounded" placeholder="Display Name"> <input type="text" class="p-2 border border-gray-300 rounded" placeholder="URL"></div> <!></div>'),Dt=l('<div class="mb-4"><p class="text-sm text-gray-600 mb-2">Configure and reorder the endpoints. The first endpoint will be considered the primary source.</p> <div class="endpoints-list space-y-2 svelte-1kec5vf"></div> <div class="mt-4 flex justify-between"><button class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">+ Add Endpoint</button> <button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save Changes</button></div></div>');function St(M,d){Ee(d,!1);let w=Pe(d,"showModal",12,!1),s=re([]);const u=Ke.subscribe(m=>{V(s,m.map((b,T)=>({name:b.name,url:b.url,id:`endpoint-${T}`})))});ot(()=>()=>{u()});function i(){const m=e(s).map(b=>({name:b.name,url:b.url}));Ke.set(m),w(!1)}function k(){const m={name:"New Endpoint",url:"https://"};V(s,[...e(s),{...m,id:`endpoint-${e(s).length}`}])}function n(m){V(s,e(s).filter((b,T)=>T!==m))}function p(m,b,T){const K=[...e(s)];K[m][b]=T,V(s,K)}let B;function c(m){B=m}function f(m){m.preventDefault()}function Z(m){if(B===void 0)return;const b=[...e(s)],[T]=b.splice(B,1);b.splice(m,0,T),V(s,b),B=void 0}He(),Ye(M,{get showModal(){return w()},title:"Endpoint Settings",children:(m,b)=>{var T=Dt(),K=o(r(T),2);ut(K,5,()=>e(s),pt,(me,ge,he)=>{var Y=Mt(),le=o(r(Y),2),_e=r(le);qe(_e);var be=o(_e,2);qe(be),a(le);var Ve=o(le,2);{var Ne=ee=>{var Se=Ct();C("click",Se,()=>n(he)),t(ee,Se)};v(Ve,ee=>{e(s).length>1&&ee(Ne)})}a(Y),W(()=>{ze(_e,e(ge).name),ze(be,e(ge).url)}),C("input",_e,ee=>p(he,"name",ee.currentTarget.value)),C("input",be,ee=>p(he,"url",ee.currentTarget.value)),C("dragstart",Y,()=>c(he)),C("dragover",Y,f),C("drop",Y,()=>Z(he)),t(me,Y)}),a(K);var fe=o(K,2),se=r(fe),ne=o(se,2);a(fe),a(T),C("click",se,k),C("click",ne,i),t(m,T)},$$slots:{default:!0}}),Ae()}var Et=l('<div class="settings-button svelte-1so8a75"><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors" title="Settings"><!></button> <!></div>');function At(M){let d=re(!1);function w(){V(d,!e(d))}var s=Et(),u=r(s),i=r(u);Tt(i,{class:"h-6 w-6"}),a(u);var k=o(u,2);St(k,{get showModal(){return e(d)},set showModal(n){V(d,n)},$$legacy:!0}),a(s),C("click",u,w),t(M,s)}var Vt=l('<div class="flex justify-center"><div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div></div>'),Nt=l(`<p class="mt-2 text-sm">The asset's hash matches the one contained in the metadata.</p>`),It=l("– that of: <strong> </strong>.",1),Lt=l('<p class="mt-2 text-sm">The digital signature is valid and was created with a known public key <!></p>'),Rt=l('<p class="mt-2 text-sm">The timestamp proof is valid and anchored in the Bitcoin blockchain.</p>'),Ut=l('<div class="flex items-center"><!> <span>Verification successful!</span></div> <!>',1),jt=l(`<p class="mt-2 text-sm">The timestamp proof was recently verified and is valid. Using cached result to
									reduce blockchain queries.</p> <p class="mt-2 text-xs text-gray-600">Note: Cache expires after 5 minutes. Results from a fresh verification will be
									shown then.</p>`,1),Bt=l('<div class="flex items-center"><!> <span>Verification successful! (cached result)</span></div> <!>',1),Pt=l(`<p class="mt-2 text-sm">The timestamp was recently checked and couldn't be verified. Using cached result
									to reduce blockchain queries.</p> <p class="mt-2 text-xs text-gray-600">Note: Cache expires after 5 minutes. Results from a fresh verification will be
									shown then.</p>`,1),Ht=l('<div class="flex items-center"><!> <span>Verification failed! (cached result)</span></div> <!>',1),Kt=l('<div class="flex items-center"><!> <span>Signature verifies but is from an unknown public key</span></div> <p class="mt-2 text-sm">The signature is valid but was created with an unknown public key.</p>',1),qt=l('<p class="mt-2 text-sm">The signature exists but failed cryptographic verification. This could be due to:</p> <ul class="list-disc pl-5 mt-1"><li>The signature is invalid or has been tampered with</li> <li>The data was modified after signing</li></ul>',1),zt=l(`<p class="mt-2 text-sm">The timestamp exists but could not be verified. This could be due to:</p> <ul class="list-disc text-sm pl-5 mt-1"><li>The timestamp proof isn't properly formatted</li> <li>The timestamp hasn't been anchored in the blockchain yet</li> <li>The data was modified after timestamping</li></ul>`,1),Ft=l('<div class="flex items-center"><!> <span><!></span></div> <!>',1),Ot=l('<p class="mt-2 text-sm">The attestation CID does not match the selected CID.</p>'),Xt=l('<p class="mt-2 text-sm">No signature was found for this attestation.</p>'),Yt=l('<p class="mt-2 text-sm">No timestamp was found for this attestation.</p>'),$t=l('<div class="flex items-center"><!> <span>Verification failed!</span></div> <!>',1),Gt=l("<div><!></div>"),Jt=l('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p class="mt-2"> </p></div></div>'),Qt=l('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono"><p>Public Key:</p> <pre class="whitespace-pre-wrap break-all bg-gray-200 p-2 rounded"> </pre> <p class="mt-3">Signature:</p> <pre class="whitespace-pre-wrap break-all bg-gray-200 p-2 rounded"> </pre> <p class="mt-2">Hash of the signed attestation:</p> <pre class="whitespace-pre-wrap break-all bg-gray-200 p-2 rounded"> </pre></div></div>'),Wt=l('<p class="text-gray-600"> </p>'),Zt=l('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p> <!></div></div>'),ea=l('<div class="space-y-4"><p class="text-gray-700"> </p> <!> <!></div>');function ta(M,d){Ee(d,!1);const[w,s]=vt(),u=()=>dt(mt,"$verificationModalStore",w),i=re(),k=re(),n=re(),p=re(),B=re();let c=re(null),f=re(!0);async function Z(){V(f,!0),V(c,await ft(e(n),e(p),e(B))),V(f,!1)}function m(){return`${e(n).charAt(0).toUpperCase()+e(n).slice(1)} Verification`}function b(){switch(e(n)){case"hash":return"Verifying the asset's hash.";case"signature":return"Verifying the digital signature using the embedded public key.";case"timestamp":return"Verifying the OpenTimestamps proof against Bitcoin blockchain.";default:return"Unknown verification type."}}function T(){gt()}ke(()=>u(),()=>{V(i,u())}),ke(()=>e(i),()=>{V(k,e(i).show)}),ke(()=>e(i),()=>{V(n,e(i).kind)}),ke(()=>e(i),()=>{V(p,e(i).data)}),ke(()=>e(i),()=>{V(B,e(i).selectedCID)}),ke(()=>(e(k),e(p)),()=>{e(k)&&e(p)&&Z()}),nt(),He();var K=j(),fe=g(K);{var se=ne=>{const me=Te(m);Ye(ne,{get title(){return e(me)},get showModal(){return e(k)},$$events:{close:T},children:(ge,he)=>{var Y=ea(),le=r(Y),_e=r(le,!0);a(le);var be=o(le,2);{var Ve=D=>{var q=Vt();t(D,q)},Ne=D=>{var q=j(),xe=g(q);{var ve=de=>{var N=Gt(),$=r(N);{var ie=H=>{var P=Ut(),G=g(P),J=r(G);Oe(J,{class:"w-6 h-6 text-green-500 mr-2"}),O(2),a(G);var ue=o(G,2);{var I=L=>{var Q=Nt();t(L,Q)},z=L=>{var Q=j(),F=g(Q);{var x=h=>{var R=Lt(),te=o(r(R));{var U=_=>{var ae=It(),pe=o(g(ae)),Ce=r(pe,!0);a(pe),O(),W(()=>X(Ce,e(c).keyName)),t(_,ae)},y=_=>{var ae=je(".");t(_,ae)};v(te,_=>{e(c).keyName?_(U):_(y,!1)})}a(R),t(h,R)},S=h=>{var R=j(),te=g(R);{var U=y=>{var _=Rt();t(y,_)};v(te,y=>{e(n)==="timestamp"&&y(U)},!0)}t(h,R)};v(F,h=>{e(n)==="signature"?h(x):h(S,!1)},!0)}t(L,Q)};v(ue,L=>{e(n)==="hash"?L(I):L(z,!1)})}t(H,P)},ce=H=>{var P=j(),G=g(P);{var J=I=>{var z=j(),L=g(z);{var Q=x=>{var S=Bt(),h=g(S),R=r(h);Oe(R,{class:"w-6 h-6 text-green-500 mr-2 opacity-90"}),O(2),a(h);var te=o(h,2);{var U=y=>{var _=jt();O(2),t(y,_)};v(te,y=>{e(n)==="timestamp"&&y(U)})}t(x,S)},F=x=>{var S=Ht(),h=g(S),R=r(h);Be(R,{class:"w-6 h-6 text-red-500 mr-2 opacity-90"}),O(2),a(h);var te=o(h,2);{var U=y=>{var _=Pt();O(2),t(y,_)};v(te,y=>{e(n)==="timestamp"&&y(U)})}t(x,S)};v(L,x=>{e(c).cachedValue?x(Q):x(F,!1)})}t(I,z)},ue=I=>{var z=j(),L=g(z);{var Q=x=>{var S=Kt(),h=g(S),R=r(h);Be(R,{class:"w-6 h-6 text-orange-500 mr-2"}),O(2),a(h),O(2),t(x,S)},F=x=>{var S=j(),h=g(S);{var R=U=>{var y=Ft(),_=g(y),ae=r(_);Be(ae,{class:"w-6 h-6 text-red-500 mr-2"});var pe=o(ae,2),Ce=r(pe);{var Ie=E=>{var A=je("Signature exists but doesn't verify cryptographically");t(E,A)},oe=E=>{var A=je("Timestamp present but doesn't verify");t(E,A)};v(Ce,E=>{e(n)==="signature"?E(Ie):E(oe,!1)})}a(pe),a(_);var ye=o(_,2);{var Le=E=>{var A=qt();O(2),t(E,A)},Re=E=>{var A=j(),we=g(A);{var Ue=Me=>{var De=zt();O(2),t(Me,De)};v(we,Me=>{e(n)==="timestamp"&&Me(Ue)},!0)}t(E,A)};v(ye,E=>{e(n)==="signature"?E(Le):E(Re,!1)})}t(U,y)},te=U=>{var y=$t(),_=g(y),ae=r(_);_t(ae,{class:"w-6 h-6 text-red-500 mr-2"}),O(2),a(_);var pe=o(_,2);{var Ce=oe=>{var ye=Ot();t(oe,ye)},Ie=oe=>{var ye=j(),Le=g(ye);{var Re=A=>{var we=Xt();t(A,we)},E=A=>{var we=j(),Ue=g(we);{var Me=De=>{var Ge=Yt();t(De,Ge)};v(Ue,De=>{e(n)==="timestamp"&&De(Me)},!0)}t(A,we)};v(Le,A=>{e(n)==="signature"?A(Re):A(E,!1)},!0)}t(oe,ye)};v(pe,oe=>{e(n)==="hash"?oe(Ce):oe(Ie,!1)})}t(U,y)};v(h,U=>{e(c).status==="present"?U(R):U(te,!1)},!0)}t(x,S)};v(L,x=>{e(c).status==="unknown_key"?x(Q):x(F,!1)},!0)}t(I,z)};v(G,I=>{e(c).status==="cached"?I(J):I(ue,!1)},!0)}t(H,P)};v($,H=>{e(c).status==="verified"?H(ie):H(ce,!1)})}a(N),W(()=>ht(N,`${e(c).status==="verified"?"bg-green-100 border border-green-400 text-green-700":e(c).status==="cached"&&e(c).cachedValue?"bg-green-100 border border-green-400 text-green-700 opacity-90":e(c).status==="unknown_key"?"bg-orange-100 border border-orange-400 text-orange-700":e(c).status==="present"?"bg-orange-100 border border-red-400 text-red-700":"bg-red-100 border border-red-400 text-red-700"} px-4 py-3 rounded relative`)),t(de,N)};v(xe,de=>{e(c)&&de(ve)},!0)}t(D,q)};v(be,D=>{e(f)?D(Ve):D(Ne,!1)})}var ee=o(be,2);{var Se=D=>{var q=Jt(),xe=o(r(q),2),ve=r(xe),de=r(ve);a(ve);var N=o(ve,2),$=r(N);a(N),a(xe),a(q),W(ie=>{X(de,`CID of asset: ${e(B)||"None"}`),X($,`CID in the Attestation: ${ie??""}`)},[()=>e(p).value.attestation.CID.toString()],Te),t(D,q)},$e=D=>{var q=j(),xe=g(q);{var ve=N=>{var $=Qt(),ie=o(r($),2),ce=o(r(ie),2),H=r(ce,!0);a(ce);var P=o(ce,4),G=r(P);a(P);var J=o(P,4),ue=r(J,!0);a(J),a(ie),a($),W((I,z,L)=>{X(H,I),X(G,`${z??""}
						`),X(ue,L)},[()=>Fe(e(p).value.signature.pubKey),()=>Fe(e(p).value.signature.sig),()=>e(p).value.signature.msg.toString()],Te),t(N,$)},de=N=>{var $=j(),ie=g($);{var ce=H=>{var P=Zt(),G=o(r(P),2),J=r(G),ue=r(J);a(J);var I=o(J,2),z=r(I);a(I);var L=o(I,2);{var Q=F=>{var x=Wt(),S=r(x);a(x),W(h=>X(S,`Cached: ${h??""}`),[()=>e(c).cacheTimestamp.toLocaleString()],Te),t(F,x)};v(L,F=>{e(c)&&e(c).status==="cached"&&e(c).cacheTimestamp&&F(Q)})}a(G),a(P),W(F=>{X(ue,`Timestamp Message: ${F??""}`),X(z,`Upgraded: ${(e(p).value.timestamp.ots.upgraded?"Yes":"No")??""}`)},[()=>e(p).value.timestamp.ots.msg.toString()],Te),t(H,P)};v(ie,H=>{e(n)==="timestamp"&&!e(f)&&e(p)&&H(ce)},!0)}t(N,$)};v(xe,N=>{e(n)==="signature"&&!e(f)&&e(p)?N(ve):N(de,!1)},!0)}t(D,q)};v(ee,D=>{e(n)==="hash"&&!e(f)&&e(p)?D(Se):D($e,!1)})}a(Y),W(D=>X(_e,D),[b],Te),t(ge,Y)},$$slots:{default:!0}})};v(fe,ne=>{e(k)&&e(p)&&ne(se)})}t(M,K),Ae(),s()}var aa=l('<div class="navbar sticky top-0 bg-white shadow-md z-50"><div class="logo"><img src="/logo.png" alt="AA Explorer Logo" class="logo-img"> <span>Authenticated Attributes Explorer</span></div> <div class="navbar-right"><!></div></div> <!> <div class="modal-container"><!></div>',1);function la(M,d){Ee(d,!0);function w(){bt.set(null);const f=new URL(window.location.href);f.searchParams.delete("selectedCID"),window.history.pushState({},"",f),window.dispatchEvent(new Event("popstate"))}var s=aa(),u=g(s),i=r(u),k=o(i,2),n=r(k);At(n),a(k),a(u);var p=o(u,2);yt(p,()=>d.children);var B=o(p,2),c=r(B);ta(c,{}),a(B),C("click",i,w),C("keydown",i,f=>f.key==="Enter"&&w()),t(M,s),Ae()}export{la as component};
