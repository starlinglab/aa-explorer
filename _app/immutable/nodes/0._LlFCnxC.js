import{c as I,e as M,a as t,t as n,s as z,n as at,b as qe}from"../chunks/nuOQF-VX.js";import{C as We,D as rt,B as st,E as it,K as ot,P as nt,as as lt,M as vt,p as Re,at as dt,i as m,j as Ue,au as ct,k as r,l as a,s as i,t as G,v as k,a8 as ut,av as Q,g as e,aw as we,ax as pt,X as ke,ay as Y}from"../chunks/gyiEl3Uc.js";import{i as Oe}from"../chunks/BkNFsCzC.js";import{p as Fe,i as v,r as ft,s as mt,b as gt}from"../chunks/CtItQhWX.js";import{s as ht,e as Xe,a as _t,r as Ye,b as Ge,i as bt,v as xt,c as yt,h as wt,u as Je,d as kt,C as Qe,H as ze,f as Tt,g as Ct}from"../chunks/lL0d4sFs.js";function Mt(D,d,y,s,u){var l;We&&rt();var o=(l=d.$$slots)==null?void 0:l[y],w=!1;o===!0&&(o=d.children,w=!0),o===void 0||o(D,w?()=>s:s)}function Dt(D,d,...y){var s=D,u=nt,o;st(()=>{u!==(u=d())&&(o&&(lt(o),o=null),o=ot(()=>u(s,...y)))},it),We&&(s=vt)}var Et=n('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-white rounded-lg p-6 max-w-xl w-full max-h-[90vh] overflow-auto" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold"> </h2> <button class="text-gray-500 hover:text-gray-700">✕</button></div> <div class="mb-4"><!></div> <div class="flex justify-end"><button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Close</button></div></div></div>');function Ze(D,d){Re(d,!1);let y=Fe(d,"showModal",12),s=Fe(d,"title",8,"");const u=dt();function o(){y(!1),u("close")}function w(f){f.key==="Escape"&&o()}function l(f){f.target===f.currentTarget&&o()}Oe();var p=I();M("keydown",ct,w);var U=m(p);{var c=f=>{var B=Et(),g=r(B),_=r(g),T=r(_),J=r(T,!0);a(T);var ce=i(T,2);a(_);var oe=i(_,2),Te=r(oe);Mt(Te,d,"default",{}),a(oe);var F=i(oe,2),he=r(F);a(F),a(g),a(B),G(()=>z(J,s())),M("click",ce,o),M("click",he,o),M("click",B,l),M("keydown",B,w),t(f,B)};v(U,f=>{y()&&f(c)})}t(D,p),Ue()}var St=at('<svg><path fill="currentColor" d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"></path></svg>');function At(D,d){const y=ft(d,["$$slots","$$events","$$legacy"]);var s=St();let u;G(()=>u=ht(s,u,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...y},void 0,!0)),t(D,s)}var Vt=n('<button class="p-1 text-red-500 hover:text-red-700" title="Remove endpoint">✕</button>'),Nt=n('<div class="flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-200 svelte-1kec5vf" draggable="true"><div class="cursor-move p-1 svelte-1kec5vf">☰</div> <div class="flex-grow grid grid-cols-2 gap-2"><input type="text" class="p-2 border border-gray-300 rounded" placeholder="Display Name"> <input type="text" class="p-2 border border-gray-300 rounded" placeholder="URL"></div> <!></div>'),It=n('<div class="mb-4"><p class="text-sm text-gray-600 mb-2">Configure and reorder the endpoints. The first endpoint will be considered the primary source.</p> <div class="endpoints-list space-y-2 svelte-1kec5vf"></div> <div class="mt-4 flex justify-between"><button class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">+ Add Endpoint</button> <button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save Changes</button></div></div>');function Lt(D,d){Re(d,!1);let y=Fe(d,"showModal",12,!1),s=Q([]);const u=Xe.subscribe(g=>{k(s,g.map((_,T)=>({name:_.name,url:_.url,id:`endpoint-${T}`})))});ut(()=>()=>{u()});function o(){const g=e(s).map(_=>({name:_.name,url:_.url}));Xe.set(g),y(!1)}function w(){const g={name:"New Endpoint",url:"https://"};k(s,[...e(s),{...g,id:`endpoint-${e(s).length}`}])}function l(g){k(s,e(s).filter((_,T)=>T!==g))}function p(g,_,T){const J=[...e(s)];J[g][_]=T,k(s,J)}let U;function c(g){U=g}function f(g){g.preventDefault()}function B(g){if(U===void 0)return;const _=[...e(s)],[T]=_.splice(U,1);_.splice(g,0,T),k(s,_),U=void 0}Oe(),Ze(D,{get showModal(){return y()},title:"Endpoint Settings",children:(g,_)=>{var T=It(),J=i(r(T),2);_t(J,5,()=>e(s),bt,(F,he,ue)=>{var pe=Nt(),fe=i(r(pe),2),ne=r(fe);Ye(ne);var Ce=i(ne,2);Ye(Ce),a(fe);var Ie=i(fe,2);{var je=W=>{var Le=Vt();M("click",Le,()=>l(ue)),t(W,Le)};v(Ie,W=>{e(s).length>1&&W(je)})}a(pe),G(()=>{Ge(ne,e(he).name),Ge(Ce,e(he).url)}),M("input",ne,W=>p(ue,"name",W.currentTarget.value)),M("input",Ce,W=>p(ue,"url",W.currentTarget.value)),M("dragstart",pe,()=>c(ue)),M("dragover",pe,f),M("drop",pe,()=>B(ue)),t(F,pe)}),a(J);var ce=i(J,2),oe=r(ce),Te=i(oe,2);a(ce),a(T),M("click",oe,w),M("click",Te,o),t(g,T)},$$slots:{default:!0}}),Ue()}var Rt=n('<div class="settings-button svelte-1so8a75"><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors" title="Settings"><!></button> <!></div>');function Ut(D){let d=Q(!1);function y(){k(d,!e(d))}var s=Rt(),u=r(s),o=r(u);At(o,{class:"h-6 w-6"}),a(u);var w=i(u,2);Lt(w,{get showModal(){return e(d)},set showModal(l){k(d,l)},$$legacy:!0}),a(s),M("click",u,y),t(D,s)}var jt=n('<div class="flex justify-center"><div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div></div>'),Bt=n('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),Pt=n(`<p class="mt-2 text-sm">The asset's hash matches the one contained in the metadata.</p>`),Ht=n("– that of: <strong> </strong>.",1),Kt=n('<p class="mt-2 text-sm">The digital signature is valid and was created with a known public key <!></p>'),qt=n('<p class="mt-2 text-sm">The timestamp proof is valid and anchored in the Bitcoin blockchain.</p>'),zt=n('<div class="flex items-center"><!> <span>Verification successful!</span></div> <!>',1),Ft=n(`<p class="mt-2 text-sm">The timestamp proof was recently verified and is valid. Using cached result to
									reduce blockchain queries.</p> <p class="mt-2 text-xs text-gray-600">Note: Cache expires after 5 minutes. Results from a fresh verification will be
									shown then.</p>`,1),Ot=n('<div class="flex items-center"><!> <span>Verification successful! (cached result)</span></div> <!>',1),Xt=n(`<p class="mt-2 text-sm">The timestamp was recently checked and couldn't be verified. Using cached result
									to reduce blockchain queries.</p> <p class="mt-2 text-xs text-gray-600">Note: Cache expires after 5 minutes. Results from a fresh verification will be
									shown then.</p>`,1),Yt=n('<div class="flex items-center"><!> <span>Verification failed! (cached result)</span></div> <!>',1),Gt=n('<div class="flex items-center"><!> <span>Signature verifies but is from an unknown public key</span></div> <p class="mt-2 text-sm">The signature is valid but was created with an unknown public key.</p>',1),Jt=n('<p class="mt-2 text-sm">The signature exists but failed cryptographic verification. This could be due to:</p> <ul class="list-disc pl-5 mt-1"><li>The signature is invalid or has been tampered with</li> <li>The data was modified after signing</li></ul>',1),Qt=n(`<p class="mt-2 text-sm">The timestamp exists but could not be verified. This could be due to:</p> <ul class="list-disc text-sm pl-5 mt-1"><li>The timestamp proof isn't properly formatted</li> <li>The timestamp hasn't been anchored in the blockchain yet</li> <li>The data was modified after timestamping</li></ul>`,1),Wt=n('<div class="flex items-center"><!> <span><!></span></div> <!>',1),Zt=n('<p class="mt-2 text-sm">The attestation CID does not match the selected CID.</p>'),$t=n('<p class="mt-2 text-sm">No signature was found for this attestation.</p>'),ea=n('<p class="mt-2 text-sm">No timestamp was found for this attestation.</p>'),ta=n('<div class="flex items-center"><!> <span>Verification failed!</span></div> <!>',1),aa=n("<div><!></div>"),ra=n('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p class="mt-2"> </p></div></div>'),sa=n('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono"><p>Public Key:</p> <pre class="whitespace-pre-wrap break-all bg-gray-200 p-2 rounded"> </pre> <p class="mt-3">Signature:</p> <pre class="whitespace-pre-wrap break-all bg-gray-200 p-2 rounded"> </pre> <p class="mt-2">Hash of the signed attestation:</p> <pre class="whitespace-pre-wrap break-all bg-gray-200 p-2 rounded"> </pre></div></div>'),ia=n('<p class="text-gray-600"> </p>'),oa=n('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p> <!></div></div>'),na=n('<div class="space-y-4"><p class="text-gray-700"> </p> <!> <!></div>');function la(D,d){Re(d,!1);const[y,s]=mt(),u=()=>gt(yt,"$verificationModalStore",y),o=Q(),w=Q(),l=Q(),p=Q(),U=Q();let c=Q(null),f=Q(!0),B=Q(null);async function g(){k(f,!0),k(B,null);try{k(c,await xt(e(l),e(p),e(U))),k(f,!1)}catch(F){k(B,F instanceof Error?F.message:"Unknown error occurred"),k(f,!1)}}function _(){return`${e(l).charAt(0).toUpperCase()+e(l).slice(1)} Verification`}function T(){switch(e(l)){case"hash":return"Verifying the asset's hash.";case"signature":return"Verifying the digital signature using the embedded public key.";case"timestamp":return"Verifying the OpenTimestamps proof against Bitcoin blockchain.";default:return"Unknown verification type."}}function J(){wt()}we(()=>u(),()=>{k(o,u())}),we(()=>e(o),()=>{k(w,e(o).show)}),we(()=>e(o),()=>{k(l,e(o).kind)}),we(()=>e(o),()=>{k(p,e(o).data)}),we(()=>e(o),()=>{k(U,e(o).selectedCID)}),we(()=>(e(w),e(p)),()=>{e(w)&&e(p)&&g()}),pt(),Oe();var ce=I(),oe=m(ce);{var Te=F=>{const he=ke(_);Ze(F,{get title(){return e(he)},get showModal(){return e(w)},$$events:{close:J},children:(ue,pe)=>{var fe=na(),ne=r(fe),Ce=r(ne,!0);a(ne);var Ie=i(ne,2);{var je=E=>{var O=jt();t(E,O)},W=E=>{var O=I(),_e=m(O);{var me=C=>{var S=Bt(),X=i(r(S),2),Z=r(X,!0);a(X),a(S),G(()=>z(Z,e(B))),t(C,S)},Me=C=>{var S=I(),X=m(S);{var Z=$=>{var P=aa(),be=r(P);{var le=H=>{var ee=zt(),te=m(ee),Ee=r(te);Qe(Ee,{class:"w-6 h-6 text-green-500 mr-2"}),Y(2),a(te);var ae=i(te,2);{var K=q=>{var ve=Pt();t(q,ve)},re=q=>{var ve=I(),Se=m(ve);{var A=b=>{var L=Kt(),se=i(r(L));{var R=h=>{var ie=Ht(),ge=i(m(ie)),Ae=r(ge,!0);a(ge),Y(),G(()=>z(Ae,e(c).keyName)),t(h,ie)},x=h=>{var ie=qe(".");t(h,ie)};v(se,h=>{e(c).keyName?h(R):h(x,!1)})}a(L),t(b,L)},j=b=>{var L=I(),se=m(L);{var R=x=>{var h=qt();t(x,h)};v(se,x=>{e(l)==="timestamp"&&x(R)},!0)}t(b,L)};v(Se,b=>{e(l)==="signature"?b(A):b(j,!1)},!0)}t(q,ve)};v(ae,q=>{e(l)==="hash"?q(K):q(re,!1)})}t(H,ee)},De=H=>{var ee=I(),te=m(ee);{var Ee=K=>{var re=I(),q=m(re);{var ve=A=>{var j=Ot(),b=m(j),L=r(b);Qe(L,{class:"w-6 h-6 text-green-500 mr-2 opacity-90"}),Y(2),a(b);var se=i(b,2);{var R=x=>{var h=Ft();Y(2),t(x,h)};v(se,x=>{e(l)==="timestamp"&&x(R)})}t(A,j)},Se=A=>{var j=Yt(),b=m(j),L=r(b);ze(L,{class:"w-6 h-6 text-red-500 mr-2 opacity-90"}),Y(2),a(b);var se=i(b,2);{var R=x=>{var h=Xt();Y(2),t(x,h)};v(se,x=>{e(l)==="timestamp"&&x(R)})}t(A,j)};v(q,A=>{e(c).cachedValue?A(ve):A(Se,!1)})}t(K,re)},ae=K=>{var re=I(),q=m(re);{var ve=A=>{var j=Gt(),b=m(j),L=r(b);ze(L,{class:"w-6 h-6 text-orange-500 mr-2"}),Y(2),a(b),Y(2),t(A,j)},Se=A=>{var j=I(),b=m(j);{var L=R=>{var x=Wt(),h=m(x),ie=r(h);ze(ie,{class:"w-6 h-6 text-red-500 mr-2"});var ge=i(ie,2),Ae=r(ge);{var Be=V=>{var N=qe("Signature exists but doesn't verify cryptographically");t(V,N)},de=V=>{var N=qe("Timestamp present but doesn't verify");t(V,N)};v(Ae,V=>{e(l)==="signature"?V(Be):V(de,!1)})}a(ge),a(h);var xe=i(h,2);{var Pe=V=>{var N=Jt();Y(2),t(V,N)},He=V=>{var N=I(),ye=m(N);{var Ke=Ve=>{var Ne=Qt();Y(2),t(Ve,Ne)};v(ye,Ve=>{e(l)==="timestamp"&&Ve(Ke)},!0)}t(V,N)};v(xe,V=>{e(l)==="signature"?V(Pe):V(He,!1)})}t(R,x)},se=R=>{var x=ta(),h=m(x),ie=r(h);Tt(ie,{class:"w-6 h-6 text-red-500 mr-2"}),Y(2),a(h);var ge=i(h,2);{var Ae=de=>{var xe=Zt();t(de,xe)},Be=de=>{var xe=I(),Pe=m(xe);{var He=N=>{var ye=$t();t(N,ye)},V=N=>{var ye=I(),Ke=m(ye);{var Ve=Ne=>{var tt=ea();t(Ne,tt)};v(Ke,Ne=>{e(l)==="timestamp"&&Ne(Ve)},!0)}t(N,ye)};v(Pe,N=>{e(l)==="signature"?N(He):N(V,!1)},!0)}t(de,xe)};v(ge,de=>{e(l)==="hash"?de(Ae):de(Be,!1)})}t(R,x)};v(b,R=>{e(c).status==="present"?R(L):R(se,!1)},!0)}t(A,j)};v(q,A=>{e(c).status==="unknown_key"?A(ve):A(Se,!1)},!0)}t(K,re)};v(te,K=>{e(c).status==="cached"?K(Ee):K(ae,!1)},!0)}t(H,ee)};v(be,H=>{e(c).status==="verified"?H(le):H(De,!1)})}a(P),G(()=>kt(P,`${e(c).status==="verified"?"bg-green-100 border border-green-400 text-green-700":e(c).status==="cached"&&e(c).cachedValue?"bg-green-100 border border-green-400 text-green-700 opacity-90":e(c).status==="unknown_key"?"bg-orange-100 border border-orange-400 text-orange-700":e(c).status==="present"?"bg-orange-100 border border-red-400 text-red-700":"bg-red-100 border border-red-400 text-red-700"} px-4 py-3 rounded relative`)),t($,P)};v(X,$=>{e(c)&&$(Z)},!0)}t(C,S)};v(_e,C=>{e(B)?C(me):C(Me,!1)},!0)}t(E,O)};v(Ie,E=>{e(f)?E(je):E(W,!1)})}var Le=i(Ie,2);{var $e=E=>{var O=ra(),_e=i(r(O),2),me=r(_e),Me=r(me);a(me);var C=i(me,2),S=r(C);a(C),a(_e),a(O),G(X=>{z(Me,`CID of asset: ${e(U)||"None"}`),z(S,`CID in the Attestation: ${X??""}`)},[()=>e(p).value.attestation.CID.toString()],ke),t(E,O)},et=E=>{var O=I(),_e=m(O);{var me=C=>{var S=sa(),X=i(r(S),2),Z=i(r(X),2),$=r(Z,!0);a(Z);var P=i(Z,4),be=r(P);a(P);var le=i(P,4),De=r(le,!0);a(le),a(X),a(S),G((H,ee,te)=>{z($,H),z(be,`${ee??""}
						`),z(De,te)},[()=>Je(e(p).value.signature.pubKey),()=>Je(e(p).value.signature.sig),()=>e(p).value.signature.msg.toString()],ke),t(C,S)},Me=C=>{var S=I(),X=m(S);{var Z=$=>{var P=oa(),be=i(r(P),2),le=r(be),De=r(le);a(le);var H=i(le,2),ee=r(H);a(H);var te=i(H,2);{var Ee=ae=>{var K=ia(),re=r(K);a(K),G(q=>z(re,`Cached: ${q??""}`),[()=>e(c).cacheTimestamp.toLocaleString()],ke),t(ae,K)};v(te,ae=>{e(c)&&e(c).status==="cached"&&e(c).cacheTimestamp&&ae(Ee)})}a(be),a(P),G(ae=>{z(De,`Timestamp Message: ${ae??""}`),z(ee,`Upgraded: ${(e(p).value.timestamp.ots.upgraded?"Yes":"No")??""}`)},[()=>e(p).value.timestamp.ots.msg.toString()],ke),t($,P)};v(X,$=>{e(l)==="timestamp"&&!e(f)&&e(p)&&$(Z)},!0)}t(C,S)};v(_e,C=>{e(l)==="signature"&&!e(f)&&e(p)?C(me):C(Me,!1)},!0)}t(E,O)};v(Le,E=>{e(l)==="hash"&&!e(f)&&e(p)?E($e):E(et,!1)})}a(fe),G(E=>z(Ce,E),[T],ke),t(ue,fe)},$$slots:{default:!0}})};v(oe,F=>{e(w)&&e(p)&&F(Te)})}t(D,ce),Ue(),s()}var va=n('<div class="navbar sticky top-0 bg-white shadow-md z-50"><div class="logo"><img src="/logo.png" alt="AA Explorer Logo" class="logo-img"> <span>Authenticated Attributes Explorer</span></div> <div class="navbar-right"><!></div></div> <!> <div class="modal-container"><!></div>',1);function ma(D,d){Re(d,!0);function y(){Ct.set(null);const f=new URL(window.location.href);f.searchParams.delete("selectedCID"),window.history.pushState({},"",f),window.dispatchEvent(new Event("popstate"))}var s=va(),u=m(s),o=r(u),w=i(o,2),l=r(w);Ut(l),a(w),a(u);var p=i(u,2);Dt(p,()=>d.children);var U=i(p,2),c=r(U);la(c,{}),a(U),M("click",o,y),M("keydown",o,f=>f.key==="Enter"&&y()),t(D,s),Ue()}export{ma as component};
