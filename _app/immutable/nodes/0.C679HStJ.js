import{c as I,e as w,a as t,t as d,s as z,n as Ue}from"../chunks/nuOQF-VX.js";import{C as Le,D as Ke,B as ze,E as Fe,K as Oe,P as qe,as as Xe,M as Ye,p as we,at as Ge,i as y,j as ke,au as He,k as r,l as a,s as n,t as O,v as _,a8 as Je,av as F,g as e,aw as ve,ax as Qe,X as be,ay as Ie}from"../chunks/gyiEl3Uc.js";import{i as Ae}from"../chunks/BkNFsCzC.js";import{p as Se,i as g,r as We,s as Ze,b as et}from"../chunks/CtItQhWX.js";import{s as tt,e as Ve,a as at,r as $e,b as je,i as rt,v as st,c as it,h as ot,d as nt,f as lt}from"../chunks/B8ySmsxT.js";function dt(k,l,m,s,v){var o;Le&&Ke();var i=(o=l.$$slots)==null?void 0:o[m],h=!1;i===!0&&(i=l.children,h=!0),i===void 0||i(k,h?()=>s:s)}function vt(k,l,...m){var s=k,v=qe,i;ze(()=>{v!==(v=l())&&(i&&(Xe(i),i=null),i=Oe(()=>v(s,...m)))},Fe),Le&&(s=Ye)}var ct=d('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-white rounded-lg p-6 max-w-xl w-full max-h-[90vh] overflow-auto" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold"> </h2> <button class="text-gray-500 hover:text-gray-700">âœ•</button></div> <div class="mb-4"><!></div> <div class="flex justify-end"><button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Close</button></div></div></div>');function Ne(k,l){we(l,!1);let m=Se(l,"showModal",12),s=Se(l,"title",8,"");const v=Ge();function i(){m(!1),v("close")}function h(c){c.key==="Escape"&&i()}function o(c){c.target===c.currentTarget&&i()}Ae();var u=I();w("keydown",He,h);var C=y(u);{var S=c=>{var A=ct(),p=r(A),f=r(p),b=r(f),B=r(b,!0);a(b);var Q=n(b,2);a(f);var H=n(f,2),ce=r(H);dt(ce,l,"default",{}),a(H);var V=n(H,2),ie=r(V);a(V),a(p),a(A),O(()=>z(B,s())),w("click",Q,i),w("click",ie,i),w("click",A,o),w("keydown",A,h),t(c,A)};g(C,c=>{m()&&c(S)})}t(k,u),ke()}var ut=Ue('<svg><path fill="currentColor" d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97s-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1s.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64z"></path></svg>');function pt(k,l){const m=We(l,["$$slots","$$events","$$legacy"]);var s=ut();let v;O(()=>v=tt(s,v,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...m},void 0,!0)),t(k,s)}var ft=d('<button class="p-1 text-red-500 hover:text-red-700" title="Remove endpoint">âœ•</button>'),gt=d('<div class="flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-200 svelte-1kec5vf" draggable="true"><div class="cursor-move p-1 svelte-1kec5vf">â˜°</div> <div class="flex-grow grid grid-cols-2 gap-2"><input type="text" class="p-2 border border-gray-300 rounded" placeholder="Display Name"> <input type="text" class="p-2 border border-gray-300 rounded" placeholder="URL"></div> <!></div>'),mt=d('<div class="mb-4"><p class="text-sm text-gray-600 mb-2">Configure and reorder the endpoints. The first endpoint will be considered the primary source.</p> <div class="endpoints-list space-y-2 svelte-1kec5vf"></div> <div class="mt-4 flex justify-between"><button class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">+ Add Endpoint</button> <button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save Changes</button></div></div>');function ht(k,l){we(l,!1);let m=Se(l,"showModal",12,!1),s=F([]);const v=Ve.subscribe(p=>{_(s,p.map((f,b)=>({name:f.name,url:f.url,id:`endpoint-${b}`})))});Je(()=>()=>{v()});function i(){const p=e(s).map(f=>({name:f.name,url:f.url}));Ve.set(p),m(!1)}function h(){const p={name:"New Endpoint",url:"https://"};_(s,[...e(s),{...p,id:`endpoint-${e(s).length}`}])}function o(p){_(s,e(s).filter((f,b)=>b!==p))}function u(p,f,b){const B=[...e(s)];B[p][f]=b,_(s,B)}let C;function S(p){C=p}function c(p){p.preventDefault()}function A(p){if(C===void 0)return;const f=[...e(s)],[b]=f.splice(C,1);f.splice(p,0,b),_(s,f),C=void 0}Ae(),Ne(k,{get showModal(){return m()},title:"Endpoint Settings",children:(p,f)=>{var b=mt(),B=n(r(b),2);at(B,5,()=>e(s),rt,(V,ie,W)=>{var Z=gt(),ee=n(r(Z),2),J=r(ee);$e(J);var ue=n(J,2);$e(ue),a(ee);var xe=n(ee,2);{var Te=q=>{var ye=ft();w("click",ye,()=>o(W)),t(q,ye)};g(xe,q=>{e(s).length>1&&q(Te)})}a(Z),O(()=>{je(J,e(ie).name),je(ue,e(ie).url)}),w("input",J,q=>u(W,"name",q.currentTarget.value)),w("input",ue,q=>u(W,"url",q.currentTarget.value)),w("dragstart",Z,()=>S(W)),w("dragover",Z,c),w("drop",Z,()=>A(W)),t(V,Z)}),a(B);var Q=n(B,2),H=r(Q),ce=n(H,2);a(Q),a(b),w("click",H,h),w("click",ce,i),t(p,b)},$$slots:{default:!0}}),ke()}var _t=d('<div class="settings-button svelte-1so8a75"><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors" title="Settings"><!></button> <!></div>');function bt(k){let l=F(!1);function m(){_(l,!e(l))}var s=_t(),v=r(s),i=r(v);pt(i,{class:"h-6 w-6"}),a(v);var h=n(v,2);ht(h,{get showModal(){return e(l)},set showModal(o){_(l,o)},$$legacy:!0}),a(s),w("click",v,m),t(k,s)}var xt=d('<div class="flex justify-center"><div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div></div>'),yt=d('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),wt=d('<p class="mt-2 text-sm">The attestation CID matches the selected CID.</p>'),kt=d('<p class="mt-2 text-sm">The digital signature is valid and was created with a known public key.</p>'),Tt=d('<p class="mt-2 text-sm">The timestamp proof is valid and anchored in the Bitcoin blockchain.</p>'),Dt=d('<div class="flex items-center"><span class="text-xl mr-2">ðŸŸ¢</span> <span>Verification successful!</span></div> <!>',1),Mt=d('<p class="mt-2 text-sm">The signature exists but could not be verified. This could be due to:</p> <ul class="list-disc pl-5 mt-1"><li>The signature was created with an unknown public key</li> <li>The signature is invalid or has been tampered with</li> <li>The data was modified after signing</li></ul>',1),Ct=d(`<p class="mt-2 text-sm">The timestamp exists but could not be verified. This could be due to:</p> <ul class="list-disc pl-5 mt-1"><li>The timestamp proof isn't properly formatted</li> <li>The timestamp hasn't been anchored in the blockchain yet</li> <li>The data was modified after timestamping</li></ul>`,1),Et=d('<div class="flex items-center"><span class="text-xl mr-2">ðŸŸ </span> <span> </span></div> <!>',1),St=d('<p class="mt-2 text-sm">The attestation CID does not match the selected CID.</p>'),At=d('<p class="mt-2 text-sm">No signature was found for this attestation.</p>'),It=d('<p class="mt-2 text-sm">No timestamp was found for this attestation.</p>'),Vt=d('<div class="flex items-center"><span class="text-xl mr-2">ðŸ”´</span> <span>Verification failed!</span></div> <!>',1),$t=d("<div><!></div>"),jt=d('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p></div></div>'),Lt=d('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p></div></div>'),Nt=d('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p></div></div>'),Bt=d('<div class="space-y-4"><p class="text-gray-700"> </p> <!> <!></div>');function Pt(k,l){we(l,!1);const[m,s]=Ze(),v=()=>et(it,"$verificationModalStore",m),i=F(),h=F(),o=F(),u=F(),C=F();let S=F(null),c=F(!0),A=F(null);async function p(){_(c,!0),_(A,null);try{_(S,await st(e(o),e(u),e(C))),_(c,!1)}catch(V){_(A,V instanceof Error?V.message:"Unknown error occurred"),_(c,!1)}}function f(){return`${e(o).charAt(0).toUpperCase()+e(o).slice(1)} Verification`}function b(){switch(e(o)){case"hash":return"Verifying the attestation's hash.";case"signature":return"Verifying the digital signature using the embedded public key.";case"timestamp":return"Verifying the OpenTimestamps proof against Bitcoin blockchain.";default:return"Unknown verification type."}}function B(){ot()}ve(()=>v(),()=>{_(i,v())}),ve(()=>e(i),()=>{_(h,e(i).show)}),ve(()=>e(i),()=>{_(o,e(i).kind)}),ve(()=>e(i),()=>{_(u,e(i).data)}),ve(()=>e(i),()=>{_(C,e(i).selectedCID)}),ve(()=>(e(h),e(u)),()=>{e(h)&&e(u)&&p()}),Qe(),Ae();var Q=I(),H=y(Q);{var ce=V=>{const ie=be(f);Ne(V,{get title(){return e(ie)},get showModal(){return e(h)},$$events:{close:B},children:(W,Z)=>{var ee=Bt(),J=r(ee),ue=r(J,!0);a(J);var xe=n(J,2);{var Te=T=>{var $=xt();t(T,$)},q=T=>{var $=I(),oe=y($);{var te=x=>{var D=yt(),j=n(r(D),2),X=r(j,!0);a(j),a(D),O(()=>z(X,e(A))),t(x,D)},pe=x=>{var D=I(),j=y(D);{var X=Y=>{var L=$t(),ne=r(L);{var ae=G=>{var re=Dt(),ge=n(y(re),2);{var De=E=>{var P=wt();t(E,P)},Me=E=>{var P=I(),se=y(P);{var le=M=>{var N=kt();t(M,N)},me=M=>{var N=I(),he=y(N);{var R=U=>{var K=Tt();t(U,K)};g(he,U=>{e(o)==="timestamp"&&U(R)},!0)}t(M,N)};g(se,M=>{e(o)==="signature"?M(le):M(me,!1)},!0)}t(E,P)};g(ge,E=>{e(o)==="hash"?E(De):E(Me,!1)})}t(G,re)},fe=G=>{var re=I(),ge=y(re);{var De=E=>{var P=Et(),se=y(P),le=n(r(se),2),me=r(le);a(le),a(se);var M=n(se,2);{var N=R=>{var U=Mt();Ie(2),t(R,U)},he=R=>{var U=I(),K=y(U);{var de=_e=>{var Ce=Ct();Ie(2),t(_e,Ce)};g(K,_e=>{e(o)==="timestamp"&&_e(de)},!0)}t(R,U)};g(M,R=>{e(o)==="signature"?R(N):R(he,!1)})}O(()=>z(me,`${(e(o)==="signature"?"Signature":"Timestamp")??""} present but doesn't verify!`)),t(E,P)},Me=E=>{var P=Vt(),se=n(y(P),2);{var le=M=>{var N=St();t(M,N)},me=M=>{var N=I(),he=y(N);{var R=K=>{var de=At();t(K,de)},U=K=>{var de=I(),_e=y(de);{var Ce=Ee=>{var Re=It();t(Ee,Re)};g(_e,Ee=>{e(o)==="timestamp"&&Ee(Ce)},!0)}t(K,de)};g(he,K=>{e(o)==="signature"?K(R):K(U,!1)},!0)}t(M,N)};g(se,M=>{e(o)==="hash"?M(le):M(me,!1)})}t(E,P)};g(ge,E=>{e(S).status==="present"?E(De):E(Me,!1)},!0)}t(G,re)};g(ne,G=>{e(S).status==="verified"?G(ae):G(fe,!1)})}a(L),O(()=>nt(L,`${e(S).status==="verified"?"bg-green-100 border border-green-400 text-green-700":e(S).status==="present"?"bg-orange-100 border border-orange-400 text-orange-700":"bg-red-100 border border-red-400 text-red-700"} px-4 py-3 rounded relative`)),t(Y,L)};g(j,Y=>{e(S)&&Y(X)},!0)}t(x,D)};g(oe,x=>{e(A)?x(te):x(pe,!1)},!0)}t(T,$)};g(xe,T=>{e(c)?T(Te):T(q,!1)})}var ye=n(xe,2);{var Be=T=>{var $=jt(),oe=n(r($),2),te=r(oe),pe=r(te);a(te);var x=n(te,2),D=r(x);a(x),a(oe),a($),O(j=>{z(pe,`Selected CID: ${e(C)||"None"}`),z(D,`Attestation CID: ${j??""}`)},[()=>e(u).value.attestation.CID.toString()],be),t(T,$)},Pe=T=>{var $=I(),oe=y($);{var te=x=>{var D=Lt(),j=n(r(D),2),X=r(j),Y=r(X);a(X);var L=n(X,2),ne=r(L);a(L),a(j),a(D),O((ae,fe)=>{z(Y,`Public Key: ${ae??""}...`),z(ne,`Signature: ${fe??""}...`)},[()=>Array.from(e(u).value.signature.pubKey).slice(0,8).join(", "),()=>Array.from(e(u).value.signature.sig).slice(0,8).join(", ")],be),t(x,D)},pe=x=>{var D=I(),j=y(D);{var X=Y=>{var L=Nt(),ne=n(r(L),2),ae=r(ne),fe=r(ae);a(ae);var G=n(ae,2),re=r(G);a(G),a(ne),a(L),O(ge=>{z(fe,`Timestamp Message: ${ge??""}`),z(re,`Upgraded: ${(e(u).value.timestamp.ots.upgraded?"Yes":"No")??""}`)},[()=>e(u).value.timestamp.ots.msg.toString()],be),t(Y,L)};g(j,Y=>{e(o)==="timestamp"&&!e(c)&&e(u)&&Y(X)},!0)}t(x,D)};g(oe,x=>{e(o)==="signature"&&!e(c)&&e(u)?x(te):x(pe,!1)},!0)}t(T,$)};g(ye,T=>{e(o)==="hash"&&!e(c)&&e(u)?T(Be):T(Pe,!1)})}a(ee),O(T=>z(ue,T),[b],be),t(W,ee)},$$slots:{default:!0}})};g(H,V=>{e(h)&&e(u)&&V(ce)})}t(k,Q),ke(),s()}var Rt=d('<div class="navbar sticky top-0 bg-white shadow-md z-50"><div class="logo"><img src="/logo.png" alt="AA Explorer Logo" class="logo-img"> <span>Authenticated Attributes Explorer</span></div> <div class="navbar-right"><!></div></div> <!> <div class="modal-container"><!></div>',1);function qt(k,l){we(l,!0);function m(){lt.set(null);const c=new URL(window.location.href);c.searchParams.delete("selectedCID"),window.history.pushState({},"",c),window.dispatchEvent(new Event("popstate"))}var s=Rt(),v=y(s),i=r(v),h=n(i,2),o=r(h);bt(o),a(h),a(v);var u=n(v,2);vt(u,()=>l.children);var C=n(u,2),S=r(C);Pt(S,{}),a(C),w("click",i,m),w("keydown",i,c=>c.key==="Enter"&&m()),t(k,s),ke()}export{qt as component};
