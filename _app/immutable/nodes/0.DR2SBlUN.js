import{c as I,e as y,a as t,t as l,s as F}from"../chunks/CHab-tyq.js";import{C as Le,D as ze,B as Ke,E as Fe,K as Oe,P as $e,as as qe,M as Xe,p as ye,at as Ye,i as w,j as ke,au as Ge,k as r,l as a,s as n,t as G,v as h,a8 as He,av as O,g as e,aw as ve,ax as Je,X as be,ay as Ie}from"../chunks/Cb08Umz0.js";import{i as Ae}from"../chunks/BZFA2cBF.js";import{p as Se,i as f,s as Qe,b as We}from"../chunks/-kOe-Ae9.js";import{e as je,a as Ze,r as Ve,s as Ne,i as et,v as tt,b as at,h as rt,c as st,d as it}from"../chunks/CCV-jELe.js";function ot(D,v,b,i,g){var o;Le&&ze();var s=(o=v.$$slots)==null?void 0:o[b],m=!1;s===!0&&(s=v.children,m=!0),s===void 0||s(D,m?()=>i:i)}function nt(D,v,...b){var i=D,g=$e,s;Ke(()=>{g!==(g=v())&&(s&&(qe(s),s=null),s=Oe(()=>g(i,...b)))},Fe),Le&&(i=Xe)}var lt=l('<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" role="button" tabindex="0"><div class="bg-white rounded-lg p-6 max-w-xl w-full max-h-[90vh] overflow-auto" role="dialog" aria-modal="true"><div class="flex justify-between items-center mb-4"><h2 class="text-xl font-bold"> </h2> <button class="text-gray-500 hover:text-gray-700">âœ•</button></div> <div class="mb-4"><!></div> <div class="flex justify-end"><button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Close</button></div></div></div>');function Be(D,v){ye(v,!1);let b=Se(v,"showModal",12),i=Se(v,"title",8,"");const g=Ye();function s(){b(!1),g("close")}function m(d){d.key==="Escape"&&s()}function o(d){d.target===d.currentTarget&&s()}Ae();var c=I();y("keydown",Ge,m);var C=w(c);{var S=d=>{var A=lt(),u=r(A),p=r(u),_=r(p),P=r(_,!0);a(_);var Q=n(_,2);a(p);var H=n(p,2),ce=r(H);ot(ce,v,"default",{}),a(H);var j=n(H,2),ie=r(j);a(j),a(u),a(A),G(()=>F(P,i())),y("click",Q,s),y("click",ie,s),y("click",A,o),y("keydown",A,m),t(d,A)};f(C,d=>{b()&&d(S)})}t(D,c),ke()}var dt=l('<button class="p-1 text-red-500 hover:text-red-700" title="Remove endpoint">âœ•</button>'),vt=l('<div class="flex items-center gap-2 p-2 bg-gray-50 rounded border border-gray-200 svelte-1kec5vf" draggable="true"><div class="cursor-move p-1 svelte-1kec5vf">â˜°</div> <div class="flex-grow grid grid-cols-2 gap-2"><input type="text" class="p-2 border border-gray-300 rounded" placeholder="Display Name"> <input type="text" class="p-2 border border-gray-300 rounded" placeholder="URL"></div> <!></div>'),ct=l('<div class="mb-4"><p class="text-sm text-gray-600 mb-2">Configure and reorder the endpoints. The first endpoint will be considered the primary source.</p> <div class="endpoints-list space-y-2 svelte-1kec5vf"></div> <div class="mt-4 flex justify-between"><button class="px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300">+ Add Endpoint</button> <button class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">Save Changes</button></div></div>');function ut(D,v){ye(v,!1);let b=Se(v,"showModal",12,!1),i=O([]);const g=je.subscribe(u=>{h(i,u.map((p,_)=>({name:p.name,url:p.url,id:`endpoint-${_}`})))});He(()=>()=>{g()});function s(){const u=e(i).map(p=>({name:p.name,url:p.url}));je.set(u),b(!1)}function m(){const u={name:"New Endpoint",url:"https://"};h(i,[...e(i),{...u,id:`endpoint-${e(i).length}`}])}function o(u){h(i,e(i).filter((p,_)=>_!==u))}function c(u,p,_){const P=[...e(i)];P[u][p]=_,h(i,P)}let C;function S(u){C=u}function d(u){u.preventDefault()}function A(u){if(C===void 0)return;const p=[...e(i)],[_]=p.splice(C,1);p.splice(u,0,_),h(i,p),C=void 0}Ae(),Be(D,{get showModal(){return b()},title:"Endpoint Settings",children:(u,p)=>{var _=ct(),P=n(r(_),2);Ze(P,5,()=>e(i),et,(j,ie,W)=>{var Z=vt(),ee=n(r(Z),2),J=r(ee);Ve(J);var ue=n(J,2);Ve(ue),a(ee);var xe=n(ee,2);{var Te=$=>{var we=dt();y("click",we,()=>o(W)),t($,we)};f(xe,$=>{e(i).length>1&&$(Te)})}a(Z),G(()=>{Ne(J,e(ie).name),Ne(ue,e(ie).url)}),y("input",J,$=>c(W,"name",$.currentTarget.value)),y("input",ue,$=>c(W,"url",$.currentTarget.value)),y("dragstart",Z,()=>S(W)),y("dragover",Z,d),y("drop",Z,()=>A(W)),t(j,Z)}),a(P);var Q=n(P,2),H=r(Q),ce=n(H,2);a(Q),a(_),y("click",H,m),y("click",ce,s),t(u,_)},$$slots:{default:!0}}),ke()}var pt=l('<div class="settings-button svelte-1so8a75"><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors" title="Settings"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button> <!></div>');function ft(D){let v=O(!1);function b(){h(v,!e(v))}var i=pt(),g=r(i),s=n(g,2);ut(s,{get showModal(){return e(v)},set showModal(m){h(v,m)},$$legacy:!0}),a(i),y("click",g,b),t(D,i)}var gt=l('<div class="flex justify-center"><div class="animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div></div>'),mt=l('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative"><strong class="font-bold">Error:</strong> <span class="block sm:inline"> </span></div>'),ht=l('<p class="mt-2 text-sm">The attestation CID matches the selected CID.</p>'),_t=l('<p class="mt-2 text-sm">The digital signature is valid and was created with a known public key.</p>'),bt=l('<p class="mt-2 text-sm">The timestamp proof is valid and anchored in the Bitcoin blockchain.</p>'),xt=l('<div class="flex items-center"><span class="text-xl mr-2">ðŸŸ¢</span> <span>Verification successful!</span></div> <!>',1),wt=l('<p class="mt-2 text-sm">The signature exists but could not be verified. This could be due to:</p> <ul class="list-disc pl-5 mt-1"><li>The signature was created with an unknown public key</li> <li>The signature is invalid or has been tampered with</li> <li>The data was modified after signing</li></ul>',1),yt=l(`<p class="mt-2 text-sm">The timestamp exists but could not be verified. This could be due to:</p> <ul class="list-disc pl-5 mt-1"><li>The timestamp proof isn't properly formatted</li> <li>The timestamp hasn't been anchored in the blockchain yet</li> <li>The data was modified after timestamping</li></ul>`,1),kt=l('<div class="flex items-center"><span class="text-xl mr-2">ðŸŸ </span> <span> </span></div> <!>',1),Tt=l('<p class="mt-2 text-sm">The attestation CID does not match the selected CID.</p>'),Mt=l('<p class="mt-2 text-sm">No signature was found for this attestation.</p>'),Dt=l('<p class="mt-2 text-sm">No timestamp was found for this attestation.</p>'),Ct=l('<div class="flex items-center"><span class="text-xl mr-2">ðŸ”´</span> <span>Verification failed!</span></div> <!>',1),Et=l("<div><!></div>"),St=l('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p></div></div>'),At=l('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p></div></div>'),It=l('<div class="mt-4 border-t pt-4"><h3 class="font-semibold mb-2">Technical Details</h3> <div class="bg-gray-100 p-3 rounded text-sm font-mono overflow-x-auto"><p> </p> <p> </p></div></div>'),jt=l('<div class="space-y-4"><p class="text-gray-700"> </p> <!> <!></div>');function Vt(D,v){ye(v,!1);const[b,i]=Qe(),g=()=>We(at,"$verificationModalStore",b),s=O(),m=O(),o=O(),c=O(),C=O();let S=O(null),d=O(!0),A=O(null);async function u(){h(d,!0),h(A,null);try{h(S,await tt(e(o),e(c),e(C))),h(d,!1)}catch(j){h(A,j instanceof Error?j.message:"Unknown error occurred"),h(d,!1)}}function p(){return`${e(o).charAt(0).toUpperCase()+e(o).slice(1)} Verification`}function _(){switch(e(o)){case"hash":return"Verifying the attestation's hash.";case"signature":return"Verifying the digital signature using the embedded public key.";case"timestamp":return"Verifying the OpenTimestamps proof against Bitcoin blockchain.";default:return"Unknown verification type."}}function P(){rt()}ve(()=>g(),()=>{h(s,g())}),ve(()=>e(s),()=>{h(m,e(s).show)}),ve(()=>e(s),()=>{h(o,e(s).kind)}),ve(()=>e(s),()=>{h(c,e(s).data)}),ve(()=>e(s),()=>{h(C,e(s).selectedCID)}),ve(()=>(e(m),e(c)),()=>{e(m)&&e(c)&&u()}),Je(),Ae();var Q=I(),H=w(Q);{var ce=j=>{const ie=be(p);Be(j,{get title(){return e(ie)},get showModal(){return e(m)},$$events:{close:P},children:(W,Z)=>{var ee=jt(),J=r(ee),ue=r(J,!0);a(J);var xe=n(J,2);{var Te=k=>{var V=gt();t(k,V)},$=k=>{var V=I(),oe=w(V);{var te=x=>{var T=mt(),N=n(r(T),2),q=r(N,!0);a(N),a(T),G(()=>F(q,e(A))),t(x,T)},pe=x=>{var T=I(),N=w(T);{var q=X=>{var L=Et(),ne=r(L);{var ae=Y=>{var re=xt(),ge=n(w(re),2);{var Me=E=>{var R=ht();t(E,R)},De=E=>{var R=I(),se=w(R);{var le=M=>{var B=_t();t(M,B)},me=M=>{var B=I(),he=w(B);{var U=z=>{var K=bt();t(z,K)};f(he,z=>{e(o)==="timestamp"&&z(U)},!0)}t(M,B)};f(se,M=>{e(o)==="signature"?M(le):M(me,!1)},!0)}t(E,R)};f(ge,E=>{e(o)==="hash"?E(Me):E(De,!1)})}t(Y,re)},fe=Y=>{var re=I(),ge=w(re);{var Me=E=>{var R=kt(),se=w(R),le=n(r(se),2),me=r(le);a(le),a(se);var M=n(se,2);{var B=U=>{var z=wt();Ie(2),t(U,z)},he=U=>{var z=I(),K=w(z);{var de=_e=>{var Ce=yt();Ie(2),t(_e,Ce)};f(K,_e=>{e(o)==="timestamp"&&_e(de)},!0)}t(U,z)};f(M,U=>{e(o)==="signature"?U(B):U(he,!1)})}G(()=>F(me,`${(e(o)==="signature"?"Signature":"Timestamp")??""} present but doesn't verify!`)),t(E,R)},De=E=>{var R=Ct(),se=n(w(R),2);{var le=M=>{var B=Tt();t(M,B)},me=M=>{var B=I(),he=w(B);{var U=K=>{var de=Mt();t(K,de)},z=K=>{var de=I(),_e=w(de);{var Ce=Ee=>{var Ue=Dt();t(Ee,Ue)};f(_e,Ee=>{e(o)==="timestamp"&&Ee(Ce)},!0)}t(K,de)};f(he,K=>{e(o)==="signature"?K(U):K(z,!1)},!0)}t(M,B)};f(se,M=>{e(o)==="hash"?M(le):M(me,!1)})}t(E,R)};f(ge,E=>{e(S).status==="present"?E(Me):E(De,!1)},!0)}t(Y,re)};f(ne,Y=>{e(S).status==="verified"?Y(ae):Y(fe,!1)})}a(L),G(()=>st(L,`${e(S).status==="verified"?"bg-green-100 border border-green-400 text-green-700":e(S).status==="present"?"bg-orange-100 border border-orange-400 text-orange-700":"bg-red-100 border border-red-400 text-red-700"} px-4 py-3 rounded relative`)),t(X,L)};f(N,X=>{e(S)&&X(q)},!0)}t(x,T)};f(oe,x=>{e(A)?x(te):x(pe,!1)},!0)}t(k,V)};f(xe,k=>{e(d)?k(Te):k($,!1)})}var we=n(xe,2);{var Pe=k=>{var V=St(),oe=n(r(V),2),te=r(oe),pe=r(te);a(te);var x=n(te,2),T=r(x);a(x),a(oe),a(V),G(N=>{F(pe,`Selected CID: ${e(C)||"None"}`),F(T,`Attestation CID: ${N??""}`)},[()=>e(c).value.attestation.CID.toString()],be),t(k,V)},Re=k=>{var V=I(),oe=w(V);{var te=x=>{var T=At(),N=n(r(T),2),q=r(N),X=r(q);a(q);var L=n(q,2),ne=r(L);a(L),a(N),a(T),G((ae,fe)=>{F(X,`Public Key: ${ae??""}...`),F(ne,`Signature: ${fe??""}...`)},[()=>Array.from(e(c).value.signature.pubKey).slice(0,8).join(", "),()=>Array.from(e(c).value.signature.sig).slice(0,8).join(", ")],be),t(x,T)},pe=x=>{var T=I(),N=w(T);{var q=X=>{var L=It(),ne=n(r(L),2),ae=r(ne),fe=r(ae);a(ae);var Y=n(ae,2),re=r(Y);a(Y),a(ne),a(L),G(ge=>{F(fe,`Timestamp Message: ${ge??""}`),F(re,`Upgraded: ${(e(c).value.timestamp.ots.upgraded?"Yes":"No")??""}`)},[()=>e(c).value.timestamp.ots.msg.toString()],be),t(X,L)};f(N,X=>{e(o)==="timestamp"&&!e(d)&&e(c)&&X(q)},!0)}t(x,T)};f(oe,x=>{e(o)==="signature"&&!e(d)&&e(c)?x(te):x(pe,!1)},!0)}t(k,V)};f(we,k=>{e(o)==="hash"&&!e(d)&&e(c)?k(Pe):k(Re,!1)})}a(ee),G(k=>F(ue,k),[_],be),t(W,ee)},$$slots:{default:!0}})};f(H,j=>{e(m)&&e(c)&&j(ce)})}t(D,Q),ke(),i()}var Nt=l('<div class="navbar sticky top-0 bg-white shadow-md z-50"><div class="logo"><img src="/logo.png" alt="AA Explorer Logo" class="logo-img"> <span>Authenticated Attributes Explorer</span></div> <div class="navbar-right"><!></div></div> <!> <div class="modal-container"><!></div>',1);function zt(D,v){ye(v,!0);function b(){it.set(null);const d=new URL(window.location.href);d.searchParams.delete("selectedCID"),window.history.pushState({},"",d),window.dispatchEvent(new Event("popstate"))}var i=Nt(),g=w(i),s=r(g),m=n(s,2),o=r(m);ft(o),a(m),a(g);var c=n(g,2);nt(c,()=>v.children);var C=n(c,2),S=r(C);Vt(S,{}),a(C),y("click",s,b),y("keydown",s,d=>d.key==="Enter"&&b()),t(D,i),ke()}export{zt as component};
