var _n=Object.defineProperty;var En=(e,t,n)=>t in e?_n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var _=(e,t,n)=>En(e,typeof t!="symbol"?t+"":t,n);import{G as De,C as L,ae as An,af as kn,D as Sn,B as Bn,g as bt,X as Tn,H as Cn,F as vt,I as Re,M as fe,am as In,J as Gt,K as Ht,L as Nn,aq as Xt,A as Un,Q as $n,n as _t,az as Fe,x as Et,aA as Je,aB as At,aC as On,ap as Mn,aD as zn,as as Dn,aE as We,aF as Rn,ak as Fn,aG as Zt,a6 as Ln,aH as jn,aI as Vn,aJ as qn,z as Pn,aK as Gn,aL as Qe}from"./Cb08Umz0.js";let kt=!1;function Hn(){kt||(kt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function zi(e,t){return t}function Xn(e,t,n,r){for(var o=[],i=t.length,s=0;s<i;s++)On(t[s].e,o,!0);var c=i>0&&o.length===0&&n!==null;if(c){var u=n.parentNode;Mn(u),u.append(n),r.clear(),X(e,t[0].prev,t[i-1].next)}zn(o,()=>{for(var w=0;w<i;w++){var l=t[w];c||(r.delete(l.k),X(e,l.prev,l.next)),Dn(l.e,!c)}})}function Di(e,t,n,r,o,i=null){var s=e,c={items:new Map,first:null},u=(t&Zt)!==0;if(u){var w=e;s=L?De(An(w)):w.appendChild(kn())}L&&Sn();var l=null,m=!1,y=Tn(()=>{var v=n();return Un(v)?v:v==null?[]:Xt(v)});Bn(()=>{var v=bt(y),d=v.length;if(m&&d===0)return;m=d===0;let A=!1;if(L){var S=s.data===Cn;S!==(d===0)&&(s=vt(),De(s),Re(!1),A=!0)}if(L){for(var k=null,C,B=0;B<d;B++){if(fe.nodeType===8&&fe.data===In){s=fe,A=!0,Re(!1);break}var g=v[B],x=r(g,B);C=Kt(fe,c,k,null,g,x,B,o,t,n),c.items.set(x,C),k=C}d>0&&De(vt())}L||Zn(v,c,s,o,t,r,n),i!==null&&(d===0?l?Gt(l):l=Ht(()=>i(s)):l!==null&&Nn(l,()=>{l=null})),A&&Re(!0),bt(y)}),L&&(s=fe)}function Zn(e,t,n,r,o,i,s){var pt,wt,gt,mt;var c=(o&jn)!==0,u=(o&(We|Je))!==0,w=e.length,l=t.items,m=t.first,y=m,v,d=null,A,S=[],k=[],C,B,g,x;if(c)for(x=0;x<w;x+=1)C=e[x],B=i(C,x),g=l.get(B),g!==void 0&&((pt=g.a)==null||pt.measure(),(A??(A=new Set)).add(g));for(x=0;x<w;x+=1){if(C=e[x],B=i(C,x),g=l.get(B),g===void 0){var z=y?y.e.nodes_start:n;d=Kt(z,t,d,d===null?t.first:d.next,C,B,x,r,o,s),l.set(B,d),S=[],k=[],y=d.next;continue}if(u&&Kn(g,C,x,o),g.e.f&Fe&&(Gt(g.e),c&&((wt=g.a)==null||wt.unfix(),(A??(A=new Set)).delete(g))),g!==y){if(v!==void 0&&v.has(g)){if(S.length<k.length){var I=k[0],N;d=I.prev;var Y=S[0],Me=S[S.length-1];for(N=0;N<S.length;N+=1)St(S[N],I,n);for(N=0;N<k.length;N+=1)v.delete(k[N]);X(t,Y.prev,Me.next),X(t,d,Y),X(t,Me,I),y=I,d=Me,x-=1,S=[],k=[]}else v.delete(g),St(g,y,n),X(t,g.prev,g.next),X(t,g,d===null?t.first:d.next),X(t,d,g),d=g;continue}for(S=[],k=[];y!==null&&y.k!==B;)y.e.f&Fe||(v??(v=new Set)).add(y),k.push(y),y=y.next;if(y===null)continue;g=y}S.push(g),d=g,y=g.next}if(y!==null||v!==void 0){for(var ce=v===void 0?[]:Xt(v);y!==null;)y.e.f&Fe||ce.push(y),y=y.next;var ze=ce.length;if(ze>0){var vn=o&Zt&&w===0?n:null;if(c){for(x=0;x<ze;x+=1)(gt=ce[x].a)==null||gt.measure();for(x=0;x<ze;x+=1)(mt=ce[x].a)==null||mt.fix()}Xn(t,ce,vn,l)}}c&&Ln(()=>{var xt;if(A!==void 0)for(g of A)(xt=g.a)==null||xt.apply()}),Et.first=t.first&&t.first.e,Et.last=d&&d.e}function Kn(e,t,n,r){r&We&&At(e.v,t),r&Je?At(e.i,n):e.i=n}function Kt(e,t,n,r,o,i,s,c,u,w){var l=(u&We)!==0,m=(u&Rn)===0,y=l?m?$n(o):_t(o):o,v=u&Je?_t(s):s,d={i:v,v:y,k:i,a:null,e:null,prev:n,next:r};try{return d.e=Ht(()=>c(e,y,v,w),L),d.e.prev=n&&n.e,d.e.next=r&&r.e,n===null?t.first=d:(n.next=d,n.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function St(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==r;){var s=Fn(i);o.before(i),i=s}}function X(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ri(e){if(L){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;Bt(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;Bt(e,"checked",null),e.checked=o}}};e.__on_r=n,Vn(n),Hn()}}function Fi(e,t){var n=e.__attributes??(e.__attributes={});n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Bt(e,t,n,r){var o=e.__attributes??(e.__attributes={});L&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[qn]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Yn(e).includes(t)?e[t]=n:e.setAttribute(t,n))}var Tt=new Map;function Yn(e){var t=Tt.get(e.nodeName);if(t)return t;Tt.set(e.nodeName,t=[]);for(var n,r=e,o=Element.prototype;o!==r;){n=Gn(r);for(var i in n)n[i].set&&t.push(i);r=Pn(r)}return t}function Li(e,t,n){var r=e.__className,o=Jn(t);L&&e.className===o?e.__className=o:(r!==o||L&&e.className!==o)&&(t==null?e.removeAttribute("class"):e.className=o,e.__className=o)}function Jn(e,t){return(e??"")+""}const Wn=["string","number","bigint","symbol"],Qn=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function er(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(Wn.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(tr(e))return"Buffer";const n=nr(e);return n||"Object"}function tr(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function nr(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(Qn.includes(t))return t}class a{constructor(t,n,r){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}a.uint=new a(0,"uint",!0);a.negint=new a(1,"negint",!0);a.bytes=new a(2,"bytes",!0);a.string=new a(3,"string",!0);a.array=new a(4,"array",!1);a.map=new a(5,"map",!1);a.tag=new a(6,"tag",!1);a.float=new a(7,"float",!0);a.false=new a(7,"false",!0);a.true=new a(7,"true",!0);a.null=new a(7,"null",!0);a.undefined=new a(7,"undefined",!0);a.break=new a(7,"break",!0);class h{constructor(t,n,r){this.type=t,this.value=n,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const oe=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",rr=new TextDecoder,or=new TextEncoder;function Ae(e){return oe&&globalThis.Buffer.isBuffer(e)}function Yt(e){return e instanceof Uint8Array?Ae(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const ir=oe?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):It(e,t,n):(e,t,n)=>n-t>64?rr.decode(e.subarray(t,n)):It(e,t,n),sr=oe?e=>e.length>64?globalThis.Buffer.from(e):Ct(e):e=>e.length>64?or.encode(e):Ct(e),q=e=>Uint8Array.from(e),et=oe?(e,t,n)=>Ae(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),ar=oe?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),Yt(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},cr=oe?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function fr(e,t){if(Ae(e)&&Ae(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function Ct(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t}function It(e,t,n){const r=[];for(;t<n;){const o=e[t];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let c,u,w,l;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[t+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(i=l));break;case 3:c=e[t+1],u=e[t+2],(c&192)===128&&(u&192)===128&&(l=(o&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=e[t+1],u=e[t+2],w=e[t+3],(c&192)===128&&(u&192)===128&&(w&192)===128&&(l=(o&15)<<18|(c&63)<<12|(u&63)<<6|w&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),t+=s}return ur(r)}const Nt=4096;function ur(e){const t=e.length;if(t<=Nt)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Nt));return n}const lr=256;class Jt{constructor(t=lr){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(t,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=cr(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const r=this.chunks[0];t&&this.cursor>r.length/2?(n=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=et(r,0,this.cursor)}else n=ar(this.chunks,this.cursor);return t&&this.reset(),n}}const b="CBOR decode error:",Wt="CBOR encode error:";function ie(e,t,n){if(e.length-t<n)throw new Error(`${b} not enough data for type`)}const U=[24,256,65536,4294967296,BigInt("18446744073709551616")];function W(e,t,n){ie(e,t,1);const r=e[t];if(n.strict===!0&&r<U[0])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);return r}function Q(e,t,n){ie(e,t,2);const r=e[t]<<8|e[t+1];if(n.strict===!0&&r<U[1])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);return r}function ee(e,t,n){ie(e,t,4);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&r<U[2])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);return r}function te(e,t,n){ie(e,t,8);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(n.strict===!0&&i<U[3])throw new Error(`${b} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(n.allowBigInt===!0)return i;throw new Error(`${b} integers outside of the safe integer range are not supported`)}function dr(e,t,n,r){return new h(a.uint,W(e,t+1,r),2)}function hr(e,t,n,r){return new h(a.uint,Q(e,t+1,r),3)}function yr(e,t,n,r){return new h(a.uint,ee(e,t+1,r),5)}function pr(e,t,n,r){return new h(a.uint,te(e,t+1,r),9)}function ne(e,t){return R(e,0,t.value)}function R(e,t,n){if(n<U[0]){const r=Number(n);e.push([t|r])}else if(n<U[1]){const r=Number(n);e.push([t|24,r])}else if(n<U[2]){const r=Number(n);e.push([t|25,r>>>8,r&255])}else if(n<U[3]){const r=Number(n);e.push([t|26,r>>>24&255,r>>>16&255,r>>>8&255,r&255])}else{const r=BigInt(n);if(r<U[4]){const o=[t|27,0,0,0,0,0,0,0];let i=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,e.push(o)}else throw new Error(`${b} encountered BigInt larger than allowable range`)}}ne.encodedSize=function(t){return R.encodedSize(t.value)};R.encodedSize=function(t){return t<U[0]?1:t<U[1]?2:t<U[2]?3:t<U[3]?5:9};ne.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function wr(e,t,n,r){return new h(a.negint,-1-W(e,t+1,r),2)}function gr(e,t,n,r){return new h(a.negint,-1-Q(e,t+1,r),3)}function mr(e,t,n,r){return new h(a.negint,-1-ee(e,t+1,r),5)}const tt=BigInt(-1),Qt=BigInt(1);function xr(e,t,n,r){const o=te(e,t+1,r);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new h(a.negint,i,9)}if(r.allowBigInt!==!0)throw new Error(`${b} integers outside of the safe integer range are not supported`);return new h(a.negint,tt-BigInt(o),9)}function nt(e,t){const n=t.value,r=typeof n=="bigint"?n*tt-Qt:n*-1-1;R(e,t.type.majorEncoded,r)}nt.encodedSize=function(t){const n=t.value,r=typeof n=="bigint"?n*tt-Qt:n*-1-1;return r<U[0]?1:r<U[1]?2:r<U[2]?3:r<U[3]?5:9};nt.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function we(e,t,n,r){ie(e,t,n+r);const o=et(e,t+n,t+n+r);return new h(a.bytes,o,n+r)}function br(e,t,n,r){return we(e,t,1,n)}function vr(e,t,n,r){return we(e,t,2,W(e,t+1,r))}function _r(e,t,n,r){return we(e,t,3,Q(e,t+1,r))}function Er(e,t,n,r){return we(e,t,5,ee(e,t+1,r))}function Ar(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer bytes lengths not supported`);return we(e,t,9,o)}function ke(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===a.string?sr(e.value):e.value),e.encodedBytes}function Ne(e,t){const n=ke(t);R(e,t.type.majorEncoded,n.length),e.push(n)}Ne.encodedSize=function(t){const n=ke(t);return R.encodedSize(n.length)+n.length};Ne.compareTokens=function(t,n){return kr(ke(t),ke(n))};function kr(e,t){return e.length<t.length?-1:e.length>t.length?1:fr(e,t)}function ge(e,t,n,r,o){const i=n+r;ie(e,t,i);const s=new h(a.string,ir(e,t+n,t+i),i);return o.retainStringBytes===!0&&(s.byteValue=et(e,t+n,t+i)),s}function Sr(e,t,n,r){return ge(e,t,1,n,r)}function Br(e,t,n,r){return ge(e,t,2,W(e,t+1,r),r)}function Tr(e,t,n,r){return ge(e,t,3,Q(e,t+1,r),r)}function Cr(e,t,n,r){return ge(e,t,5,ee(e,t+1,r),r)}function Ir(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer string lengths not supported`);return ge(e,t,9,o,r)}const Nr=Ne;function se(e,t,n,r){return new h(a.array,r,n)}function Ur(e,t,n,r){return se(e,t,1,n)}function $r(e,t,n,r){return se(e,t,2,W(e,t+1,r))}function Or(e,t,n,r){return se(e,t,3,Q(e,t+1,r))}function Mr(e,t,n,r){return se(e,t,5,ee(e,t+1,r))}function zr(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer array lengths not supported`);return se(e,t,9,o)}function Dr(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${b} indefinite length items not allowed`);return se(e,t,1,1/0)}function rt(e,t){R(e,a.array.majorEncoded,t.value)}rt.compareTokens=ne.compareTokens;rt.encodedSize=function(t){return R.encodedSize(t.value)};function ae(e,t,n,r){return new h(a.map,r,n)}function Rr(e,t,n,r){return ae(e,t,1,n)}function Fr(e,t,n,r){return ae(e,t,2,W(e,t+1,r))}function Lr(e,t,n,r){return ae(e,t,3,Q(e,t+1,r))}function jr(e,t,n,r){return ae(e,t,5,ee(e,t+1,r))}function Vr(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${b} 64-bit integer map lengths not supported`);return ae(e,t,9,o)}function qr(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${b} indefinite length items not allowed`);return ae(e,t,1,1/0)}function ot(e,t){R(e,a.map.majorEncoded,t.value)}ot.compareTokens=ne.compareTokens;ot.encodedSize=function(t){return R.encodedSize(t.value)};function Pr(e,t,n,r){return new h(a.tag,n,1)}function Gr(e,t,n,r){return new h(a.tag,W(e,t+1,r),2)}function Hr(e,t,n,r){return new h(a.tag,Q(e,t+1,r),3)}function Xr(e,t,n,r){return new h(a.tag,ee(e,t+1,r),5)}function Zr(e,t,n,r){return new h(a.tag,te(e,t+1,r),9)}function it(e,t){R(e,a.tag.majorEncoded,t.value)}it.compareTokens=ne.compareTokens;it.encodedSize=function(t){return R.encodedSize(t.value)};const Kr=20,Yr=21,Jr=22,Wr=23;function Qr(e,t,n,r){if(r.allowUndefined===!1)throw new Error(`${b} undefined values are not supported`);return r.coerceUndefinedToNull===!0?new h(a.null,null,1):new h(a.undefined,void 0,1)}function eo(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${b} indefinite length items not allowed`);return new h(a.break,void 0,1)}function st(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${b} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${b} Infinity values are not supported`)}return new h(a.float,e,t)}function to(e,t,n,r){return st(ct(e,t+1),3,r)}function no(e,t,n,r){return st(ft(e,t+1),5,r)}function ro(e,t,n,r){return st(rn(e,t+1),9,r)}function at(e,t,n){const r=t.value;if(r===!1)e.push([a.float.majorEncoded|Kr]);else if(r===!0)e.push([a.float.majorEncoded|Yr]);else if(r===null)e.push([a.float.majorEncoded|Jr]);else if(r===void 0)e.push([a.float.majorEncoded|Wr]);else{let o,i=!1;(!n||n.float64!==!0)&&(tn(r),o=ct(F,1),r===o||Number.isNaN(r)?(F[0]=249,e.push(F.slice(0,3)),i=!0):(nn(r),o=ft(F,1),r===o&&(F[0]=250,e.push(F.slice(0,5)),i=!0))),i||(oo(r),o=rn(F,1),F[0]=251,e.push(F.slice(0,9)))}}at.encodedSize=function(t,n){const r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!n||n.float64!==!0){tn(r);let o=ct(F,1);if(r===o||Number.isNaN(r))return 3;if(nn(r),o=ft(F,1),r===o)return 5}return 9};const en=new ArrayBuffer(9),D=new DataView(en,1),F=new Uint8Array(en,0);function tn(e){if(e===1/0)D.setUint16(0,31744,!1);else if(e===-1/0)D.setUint16(0,64512,!1);else if(Number.isNaN(e))D.setUint16(0,32256,!1);else{D.setFloat32(0,e);const t=D.getUint32(0),n=(t&2139095040)>>23,r=t&8388607;if(n===255)D.setUint16(0,31744,!1);else if(n===0)D.setUint16(0,(e&2147483648)>>16|r>>13,!1);else{const o=n-127;o<-24?D.setUint16(0,0):o<-14?D.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):D.setUint16(0,(t&2147483648)>>16|o+15<<10|r>>13,!1)}}}function ct(e,t){if(e.length-t<2)throw new Error(`${b} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const r=n>>10&31,o=n&1023;let i;return r===0?i=o*2**-24:r!==31?i=(o+1024)*2**(r-25):i=o===0?1/0:NaN,n&32768?-i:i}function nn(e){D.setFloat32(0,e,!1)}function ft(e,t){if(e.length-t<4)throw new Error(`${b} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function oo(e){D.setFloat64(0,e,!1)}function rn(e,t){if(e.length-t<8)throw new Error(`${b} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}at.compareTokens=ne.compareTokens;function E(e,t,n){throw new Error(`${b} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Ue(e){return()=>{throw new Error(`${b} ${e}`)}}const f=[];for(let e=0;e<=23;e++)f[e]=E;f[24]=dr;f[25]=hr;f[26]=yr;f[27]=pr;f[28]=E;f[29]=E;f[30]=E;f[31]=E;for(let e=32;e<=55;e++)f[e]=E;f[56]=wr;f[57]=gr;f[58]=mr;f[59]=xr;f[60]=E;f[61]=E;f[62]=E;f[63]=E;for(let e=64;e<=87;e++)f[e]=br;f[88]=vr;f[89]=_r;f[90]=Er;f[91]=Ar;f[92]=E;f[93]=E;f[94]=E;f[95]=Ue("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)f[e]=Sr;f[120]=Br;f[121]=Tr;f[122]=Cr;f[123]=Ir;f[124]=E;f[125]=E;f[126]=E;f[127]=Ue("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)f[e]=Ur;f[152]=$r;f[153]=Or;f[154]=Mr;f[155]=zr;f[156]=E;f[157]=E;f[158]=E;f[159]=Dr;for(let e=160;e<=183;e++)f[e]=Rr;f[184]=Fr;f[185]=Lr;f[186]=jr;f[187]=Vr;f[188]=E;f[189]=E;f[190]=E;f[191]=qr;for(let e=192;e<=215;e++)f[e]=Pr;f[216]=Gr;f[217]=Hr;f[218]=Xr;f[219]=Zr;f[220]=E;f[221]=E;f[222]=E;f[223]=E;for(let e=224;e<=243;e++)f[e]=Ue("simple values are not supported");f[244]=E;f[245]=E;f[246]=E;f[247]=Qr;f[248]=Ue("simple values are not supported");f[249]=to;f[250]=no;f[251]=ro;f[252]=E;f[253]=E;f[254]=E;f[255]=eo;const V=[];for(let e=0;e<24;e++)V[e]=new h(a.uint,e,1);for(let e=-1;e>=-24;e--)V[31-e]=new h(a.negint,e,1);V[64]=new h(a.bytes,new Uint8Array(0),1);V[96]=new h(a.string,"",1);V[128]=new h(a.array,0,1);V[160]=new h(a.map,0,1);V[244]=new h(a.false,!1,1);V[245]=new h(a.true,!0,1);V[246]=new h(a.null,null,1);function io(e){switch(e.type){case a.false:return q([244]);case a.true:return q([245]);case a.null:return q([246]);case a.bytes:return e.value.length?void 0:q([64]);case a.string:return e.value===""?q([96]):void 0;case a.array:return e.value===0?q([128]):void 0;case a.map:return e.value===0?q([160]):void 0;case a.uint:return e.value<24?q([Number(e.value)]):void 0;case a.negint:if(e.value>=-24)return q([31-Number(e.value)])}}const so={float64:!1,mapSorter:fo,quickEncodeToken:io};function ao(){const e=[];return e[a.uint.major]=ne,e[a.negint.major]=nt,e[a.bytes.major]=Ne,e[a.string.major]=Nr,e[a.array.major]=rt,e[a.map.major]=ot,e[a.tag.major]=it,e[a.float.major]=at,e}const on=ao(),Le=new Jt;class Se{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${Wt} object contains circular references`);return new Se(n,t)}}const H={null:new h(a.null,null),undefined:new h(a.undefined,void 0),true:new h(a.true,!0),false:new h(a.false,!1),emptyArray:new h(a.array,0),emptyMap:new h(a.map,0)},K={number(e,t,n,r){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new h(a.float,e):e>=0?new h(a.uint,e):new h(a.negint,e)},bigint(e,t,n,r){return e>=BigInt(0)?new h(a.uint,e):new h(a.negint,e)},Uint8Array(e,t,n,r){return new h(a.bytes,e)},string(e,t,n,r){return new h(a.string,e)},boolean(e,t,n,r){return e?H.true:H.false},null(e,t,n,r){return H.null},undefined(e,t,n,r){return H.undefined},ArrayBuffer(e,t,n,r){return new h(a.bytes,new Uint8Array(e))},DataView(e,t,n,r){return new h(a.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,r){if(!e.length)return n.addBreakTokens===!0?[H.emptyArray,new h(a.break)]:H.emptyArray;r=Se.createCheck(r,e);const o=[];let i=0;for(const s of e)o[i++]=be(s,n,r);return n.addBreakTokens?[new h(a.array,e.length),o,new h(a.break)]:[new h(a.array,e.length),o]},Object(e,t,n,r){const o=t!=="Object",i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return n.addBreakTokens===!0?[H.emptyMap,new h(a.break)]:H.emptyMap;r=Se.createCheck(r,e);const c=[];let u=0;for(const w of i)c[u++]=[be(w,n,r),be(o?e.get(w):e[w],n,r)];return co(c,n),n.addBreakTokens?[new h(a.map,s),c,new h(a.break)]:[new h(a.map,s),c]}};K.Map=K.Object;K.Buffer=K.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))K[`${e}Array`]=K.DataView;function be(e,t={},n){const r=er(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||K[r];if(typeof o=="function"){const s=o(e,r,t,n);if(s!=null)return s}const i=K[r];if(!i)throw new Error(`${Wt} unsupported type: ${r}`);return i(e,r,t,n)}function co(e,t){t.mapSorter&&e.sort(t.mapSorter)}function fo(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,i=on[o].compareTokens(n,r);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function sn(e,t,n,r){if(Array.isArray(t))for(const o of t)sn(e,o,n,r);else n[t.type.major](e,t,r)}function uo(e,t,n){const r=be(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const o=n.quickEncodeToken(r);if(o)return o;const i=t[r.type.major];if(i.encodedSize){const s=i.encodedSize(r,n),c=new Jt(s);if(i(c,r,n),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return Yt(c.chunks[0])}}return Le.reset(),sn(Le,r,t,n),Le.toBytes(!0)}function lo(e,t){return t=Object.assign({},so,t),uo(e,on,t)}const ho={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class yo{constructor(t,n={}){this._pos=0,this.data=t,this.options=n}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let n=V[t];if(n===void 0){const r=f[t];if(!r)throw new Error(`${b} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const o=t&31;n=r(this.data,this._pos,o,this.options)}return this._pos+=n.encodedLength,n}}const de=Symbol.for("DONE"),$e=Symbol.for("BREAK");function po(e,t,n){const r=[];for(let o=0;o<e.value;o++){const i=he(t,n);if(i===$e){if(e.value===1/0)break;throw new Error(`${b} got unexpected break to lengthed array`)}if(i===de)throw new Error(`${b} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=i}return r}function wo(e,t,n){const r=n.useMaps===!0,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<e.value;s++){const c=he(t,n);if(c===$e){if(e.value===1/0)break;throw new Error(`${b} got unexpected break to lengthed map`)}if(c===de)throw new Error(`${b} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(r!==!0&&typeof c!="string")throw new Error(`${b} non-string keys not supported (got ${typeof c})`);if(n.rejectDuplicateMapKeys===!0&&(r&&i.has(c)||!r&&c in o))throw new Error(`${b} found repeat map key "${c}"`);const u=he(t,n);if(u===de)throw new Error(`${b} found map but not enough entries (got ${s} [no value], expected ${e.value})`);r?i.set(c,u):o[c]=u}return r?i:o}function he(e,t){if(e.done())return de;const n=e.next();if(n.type===a.break)return $e;if(n.type.terminal)return n.value;if(n.type===a.array)return po(n,e,t);if(n.type===a.map)return wo(n,e,t);if(n.type===a.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const r=he(e,t);return t.tags[n.value](r)}throw new Error(`${b} tag not supported (${n.value})`)}throw new Error("unsupported")}function go(e,t){if(!(e instanceof Uint8Array))throw new Error(`${b} data to decode must be a Uint8Array`);t=Object.assign({},ho,t);const n=t.tokenizer||new yo(e,t),r=he(n,t);if(r===de)throw new Error(`${b} did not find any content to decode`);if(r===$e)throw new Error(`${b} got unexpected break`);return[r,e.subarray(n.pos())]}function mo(e,t){const[n,r]=go(e,t);if(r.length>0)throw new Error(`${b} too many terminals, data makes no sense`);return n}function xo(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function ut(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function bo(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=o}var c=e.length,u=e.charAt(0),w=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function m(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var A=0,S=0,k=0,C=d.length;k!==C&&d[k]===0;)k++,A++;for(var B=(C-k)*l+1>>>0,g=new Uint8Array(B);k!==C;){for(var x=d[k],z=0,I=B-1;(x!==0||z<S)&&I!==-1;I--,z++)x+=256*g[I]>>>0,g[I]=x%c>>>0,x=x/c>>>0;if(x!==0)throw new Error("Non-zero carry");S=z,k++}for(var N=B-S;N!==B&&g[N]===0;)N++;for(var Y=u.repeat(A);N<B;++N)Y+=e.charAt(g[N]);return Y}function y(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var A=0;if(d[A]!==" "){for(var S=0,k=0;d[A]===u;)S++,A++;for(var C=(d.length-A)*w+1>>>0,B=new Uint8Array(C);d[A];){var g=n[d.charCodeAt(A)];if(g===255)return;for(var x=0,z=C-1;(g!==0||x<k)&&z!==-1;z--,x++)g+=c*B[z]>>>0,B[z]=g%256>>>0,g=g/256>>>0;if(g!==0)throw new Error("Non-zero carry");k=x,A++}if(d[A]!==" "){for(var I=C-k;I!==C&&B[I]===0;)I++;for(var N=new Uint8Array(S+(C-I)),Y=S;I!==C;)N[Y++]=B[I++];return N}}}function v(d){var A=y(d);if(A)return A;throw new Error(`Non-${t} character`)}return{encode:m,decodeUnsafe:y,decode:v}}var vo=bo,_o=vo;class Eo{constructor(t,n,r){_(this,"name");_(this,"prefix");_(this,"baseEncode");this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Ao{constructor(t,n,r){_(this,"name");_(this,"prefix");_(this,"baseDecode");_(this,"prefixCodePoint");this.name=t,this.prefix=n;const o=n.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return an(this,t)}}class ko{constructor(t){_(this,"decoders");this.decoders=t}or(t){return an(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r!=null)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function an(e,t){return new ko({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class So{constructor(t,n,r,o){_(this,"name");_(this,"prefix");_(this,"baseEncode");_(this,"baseDecode");_(this,"encoder");_(this,"decoder");this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new Eo(t,n,r),this.decoder=new Ao(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function cn({name:e,prefix:t,encode:n,decode:r}){return new So(e,t,n,r)}function Oe({name:e,prefix:t,alphabet:n}){const{encode:r,decode:o}=_o(n,e);return cn({prefix:t,name:e,encode:r,decode:i=>ut(o(i))})}function Bo(e,t,n,r){const o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let c=0,u=0,w=0;for(let l=0;l<i;++l){const m=o[e[l]];if(m===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|m,c+=n,c>=8&&(c-=8,s[w++]=255&u>>c)}if(c>=n||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s}function To(e,t,n){const r=t[t.length-1]==="=",o=(1<<n)-1;let i="",s=0,c=0;for(let u=0;u<e.length;++u)for(c=c<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&c>>s];if(s!==0&&(i+=t[o&c<<n-s]),r)for(;i.length*n&7;)i+="=";return i}function G({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return cn({prefix:t,name:e,encode(o){return To(o,r,n)},decode(o){return Bo(o,r,n,e)}})}const ve=G({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});G({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});G({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});G({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});G({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});G({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});G({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});G({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});G({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const je=Oe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});Oe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const Z=Oe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Oe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Co=fn,Ut=128,Io=-128,No=Math.pow(2,31);function fn(e,t,n){t=t||[],n=n||0;for(var r=n;e>=No;)t[n++]=e&255|Ut,e/=128;for(;e&Io;)t[n++]=e&255|Ut,e>>>=7;return t[n]=e|0,fn.bytes=n-r+1,t}var Uo=qe,$o=128,$t=127;function qe(e,r){var n=0,r=r||0,o=0,i=r,s,c=e.length;do{if(i>=c)throw qe.bytes=0,new RangeError("Could not decode varint");s=e[i++],n+=o<28?(s&$t)<<o:(s&$t)*Math.pow(2,o),o+=7}while(s>=$o);return qe.bytes=i-r,n}var Oo=Math.pow(2,7),Mo=Math.pow(2,14),zo=Math.pow(2,21),Do=Math.pow(2,28),Ro=Math.pow(2,35),Fo=Math.pow(2,42),Lo=Math.pow(2,49),jo=Math.pow(2,56),Vo=Math.pow(2,63),qo=function(e){return e<Oo?1:e<Mo?2:e<zo?3:e<Do?4:e<Ro?5:e<Fo?6:e<Lo?7:e<jo?8:e<Vo?9:10},Po={encode:Co,decode:Uo,encodingLength:qo},Be=Po;function Pe(e,t=0){return[Be.decode(e,t),Be.decode.bytes]}function Te(e,t,n=0){return Be.encode(e,t,n),t}function Ce(e){return Be.encodingLength(e)}function Ge(e,t){const n=t.byteLength,r=Ce(e),o=r+Ce(n),i=new Uint8Array(o+n);return Te(e,i,0),Te(n,i,r),i.set(t,o),new lt(e,n,t,i)}function Go(e){const t=ut(e),[n,r]=Pe(t),[o,i]=Pe(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new lt(n,o,s,t)}function Ho(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&xo(e.bytes,n.bytes)}}class lt{constructor(t,n,r,o){_(this,"code");_(this,"size");_(this,"digest");_(this,"bytes");this.code=t,this.size=n,this.digest=r,this.bytes=o}}function Ot(e,t){const{bytes:n,version:r}=e;switch(r){case 0:return Zo(n,He(e),t??Z.encoder);default:return Ko(n,He(e),t??ve.encoder)}}const Mt=new WeakMap;function He(e){const t=Mt.get(e);if(t==null){const n=new Map;return Mt.set(e,n),n}return t}var Pt;class T{constructor(t,n,r,o){_(this,"code");_(this,"version");_(this,"multihash");_(this,"bytes");_(this,"/");_(this,Pt,"CID");this.code=n,this.version=t,this.multihash=r,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:n}=this;if(t!==ue)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==Yo)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return T.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=Ge(t,n);return T.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return T.equals(this,t)}static equals(t,n){const r=n;return r!=null&&t.code===r.code&&t.version===r.version&&Ho(t.multihash,r.multihash)}toString(t){return Ot(this,t)}toJSON(){return{"/":Ot(this)}}link(){return this}[(Pt=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const n=t;if(n instanceof T)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:r,code:o,multihash:i,bytes:s}=n;return new T(r,o,i,s??zt(r,o,i.bytes))}else if(n[Jo]===!0){const{version:r,multihash:o,code:i}=n,s=Go(o);return T.create(r,i,s)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(n!==ue)throw new Error(`Version 0 CID must use dag-pb (code: ${ue}) block encoding`);return new T(t,n,r,r.bytes)}case 1:{const o=zt(t,n,r.bytes);return new T(t,n,r,o)}default:throw new Error("Invalid version")}}static createV0(t){return T.create(0,ue,t)}static createV1(t,n){return T.create(1,t,n)}static decode(t){const[n,r]=T.decodeFirst(t);if(r.length!==0)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=T.inspectBytes(t),r=n.size-n.multihashSize,o=ut(t.subarray(r,r+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const i=o.subarray(n.multihashSize-n.digestSize),s=new lt(n.multihashCode,n.digestSize,i,o);return[n.version===0?T.createV0(s):T.createV1(n.codec,s),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[m,y]=Pe(t.subarray(n));return n+=y,m};let o=r(),i=ue;if(o===18?(o=0,n=0):i=r(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const s=n,c=r(),u=r(),w=n+u,l=w-s;return{version:o,codec:i,multihashCode:c,digestSize:u,multihashSize:l,size:w}}static parse(t,n){const[r,o]=Xo(t,n),i=T.decode(o);if(i.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return He(i).set(r,t),i}}function Xo(e,t){switch(e[0]){case"Q":{const n=t??Z;return[Z.prefix,n.decode(`${Z.prefix}${e}`)]}case Z.prefix:{const n=t??Z;return[Z.prefix,n.decode(e)]}case ve.prefix:{const n=t??ve;return[ve.prefix,n.decode(e)]}case je.prefix:{const n=t??je;return[je.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function Zo(e,t,n){const{prefix:r}=n;if(r!==Z.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(o==null){const i=n.encode(e).slice(1);return t.set(r,i),i}else return o}function Ko(e,t,n){const{prefix:r}=n,o=t.get(r);if(o==null){const i=n.encode(e);return t.set(r,i),i}else return o}const ue=112,Yo=18;function zt(e,t,n){const r=Ce(e),o=r+Ce(t),i=new Uint8Array(o+n.byteLength);return Te(e,i,0),Te(t,i,r),i.set(n,o),i}const Jo=Symbol.for("@ipld/js-cid/CID"),un=42;function ln(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function Wo(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=T.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new h(a.tag,un),new h(a.bytes,n)]}function Qo(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function ei(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Xe={float64:!0,typeEncoders:{Object:Wo,undefined:Qo,number:ei}},ti={...Xe,typeEncoders:{...Xe.typeEncoders}};function ni(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return T.decode(e.subarray(1))}const Ie={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ie.tags[un]=ni;const ri={...Ie,tags:Ie.tags.slice()},oi="dag-cbor",ii=113,si=e=>lo(e,Xe),ai=e=>mo(ln(e),Ie),dn=Object.freeze(Object.defineProperty({__proto__:null,code:ii,decode:ai,decodeOptions:ri,encode:si,encodeOptions:ti,name:oi,toByteView:ln},Symbol.toStringTag,{value:"Module"})),ci=[{name:"D. Guttenfelder",url:"https://stanford.aa.dev.starlinglab.org"},{name:"K. Pollack",url:"https://kira.aa.prod.starlinglab.org"},{name:"C. Morris",url:"https://chris.aa.prod.starlinglab.org"}],fi=()=>{if(typeof localStorage<"u"){const e=localStorage.getItem("aa-explorer-endpoints");if(e)try{const t=JSON.parse(e);if(t&&t.length>0)return t}catch(t){console.error("Failed to parse stored endpoints:",t)}}return[...ci]},ui=Qe(fi()),ji=Qe(null);ui.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("aa-explorer-endpoints",JSON.stringify(e))});const li={show:!1,kind:"hash",data:null,selectedCID:null},hn=Qe(li);function Vi(e,t,n){hn.set({show:!0,kind:e,data:t,selectedCID:n})}function qi(){hn.update(e=>({...e,show:!1}))}function di({name:e,code:t,encode:n}){return new hi(e,t,n)}class hi{constructor(t,n,r){_(this,"name");_(this,"code");_(this,"encode");this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Ge(this.code,n):n.then(r=>Ge(this.code,r))}else throw Error("Unknown type, must be binary type")}}function me({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*yi(e,t){if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n],i=T.asCID(r);i!=null?yield[o.join("/"),i]:typeof r=="object"&&(yield*Ze(r,o))}else{const n=T.asCID(t);n!=null?yield[e.join("/"),n]:yield*Ze(t,e)}}function*Ze(e,t){if(e==null||e instanceof Uint8Array)return;const n=T.asCID(e);n!=null&&(yield[t.join("/"),n]);for(const[r,o]of Object.entries(e)){const i=[...t,r];yield*yi(i,o)}}function*pi(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n];yield o.join("/"),typeof r=="object"&&T.asCID(r)==null&&(yield*Ke(r,o))}else yield*Ke(t,e)}function*Ke(e,t){if(!(e==null||typeof e!="object"))for(const[n,r]of Object.entries(e)){const o=[...t,n];yield o.join("/"),r!=null&&!(r instanceof Uint8Array)&&typeof r=="object"&&T.asCID(r)==null&&(yield*pi(o,r))}}function wi(e,t){let n=e;for(const[r,o]of t.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${t.slice(0,r+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);const i=T.asCID(n);if(i!=null)return{value:i,remaining:t.slice(r+1).join("/")}}return{value:n}}class gi{constructor({cid:t,bytes:n,value:r}){_(this,"cid");_(this,"bytes");_(this,"value");_(this,"asBlock");if(t==null||n==null||typeof r>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=n,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:me(),bytes:me(),value:me(),asBlock:me()})}links(){return Ze(this.value,[])}tree(){return Ke(this.value,[])}get(t="/"){return wi(this.value,t.split("/").filter(Boolean))}}async function yn({value:e,codec:t,hasher:n}){if(typeof e>"u")throw new Error('Missing required argument "value"');if(t==null||n==null)throw new Error("Missing required argument: codec or hasher");const r=t.encode(e),o=await n.digest(r),i=T.create(1,t.code,o);return new gi({value:e,bytes:r,cid:i})}function mi(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const pn=di({name:"sha2-256",code:18,encode:mi("SHA-256")});/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const $=2n**255n-19n,_e=2n**252n+27742317777372353535851937790883648493n,Dt=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Rt=0x6666666666666666666666666666666666666666666666666666666666666658n,xi=37095705934669439343138083508754565189542113879843219016388785533085940283555n,xe={a:-1n,d:xi,h:8},O=(e="")=>{throw new Error(e)},wn=e=>typeof e=="string",bi=e=>e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array",ye=(e,t)=>!bi(e)||typeof t=="number"&&t>0&&e.length!==t?O("Uint8Array of valid length expected"):e,re=e=>new Uint8Array(e),Ee=(e,t)=>ye(wn(e)?ht(e):re(ye(e)),t),p=(e,t=$)=>{let n=e%t;return n>=0n?n:t+n},Ft=e=>e instanceof M?e:O("Point expected");class M{constructor(t,n,r,o){this.ex=t,this.ey=n,this.ez=r,this.et=o}static fromAffine(t){return new M(t.x,t.y,1n,p(t.x*t.y))}static fromHex(t,n=!1){const{d:r}=xe;t=Ee(t,32);const o=t.slice(),i=t[31];o[31]=i&-129;const s=yt(o);n&&!(0n<=s&&s<2n**256n)&&O("bad y coord 1"),!n&&!(0n<=s&&s<$)&&O("bad y coord 2");const c=p(s*s),u=p(c-1n),w=p(r*c+1n);let{isValid:l,value:m}=Ei(u,w);l||O("bad y coordinate 3");const y=(m&1n)===1n,v=(i&128)!==0;return!n&&m===0n&&v&&O("bad y coord 3"),v!==y&&(m=p(-m)),new M(m,s,1n,p(m*s))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){const{ex:n,ey:r,ez:o}=this,{ex:i,ey:s,ez:c}=Ft(t),u=p(n*c),w=p(i*o),l=p(r*c),m=p(s*o);return u===w&&l===m}is0(){return this.equals(le)}negate(){return new M(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{ex:t,ey:n,ez:r}=this,{a:o}=xe,i=p(t*t),s=p(n*n),c=p(2n*p(r*r)),u=p(o*i),w=t+n,l=p(p(w*w)-i-s),m=u+s,y=m-c,v=u-s,d=p(l*y),A=p(m*v),S=p(l*v),k=p(y*m);return new M(d,A,k,S)}add(t){const{ex:n,ey:r,ez:o,et:i}=this,{ex:s,ey:c,ez:u,et:w}=Ft(t),{a:l,d:m}=xe,y=p(n*s),v=p(r*c),d=p(i*m*w),A=p(o*u),S=p((n+r)*(s+c)-y-v),k=p(A-d),C=p(A+d),B=p(v-l*y),g=p(S*k),x=p(C*B),z=p(S*B),I=p(k*C);return new M(g,x,I,z)}mul(t,n=!0){if(t===0n)return n===!0?O("cannot multiply by 0"):le;if(typeof t=="bigint"&&0n<t&&t<_e||O("invalid scalar, must be < L"),!n&&this.is0()||t===1n)return this;if(this.equals(pe))return Ii(t).p;let r=le,o=pe;for(let i=this;t>0n;i=i.double(),t>>=1n)t&1n?r=r.add(i):n&&(o=o.add(i));return r}multiply(t){return this.mul(t)}clearCofactor(){return this.mul(BigInt(xe.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let t=this.mul(_e/2n,!1).double();return _e%2n&&(t=t.add(this)),t.is0()}toAffine(){const{ex:t,ey:n,ez:r}=this;if(this.equals(le))return{x:0n,y:1n};const o=mn(r,$);return p(r*o)!==1n&&O("invalid inverse"),{x:p(t*o),y:p(n*o)}}toRawBytes(){const{x:t,y:n}=this.toAffine(),r=vi(n);return r[31]|=t&1n?128:0,r}toHex(){return dt(this.toRawBytes())}}M.BASE=new M(Dt,Rt,1n,p(Dt*Rt));M.ZERO=new M(0n,1n,1n,0n);const{BASE:pe,ZERO:le}=M,gn=(e,t)=>e.toString(16).padStart(t,"0"),dt=e=>Array.from(ye(e)).map(t=>gn(t,2)).join(""),P={_0:48,_9:57,A:65,F:70,a:97,f:102},Lt=e=>{if(e>=P._0&&e<=P._9)return e-P._0;if(e>=P.A&&e<=P.F)return e-(P.A-10);if(e>=P.a&&e<=P.f)return e-(P.a-10)},ht=e=>{const t="hex invalid";if(!wn(e))return O(t);const n=e.length,r=n/2;if(n%2)return O(t);const o=re(r);for(let i=0,s=0;i<r;i++,s+=2){const c=Lt(e.charCodeAt(s)),u=Lt(e.charCodeAt(s+1));if(c===void 0||u===void 0)return O(t);o[i]=c*16+u}return o},vi=e=>ht(gn(e,32*2)).reverse(),yt=e=>BigInt("0x"+dt(re(ye(e)).reverse())),Ye=(...e)=>{const t=re(e.reduce((r,o)=>r+ye(o).length,0));let n=0;return e.forEach(r=>{t.set(r,n),n+=r.length}),t},mn=(e,t)=>{(e===0n||t<=0n)&&O("no inverse n="+e+" mod="+t);let n=p(e,t),r=t,o=0n,i=1n;for(;n!==0n;){const s=r/n,c=r%n,u=o-i*s;r=n,n=c,o=i,i=u}return r===1n?p(o,t):O("no inverse")},j=(e,t)=>{let n=e;for(;t-- >0n;)n*=n,n%=$;return n},_i=e=>{const n=e*e%$*e%$,r=j(n,2n)*n%$,o=j(r,1n)*e%$,i=j(o,5n)*o%$,s=j(i,10n)*i%$,c=j(s,20n)*s%$,u=j(c,40n)*c%$,w=j(u,80n)*u%$,l=j(w,80n)*u%$,m=j(l,10n)*i%$;return{pow_p_5_8:j(m,2n)*e%$,b2:n}},jt=19681161376707505956807079304988542015446066515923890162744021073123829784752n,Ei=(e,t)=>{const n=p(t*t*t),r=p(n*n*t),o=_i(e*r).pow_p_5_8;let i=p(e*n*o);const s=p(t*i*i),c=i,u=p(i*jt),w=s===e,l=s===p(-e),m=s===p(-e*jt);return w&&(i=c),(l||m)&&(i=u),(p(i)&1n)===1n&&(i=p(-i)),{isValid:w||l,value:i}},Ai=e=>p(yt(e),_e);let Ve;const ki=(...e)=>bn.sha512Async(...e);function Si(e,t){return ki(t.hashable).then(t.finish)}const xn={zip215:!0},Bi=(e,t,n,r=xn)=>{e=Ee(e,64),t=Ee(t),n=Ee(n,32);const{zip215:o}=r;let i,s,c,u,w=new Uint8Array;try{i=M.fromHex(n,o),s=M.fromHex(e.slice(0,32),o),c=yt(e.slice(32,64)),u=pe.mul(c,!1),w=Ye(s.toRawBytes(),i.toRawBytes(),t)}catch{}return{hashable:w,finish:m=>{if(u==null||!o&&i.isSmallOrder())return!1;const y=Ai(m);return s.add(i.mul(y,!1)).add(u.negate()).clearCofactor().is0()}}},Ti=async(e,t,n,r=xn)=>Si(!0,Bi(e,t,n,r)),Vt=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,bn={bytesToHex:dt,hexToBytes:ht,concatBytes:Ye,mod:p,invert:mn,randomBytes:(e=32)=>{const t=Vt();return(!t||!t.getRandomValues)&&O("crypto.getRandomValues must be defined"),t.getRandomValues(re(e))},sha512Async:async(...e)=>{const t=Vt(),n=t&&t.subtle;n||O("etc.sha512Async or crypto.subtle must be defined");const r=Ye(...e);return re(await n.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(bn,{sha512Sync:{configurable:!1,get(){return Ve},set(e){Ve||(Ve=e)}}});const J=8,Ci=()=>{const e=[],t=256/J+1;let n=pe,r=n;for(let o=0;o<t;o++){r=n,e.push(r);for(let i=1;i<2**(J-1);i++)r=r.add(n),e.push(r);n=r.double()}return e};let qt;const Ii=e=>{const t=qt||(qt=Ci()),n=(l,m)=>{let y=m.negate();return l?y:m};let r=le,o=pe;const i=1+256/J,s=2**(J-1),c=BigInt(2**J-1),u=2**J,w=BigInt(J);for(let l=0;l<i;l++){const m=l*s;let y=Number(e&c);e>>=w,y>s&&(y-=u,e+=1n);const v=m,d=m+Math.abs(y)-1,A=l%2!==0,S=y<0;y===0?o=o.add(n(A,t[v])):r=r.add(n(S,t[d]))}return{p:r,f:o}},Ni=[];async function Pi(e,t,n){switch(e){case"hash":return{status:t.value.attestation.CID.toString()===n?"verified":"unverified"};case"signature":return t.value.signature?{status:await Ui(t.value)?"verified":"present"}:{status:"unverified"};case"timestamp":if(t.value.timestamp&&t.value.timestamp.ots)try{return{status:await $i(t.value)?"verified":"present"}}catch(r){return console.log("Error verifying timestamp:",r),{status:"present"}}return{status:"unverified"};default:return console.log("Unknown kind:",e),{status:"unverified"}}}const Ui=async e=>!Ni.includes(e.signature.pubKey)||!(await yn({value:e.attestation,codec:dn,hasher:pn})).cid.equals(e.signature.msg)?!1:await Ti(e.signature.sig,e.signature.msg.bytes,e.signature.pubKey),$i=async e=>{const t=window.OpenTimestamps;if(!(await yn({value:{signature:e.signature,attestation:e.attestation},codec:dn,hasher:pn})).cid.equals(e.timestamp.ots.msg))return!1;const r=new TextEncoder().encode(e.timestamp.ots.msg.toString()),o=e.timestamp.ots.proof,i=t.DetachedTimestampFile.fromBytes(new t.Ops.OpSHA256,r),s=t.DetachedTimestampFile.deserialize(o);let c;try{c=t.verify(s,i,{ignoreBitcoinNode:!0})}catch(u){return console.log("timestamp verification error:",u),!1}return c!=null};export{Di as a,hn as b,Li as c,ji as d,ui as e,Bt as f,ai as g,qi as h,zi as i,Vi as j,Ri as r,Fi as s,Pi as v};
