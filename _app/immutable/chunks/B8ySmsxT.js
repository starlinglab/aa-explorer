var kn=Object.defineProperty;var Sn=(e,t,n)=>t in e?kn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t,n)=>Sn(e,typeof t!="symbol"?t+"":t,n);import{a6 as Gt,G as Re,C as R,ae as Bn,af as Tn,D as Cn,B as In,g as vt,X as Nn,H as Un,F as _t,I as de,M as fe,am as $n,J as Ht,K as Xt,L as On,aq as Zt,A as Mn,Q as zn,n as Et,az as Fe,x as At,aA as We,aB as kt,aC as Dn,ap as Rn,aD as Fn,as as jn,aE as Qe,aF as Vn,ak as Ln,aG as Kt,aH as qn,z as Pn,aI as Gn,aJ as Hn,aK as Xn,aL as et}from"./gyiEl3Uc.js";import{i as Zn,d as Kn,f as Yn,g as Jn,j as Wn}from"./nuOQF-VX.js";function Qn(e,t){if(t){const n=document.body;e.autofocus=!0,Gt(()=>{document.activeElement===n&&e.focus()})}}let St=!1;function er(){St||(St=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Xi(e,t){return t}function tr(e,t,n,r){for(var o=[],i=t.length,s=0;s<i;s++)Dn(t[s].e,o,!0);var c=i>0&&o.length===0&&n!==null;if(c){var u=n.parentNode;Rn(u),u.append(n),r.clear(),X(e,t[0].prev,t[i-1].next)}Fn(o,()=>{for(var w=0;w<i;w++){var l=t[w];c||(r.delete(l.k),X(e,l.prev,l.next)),jn(l.e,!c)}})}function Zi(e,t,n,r,o,i=null){var s=e,c={items:new Map,first:null},u=(t&Kt)!==0;if(u){var w=e;s=R?Re(Bn(w)):w.appendChild(Tn())}R&&Cn();var l=null,v=!1,p=Nn(()=>{var E=n();return Mn(E)?E:E==null?[]:Zt(E)});In(()=>{var E=vt(p),d=E.length;if(v&&d===0)return;v=d===0;let k=!1;if(R){var _=s.data===Un;_!==(d===0)&&(s=_t(),Re(s),de(!1),k=!0)}if(R){for(var T=null,b,m=0;m<d;m++){if(fe.nodeType===8&&fe.data===$n){s=fe,k=!0,de(!1);break}var y=E[m],x=r(y,m);b=Yt(fe,c,T,null,y,x,m,o,t,n),c.items.set(x,b),T=b}d>0&&Re(_t())}R||nr(E,c,s,o,t,r,n),i!==null&&(d===0?l?Ht(l):l=Xt(()=>i(s)):l!==null&&On(l,()=>{l=null})),k&&de(!0),vt(p)}),R&&(s=fe)}function nr(e,t,n,r,o,i,s){var gt,wt,mt,xt;var c=(o&qn)!==0,u=(o&(Qe|We))!==0,w=e.length,l=t.items,v=t.first,p=v,E,d=null,k,_=[],T=[],b,m,y,x;if(c)for(x=0;x<w;x+=1)b=e[x],m=i(b,x),y=l.get(m),y!==void 0&&((gt=y.a)==null||gt.measure(),(k??(k=new Set)).add(y));for(x=0;x<w;x+=1){if(b=e[x],m=i(b,x),y=l.get(m),y===void 0){var I=p?p.e.nodes_start:n;d=Yt(I,t,d,d===null?t.first:d.next,b,m,x,r,o,s),l.set(m,d),_=[],T=[],p=d.next;continue}if(u&&rr(y,b,x,o),y.e.f&Fe&&(Ht(y.e),c&&((wt=y.a)==null||wt.unfix(),(k??(k=new Set)).delete(y))),y!==p){if(E!==void 0&&E.has(y)){if(_.length<T.length){var N=T[0],U;d=N.prev;var Y=_[0],ze=_[_.length-1];for(U=0;U<_.length;U+=1)Bt(_[U],N,n);for(U=0;U<T.length;U+=1)E.delete(T[U]);X(t,Y.prev,ze.next),X(t,d,Y),X(t,ze,N),p=N,d=ze,x-=1,_=[],T=[]}else E.delete(y),Bt(y,p,n),X(t,y.prev,y.next),X(t,y,d===null?t.first:d.next),X(t,d,y),d=y;continue}for(_=[],T=[];p!==null&&p.k!==m;)p.e.f&Fe||(E??(E=new Set)).add(p),T.push(p),p=p.next;if(p===null)continue;y=p}_.push(y),d=y,p=y.next}if(p!==null||E!==void 0){for(var ce=E===void 0?[]:Zt(E);p!==null;)p.e.f&Fe||ce.push(p),p=p.next;var De=ce.length;if(De>0){var An=o&Kt&&w===0?n:null;if(c){for(x=0;x<De;x+=1)(mt=ce[x].a)==null||mt.measure();for(x=0;x<De;x+=1)(xt=ce[x].a)==null||xt.fix()}tr(t,ce,An,l)}}c&&Gt(()=>{var bt;if(k!==void 0)for(y of k)(bt=y.a)==null||bt.apply()}),At.first=t.first&&t.first.e,At.last=d&&d.e}function rr(e,t,n,r){r&Qe&&kt(e.v,t),r&We?kt(e.i,n):e.i=n}function Yt(e,t,n,r,o,i,s,c,u,w){var l=(u&Qe)!==0,v=(u&Vn)===0,p=l?v?zn(o):Et(o):o,E=u&We?Et(s):s,d={i:E,v:p,k:i,a:null,e:null,prev:n,next:r};try{return d.e=Xt(()=>c(e,p,E,w),R),d.e.prev=n&&n.e,d.e.next=r&&r.e,n===null?t.first=d:(n.next=d,n.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function Bt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,i=e.e.nodes_start;i!==r;){var s=Ln(i);o.before(i),i=s}}function X(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Jt(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Jt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function or(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Jt(e))&&(r&&(r+=" "),r+=t);return r}function ir(e){return typeof e=="object"?or(e):e??""}function Ki(e){if(R){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;qe(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;qe(e,"checked",null),e.checked=o}}};e.__on_r=n,Xn(n),er()}}function Yi(e,t){var n=e.__attributes??(e.__attributes={});n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function sr(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function qe(e,t,n,r){var o=e.__attributes??(e.__attributes={});R&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[Gn]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Wt(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Ji(e,t,n,r,o=!1,i=!1,s=!1){let c=R&&i;c&&de(!1);var u=t||{},w=e.tagName==="OPTION";for(var l in t)l in n||(n[l]=null);n.class&&(n.class=ir(n.class));var v=Wt(e),p=e.__attributes??(e.__attributes={});for(const b in n){let m=n[b];if(w&&b==="value"&&m==null){e.value=e.__value="",u[b]=m;continue}var E=u[b];if(m!==E){u[b]=m;var d=b[0]+b[1];if(d!=="$$"){if(d==="on"){const y={},x="$$"+b;let I=b.slice(2);var k=Wn(I);if(Zn(I)&&(I=I.slice(0,-7),y.capture=!0),!k&&E){if(m!=null)continue;e.removeEventListener(I,u[x],y),u[x]=null}if(m!=null)if(k)e[`__${I}`]=m,Yn([I]);else{let N=function(U){u[b].call(this,U)};u[x]=Kn(I,e,N,y)}else k&&(e[`__${I}`]=void 0)}else if(b==="style"&&m!=null)e.style.cssText=m+"";else if(b==="autofocus")Qn(e,!!m);else if(!i&&(b==="__value"||b==="value"&&m!=null))e.value=e.__value=m;else if(b==="selected"&&w)sr(e,m);else{var _=b;o||(_=Jn(_));var T=_==="defaultValue"||_==="defaultChecked";if(m==null&&!i&&!T)if(p[b]=null,_==="value"||_==="checked"){let y=e;if(_==="value"){let x=y.defaultValue;y.removeAttribute(_),y.defaultValue=x}else{let x=y.defaultChecked;y.removeAttribute(_),y.defaultChecked=x}}else e.removeAttribute(b);else T||v.includes(_)&&(i||typeof m!="string")?e[_]=m:typeof m!="function"&&qe(e,_,m)}b==="style"&&"__styles"in e&&(e.__styles={})}}}return c&&de(!0),u}var Tt=new Map;function Wt(e){var t=Tt.get(e.nodeName);if(t)return t;Tt.set(e.nodeName,t=[]);for(var n,r=e,o=Element.prototype;o!==r;){n=Hn(r);for(var i in n)n[i].set&&t.push(i);r=Pn(r)}return t}function Wi(e,t,n){var r=e.__className,o=ar(t);R&&e.className===o?e.__className=o:(r!==o||R&&e.className!==o)&&(t==null?e.removeAttribute("class"):e.className=o,e.__className=o)}function ar(e,t){return(e??"")+""}const cr=["string","number","bigint","symbol"],fr=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ur(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(cr.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(lr(e))return"Buffer";const n=dr(e);return n||"Object"}function lr(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function dr(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(fr.includes(t))return t}class a{constructor(t,n,r){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}a.uint=new a(0,"uint",!0);a.negint=new a(1,"negint",!0);a.bytes=new a(2,"bytes",!0);a.string=new a(3,"string",!0);a.array=new a(4,"array",!1);a.map=new a(5,"map",!1);a.tag=new a(6,"tag",!1);a.float=new a(7,"float",!0);a.false=new a(7,"false",!0);a.true=new a(7,"true",!0);a.null=new a(7,"null",!0);a.undefined=new a(7,"undefined",!0);a.break=new a(7,"break",!0);class h{constructor(t,n,r){this.type=t,this.value=n,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const oe=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",hr=new TextDecoder,yr=new TextEncoder;function ke(e){return oe&&globalThis.Buffer.isBuffer(e)}function Qt(e){return e instanceof Uint8Array?ke(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const pr=oe?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):It(e,t,n):(e,t,n)=>n-t>64?hr.decode(e.subarray(t,n)):It(e,t,n),gr=oe?e=>e.length>64?globalThis.Buffer.from(e):Ct(e):e=>e.length>64?yr.encode(e):Ct(e),q=e=>Uint8Array.from(e),tt=oe?(e,t,n)=>ke(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),wr=oe?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),Qt(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},mr=oe?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function xr(e,t){if(ke(e)&&ke(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function Ct(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t}function It(e,t,n){const r=[];for(;t<n;){const o=e[t];let i=null,s=o>239?4:o>223?3:o>191?2:1;if(t+s<=n){let c,u,w,l;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[t+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(i=l));break;case 3:c=e[t+1],u=e[t+2],(c&192)===128&&(u&192)===128&&(l=(o&15)<<12|(c&63)<<6|u&63,l>2047&&(l<55296||l>57343)&&(i=l));break;case 4:c=e[t+1],u=e[t+2],w=e[t+3],(c&192)===128&&(u&192)===128&&(w&192)===128&&(l=(o&15)<<18|(c&63)<<12|(u&63)<<6|w&63,l>65535&&l<1114112&&(i=l))}}i===null?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|i&1023),r.push(i),t+=s}return br(r)}const Nt=4096;function br(e){const t=e.length;if(t<=Nt)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Nt));return n}const vr=256;class en{constructor(t=vr){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(t,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=mr(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const r=this.chunks[0];t&&this.cursor>r.length/2?(n=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=tt(r,0,this.cursor)}else n=wr(this.chunks,this.cursor);return t&&this.reset(),n}}const A="CBOR decode error:",tn="CBOR encode error:";function ie(e,t,n){if(e.length-t<n)throw new Error(`${A} not enough data for type`)}const $=[24,256,65536,4294967296,BigInt("18446744073709551616")];function W(e,t,n){ie(e,t,1);const r=e[t];if(n.strict===!0&&r<$[0])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);return r}function Q(e,t,n){ie(e,t,2);const r=e[t]<<8|e[t+1];if(n.strict===!0&&r<$[1])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);return r}function ee(e,t,n){ie(e,t,4);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&r<$[2])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);return r}function te(e,t,n){ie(e,t,8);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(r)<<BigInt(32))+BigInt(o);if(n.strict===!0&&i<$[3])throw new Error(`${A} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(n.allowBigInt===!0)return i;throw new Error(`${A} integers outside of the safe integer range are not supported`)}function _r(e,t,n,r){return new h(a.uint,W(e,t+1,r),2)}function Er(e,t,n,r){return new h(a.uint,Q(e,t+1,r),3)}function Ar(e,t,n,r){return new h(a.uint,ee(e,t+1,r),5)}function kr(e,t,n,r){return new h(a.uint,te(e,t+1,r),9)}function ne(e,t){return F(e,0,t.value)}function F(e,t,n){if(n<$[0]){const r=Number(n);e.push([t|r])}else if(n<$[1]){const r=Number(n);e.push([t|24,r])}else if(n<$[2]){const r=Number(n);e.push([t|25,r>>>8,r&255])}else if(n<$[3]){const r=Number(n);e.push([t|26,r>>>24&255,r>>>16&255,r>>>8&255,r&255])}else{const r=BigInt(n);if(r<$[4]){const o=[t|27,0,0,0,0,0,0,0];let i=Number(r&BigInt(4294967295)),s=Number(r>>BigInt(32)&BigInt(4294967295));o[8]=i&255,i=i>>8,o[7]=i&255,i=i>>8,o[6]=i&255,i=i>>8,o[5]=i&255,o[4]=s&255,s=s>>8,o[3]=s&255,s=s>>8,o[2]=s&255,s=s>>8,o[1]=s&255,e.push(o)}else throw new Error(`${A} encountered BigInt larger than allowable range`)}}ne.encodedSize=function(t){return F.encodedSize(t.value)};F.encodedSize=function(t){return t<$[0]?1:t<$[1]?2:t<$[2]?3:t<$[3]?5:9};ne.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function Sr(e,t,n,r){return new h(a.negint,-1-W(e,t+1,r),2)}function Br(e,t,n,r){return new h(a.negint,-1-Q(e,t+1,r),3)}function Tr(e,t,n,r){return new h(a.negint,-1-ee(e,t+1,r),5)}const nt=BigInt(-1),nn=BigInt(1);function Cr(e,t,n,r){const o=te(e,t+1,r);if(typeof o!="bigint"){const i=-1-o;if(i>=Number.MIN_SAFE_INTEGER)return new h(a.negint,i,9)}if(r.allowBigInt!==!0)throw new Error(`${A} integers outside of the safe integer range are not supported`);return new h(a.negint,nt-BigInt(o),9)}function rt(e,t){const n=t.value,r=typeof n=="bigint"?n*nt-nn:n*-1-1;F(e,t.type.majorEncoded,r)}rt.encodedSize=function(t){const n=t.value,r=typeof n=="bigint"?n*nt-nn:n*-1-1;return r<$[0]?1:r<$[1]?2:r<$[2]?3:r<$[3]?5:9};rt.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function we(e,t,n,r){ie(e,t,n+r);const o=tt(e,t+n,t+n+r);return new h(a.bytes,o,n+r)}function Ir(e,t,n,r){return we(e,t,1,n)}function Nr(e,t,n,r){return we(e,t,2,W(e,t+1,r))}function Ur(e,t,n,r){return we(e,t,3,Q(e,t+1,r))}function $r(e,t,n,r){return we(e,t,5,ee(e,t+1,r))}function Or(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${A} 64-bit integer bytes lengths not supported`);return we(e,t,9,o)}function Se(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===a.string?gr(e.value):e.value),e.encodedBytes}function Ue(e,t){const n=Se(t);F(e,t.type.majorEncoded,n.length),e.push(n)}Ue.encodedSize=function(t){const n=Se(t);return F.encodedSize(n.length)+n.length};Ue.compareTokens=function(t,n){return Mr(Se(t),Se(n))};function Mr(e,t){return e.length<t.length?-1:e.length>t.length?1:xr(e,t)}function me(e,t,n,r,o){const i=n+r;ie(e,t,i);const s=new h(a.string,pr(e,t+n,t+i),i);return o.retainStringBytes===!0&&(s.byteValue=tt(e,t+n,t+i)),s}function zr(e,t,n,r){return me(e,t,1,n,r)}function Dr(e,t,n,r){return me(e,t,2,W(e,t+1,r),r)}function Rr(e,t,n,r){return me(e,t,3,Q(e,t+1,r),r)}function Fr(e,t,n,r){return me(e,t,5,ee(e,t+1,r),r)}function jr(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${A} 64-bit integer string lengths not supported`);return me(e,t,9,o,r)}const Vr=Ue;function se(e,t,n,r){return new h(a.array,r,n)}function Lr(e,t,n,r){return se(e,t,1,n)}function qr(e,t,n,r){return se(e,t,2,W(e,t+1,r))}function Pr(e,t,n,r){return se(e,t,3,Q(e,t+1,r))}function Gr(e,t,n,r){return se(e,t,5,ee(e,t+1,r))}function Hr(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${A} 64-bit integer array lengths not supported`);return se(e,t,9,o)}function Xr(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${A} indefinite length items not allowed`);return se(e,t,1,1/0)}function ot(e,t){F(e,a.array.majorEncoded,t.value)}ot.compareTokens=ne.compareTokens;ot.encodedSize=function(t){return F.encodedSize(t.value)};function ae(e,t,n,r){return new h(a.map,r,n)}function Zr(e,t,n,r){return ae(e,t,1,n)}function Kr(e,t,n,r){return ae(e,t,2,W(e,t+1,r))}function Yr(e,t,n,r){return ae(e,t,3,Q(e,t+1,r))}function Jr(e,t,n,r){return ae(e,t,5,ee(e,t+1,r))}function Wr(e,t,n,r){const o=te(e,t+1,r);if(typeof o=="bigint")throw new Error(`${A} 64-bit integer map lengths not supported`);return ae(e,t,9,o)}function Qr(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${A} indefinite length items not allowed`);return ae(e,t,1,1/0)}function it(e,t){F(e,a.map.majorEncoded,t.value)}it.compareTokens=ne.compareTokens;it.encodedSize=function(t){return F.encodedSize(t.value)};function eo(e,t,n,r){return new h(a.tag,n,1)}function to(e,t,n,r){return new h(a.tag,W(e,t+1,r),2)}function no(e,t,n,r){return new h(a.tag,Q(e,t+1,r),3)}function ro(e,t,n,r){return new h(a.tag,ee(e,t+1,r),5)}function oo(e,t,n,r){return new h(a.tag,te(e,t+1,r),9)}function st(e,t){F(e,a.tag.majorEncoded,t.value)}st.compareTokens=ne.compareTokens;st.encodedSize=function(t){return F.encodedSize(t.value)};const io=20,so=21,ao=22,co=23;function fo(e,t,n,r){if(r.allowUndefined===!1)throw new Error(`${A} undefined values are not supported`);return r.coerceUndefinedToNull===!0?new h(a.null,null,1):new h(a.undefined,void 0,1)}function uo(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${A} indefinite length items not allowed`);return new h(a.break,void 0,1)}function at(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${A} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${A} Infinity values are not supported`)}return new h(a.float,e,t)}function lo(e,t,n,r){return at(ft(e,t+1),3,r)}function ho(e,t,n,r){return at(ut(e,t+1),5,r)}function yo(e,t,n,r){return at(an(e,t+1),9,r)}function ct(e,t,n){const r=t.value;if(r===!1)e.push([a.float.majorEncoded|io]);else if(r===!0)e.push([a.float.majorEncoded|so]);else if(r===null)e.push([a.float.majorEncoded|ao]);else if(r===void 0)e.push([a.float.majorEncoded|co]);else{let o,i=!1;(!n||n.float64!==!0)&&(on(r),o=ft(j,1),r===o||Number.isNaN(r)?(j[0]=249,e.push(j.slice(0,3)),i=!0):(sn(r),o=ut(j,1),r===o&&(j[0]=250,e.push(j.slice(0,5)),i=!0))),i||(po(r),o=an(j,1),j[0]=251,e.push(j.slice(0,9)))}}ct.encodedSize=function(t,n){const r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!n||n.float64!==!0){on(r);let o=ft(j,1);if(r===o||Number.isNaN(r))return 3;if(sn(r),o=ut(j,1),r===o)return 5}return 9};const rn=new ArrayBuffer(9),D=new DataView(rn,1),j=new Uint8Array(rn,0);function on(e){if(e===1/0)D.setUint16(0,31744,!1);else if(e===-1/0)D.setUint16(0,64512,!1);else if(Number.isNaN(e))D.setUint16(0,32256,!1);else{D.setFloat32(0,e);const t=D.getUint32(0),n=(t&2139095040)>>23,r=t&8388607;if(n===255)D.setUint16(0,31744,!1);else if(n===0)D.setUint16(0,(e&2147483648)>>16|r>>13,!1);else{const o=n-127;o<-24?D.setUint16(0,0):o<-14?D.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):D.setUint16(0,(t&2147483648)>>16|o+15<<10|r>>13,!1)}}}function ft(e,t){if(e.length-t<2)throw new Error(`${A} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const r=n>>10&31,o=n&1023;let i;return r===0?i=o*2**-24:r!==31?i=(o+1024)*2**(r-25):i=o===0?1/0:NaN,n&32768?-i:i}function sn(e){D.setFloat32(0,e,!1)}function ut(e,t){if(e.length-t<4)throw new Error(`${A} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function po(e){D.setFloat64(0,e,!1)}function an(e,t){if(e.length-t<8)throw new Error(`${A} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}ct.compareTokens=ne.compareTokens;function B(e,t,n){throw new Error(`${A} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function $e(e){return()=>{throw new Error(`${A} ${e}`)}}const f=[];for(let e=0;e<=23;e++)f[e]=B;f[24]=_r;f[25]=Er;f[26]=Ar;f[27]=kr;f[28]=B;f[29]=B;f[30]=B;f[31]=B;for(let e=32;e<=55;e++)f[e]=B;f[56]=Sr;f[57]=Br;f[58]=Tr;f[59]=Cr;f[60]=B;f[61]=B;f[62]=B;f[63]=B;for(let e=64;e<=87;e++)f[e]=Ir;f[88]=Nr;f[89]=Ur;f[90]=$r;f[91]=Or;f[92]=B;f[93]=B;f[94]=B;f[95]=$e("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)f[e]=zr;f[120]=Dr;f[121]=Rr;f[122]=Fr;f[123]=jr;f[124]=B;f[125]=B;f[126]=B;f[127]=$e("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)f[e]=Lr;f[152]=qr;f[153]=Pr;f[154]=Gr;f[155]=Hr;f[156]=B;f[157]=B;f[158]=B;f[159]=Xr;for(let e=160;e<=183;e++)f[e]=Zr;f[184]=Kr;f[185]=Yr;f[186]=Jr;f[187]=Wr;f[188]=B;f[189]=B;f[190]=B;f[191]=Qr;for(let e=192;e<=215;e++)f[e]=eo;f[216]=to;f[217]=no;f[218]=ro;f[219]=oo;f[220]=B;f[221]=B;f[222]=B;f[223]=B;for(let e=224;e<=243;e++)f[e]=$e("simple values are not supported");f[244]=B;f[245]=B;f[246]=B;f[247]=fo;f[248]=$e("simple values are not supported");f[249]=lo;f[250]=ho;f[251]=yo;f[252]=B;f[253]=B;f[254]=B;f[255]=uo;const L=[];for(let e=0;e<24;e++)L[e]=new h(a.uint,e,1);for(let e=-1;e>=-24;e--)L[31-e]=new h(a.negint,e,1);L[64]=new h(a.bytes,new Uint8Array(0),1);L[96]=new h(a.string,"",1);L[128]=new h(a.array,0,1);L[160]=new h(a.map,0,1);L[244]=new h(a.false,!1,1);L[245]=new h(a.true,!0,1);L[246]=new h(a.null,null,1);function go(e){switch(e.type){case a.false:return q([244]);case a.true:return q([245]);case a.null:return q([246]);case a.bytes:return e.value.length?void 0:q([64]);case a.string:return e.value===""?q([96]):void 0;case a.array:return e.value===0?q([128]):void 0;case a.map:return e.value===0?q([160]):void 0;case a.uint:return e.value<24?q([Number(e.value)]):void 0;case a.negint:if(e.value>=-24)return q([31-Number(e.value)])}}const wo={float64:!1,mapSorter:bo,quickEncodeToken:go};function mo(){const e=[];return e[a.uint.major]=ne,e[a.negint.major]=rt,e[a.bytes.major]=Ue,e[a.string.major]=Vr,e[a.array.major]=ot,e[a.map.major]=it,e[a.tag.major]=st,e[a.float.major]=ct,e}const cn=mo(),je=new en;class Be{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${tn} object contains circular references`);return new Be(n,t)}}const H={null:new h(a.null,null),undefined:new h(a.undefined,void 0),true:new h(a.true,!0),false:new h(a.false,!1),emptyArray:new h(a.array,0),emptyMap:new h(a.map,0)},K={number(e,t,n,r){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new h(a.float,e):e>=0?new h(a.uint,e):new h(a.negint,e)},bigint(e,t,n,r){return e>=BigInt(0)?new h(a.uint,e):new h(a.negint,e)},Uint8Array(e,t,n,r){return new h(a.bytes,e)},string(e,t,n,r){return new h(a.string,e)},boolean(e,t,n,r){return e?H.true:H.false},null(e,t,n,r){return H.null},undefined(e,t,n,r){return H.undefined},ArrayBuffer(e,t,n,r){return new h(a.bytes,new Uint8Array(e))},DataView(e,t,n,r){return new h(a.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,r){if(!e.length)return n.addBreakTokens===!0?[H.emptyArray,new h(a.break)]:H.emptyArray;r=Be.createCheck(r,e);const o=[];let i=0;for(const s of e)o[i++]=ve(s,n,r);return n.addBreakTokens?[new h(a.array,e.length),o,new h(a.break)]:[new h(a.array,e.length),o]},Object(e,t,n,r){const o=t!=="Object",i=o?e.keys():Object.keys(e),s=o?e.size:i.length;if(!s)return n.addBreakTokens===!0?[H.emptyMap,new h(a.break)]:H.emptyMap;r=Be.createCheck(r,e);const c=[];let u=0;for(const w of i)c[u++]=[ve(w,n,r),ve(o?e.get(w):e[w],n,r)];return xo(c,n),n.addBreakTokens?[new h(a.map,s),c,new h(a.break)]:[new h(a.map,s),c]}};K.Map=K.Object;K.Buffer=K.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))K[`${e}Array`]=K.DataView;function ve(e,t={},n){const r=ur(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||K[r];if(typeof o=="function"){const s=o(e,r,t,n);if(s!=null)return s}const i=K[r];if(!i)throw new Error(`${tn} unsupported type: ${r}`);return i(e,r,t,n)}function xo(e,t){t.mapSorter&&e.sort(t.mapSorter)}function bo(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,i=cn[o].compareTokens(n,r);return i===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function fn(e,t,n,r){if(Array.isArray(t))for(const o of t)fn(e,o,n,r);else n[t.type.major](e,t,r)}function vo(e,t,n){const r=ve(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const o=n.quickEncodeToken(r);if(o)return o;const i=t[r.type.major];if(i.encodedSize){const s=i.encodedSize(r,n),c=new en(s);if(i(c,r,n),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return Qt(c.chunks[0])}}return je.reset(),fn(je,r,t,n),je.toBytes(!0)}function _o(e,t){return t=Object.assign({},wo,t),vo(e,cn,t)}const Eo={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Ao{constructor(t,n={}){this._pos=0,this.data=t,this.options=n}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let n=L[t];if(n===void 0){const r=f[t];if(!r)throw new Error(`${A} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const o=t&31;n=r(this.data,this._pos,o,this.options)}return this._pos+=n.encodedLength,n}}const he=Symbol.for("DONE"),Oe=Symbol.for("BREAK");function ko(e,t,n){const r=[];for(let o=0;o<e.value;o++){const i=ye(t,n);if(i===Oe){if(e.value===1/0)break;throw new Error(`${A} got unexpected break to lengthed array`)}if(i===he)throw new Error(`${A} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=i}return r}function So(e,t,n){const r=n.useMaps===!0,o=r?void 0:{},i=r?new Map:void 0;for(let s=0;s<e.value;s++){const c=ye(t,n);if(c===Oe){if(e.value===1/0)break;throw new Error(`${A} got unexpected break to lengthed map`)}if(c===he)throw new Error(`${A} found map but not enough entries (got ${s} [no key], expected ${e.value})`);if(r!==!0&&typeof c!="string")throw new Error(`${A} non-string keys not supported (got ${typeof c})`);if(n.rejectDuplicateMapKeys===!0&&(r&&i.has(c)||!r&&c in o))throw new Error(`${A} found repeat map key "${c}"`);const u=ye(t,n);if(u===he)throw new Error(`${A} found map but not enough entries (got ${s} [no value], expected ${e.value})`);r?i.set(c,u):o[c]=u}return r?i:o}function ye(e,t){if(e.done())return he;const n=e.next();if(n.type===a.break)return Oe;if(n.type.terminal)return n.value;if(n.type===a.array)return ko(n,e,t);if(n.type===a.map)return So(n,e,t);if(n.type===a.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const r=ye(e,t);return t.tags[n.value](r)}throw new Error(`${A} tag not supported (${n.value})`)}throw new Error("unsupported")}function Bo(e,t){if(!(e instanceof Uint8Array))throw new Error(`${A} data to decode must be a Uint8Array`);t=Object.assign({},Eo,t);const n=t.tokenizer||new Ao(e,t),r=ye(n,t);if(r===he)throw new Error(`${A} did not find any content to decode`);if(r===Oe)throw new Error(`${A} got unexpected break`);return[r,e.subarray(n.pos())]}function To(e,t){const[n,r]=Bo(e,t);if(r.length>0)throw new Error(`${A} too many terminals, data makes no sense`);return n}function Co(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function lt(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Io(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=o}var c=e.length,u=e.charAt(0),w=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function v(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var k=0,_=0,T=0,b=d.length;T!==b&&d[T]===0;)T++,k++;for(var m=(b-T)*l+1>>>0,y=new Uint8Array(m);T!==b;){for(var x=d[T],I=0,N=m-1;(x!==0||I<_)&&N!==-1;N--,I++)x+=256*y[N]>>>0,y[N]=x%c>>>0,x=x/c>>>0;if(x!==0)throw new Error("Non-zero carry");_=I,T++}for(var U=m-_;U!==m&&y[U]===0;)U++;for(var Y=u.repeat(k);U<m;++U)Y+=e.charAt(y[U]);return Y}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var k=0;if(d[k]!==" "){for(var _=0,T=0;d[k]===u;)_++,k++;for(var b=(d.length-k)*w+1>>>0,m=new Uint8Array(b);d[k];){var y=n[d.charCodeAt(k)];if(y===255)return;for(var x=0,I=b-1;(y!==0||x<T)&&I!==-1;I--,x++)y+=c*m[I]>>>0,m[I]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");T=x,k++}if(d[k]!==" "){for(var N=b-T;N!==b&&m[N]===0;)N++;for(var U=new Uint8Array(_+(b-N)),Y=_;N!==b;)U[Y++]=m[N++];return U}}}function E(d){var k=p(d);if(k)return k;throw new Error(`Non-${t} character`)}return{encode:v,decodeUnsafe:p,decode:E}}var No=Io,Uo=No;class $o{constructor(t,n,r){S(this,"name");S(this,"prefix");S(this,"baseEncode");this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Oo{constructor(t,n,r){S(this,"name");S(this,"prefix");S(this,"baseDecode");S(this,"prefixCodePoint");this.name=t,this.prefix=n;const o=n.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return un(this,t)}}class Mo{constructor(t){S(this,"decoders");this.decoders=t}or(t){return un(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r!=null)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function un(e,t){return new Mo({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class zo{constructor(t,n,r,o){S(this,"name");S(this,"prefix");S(this,"baseEncode");S(this,"baseDecode");S(this,"encoder");S(this,"decoder");this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new $o(t,n,r),this.decoder=new Oo(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function ln({name:e,prefix:t,encode:n,decode:r}){return new zo(e,t,n,r)}function Me({name:e,prefix:t,alphabet:n}){const{encode:r,decode:o}=Uo(n,e);return ln({prefix:t,name:e,encode:r,decode:i=>lt(o(i))})}function Do(e,t,n,r){const o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let i=e.length;for(;e[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let c=0,u=0,w=0;for(let l=0;l<i;++l){const v=o[e[l]];if(v===void 0)throw new SyntaxError(`Non-${r} character`);u=u<<n|v,c+=n,c>=8&&(c-=8,s[w++]=255&u>>c)}if(c>=n||255&u<<8-c)throw new SyntaxError("Unexpected end of data");return s}function Ro(e,t,n){const r=t[t.length-1]==="=",o=(1<<n)-1;let i="",s=0,c=0;for(let u=0;u<e.length;++u)for(c=c<<8|e[u],s+=8;s>n;)s-=n,i+=t[o&c>>s];if(s!==0&&(i+=t[o&c<<n-s]),r)for(;i.length*n&7;)i+="=";return i}function G({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return ln({prefix:t,name:e,encode(o){return Ro(o,r,n)},decode(o){return Do(o,r,n,e)}})}const _e=G({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});G({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});G({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});G({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});G({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});G({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});G({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});G({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});G({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Ve=Me({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});Me({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const Z=Me({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});Me({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Fo=dn,Ut=128,jo=-128,Vo=Math.pow(2,31);function dn(e,t,n){t=t||[],n=n||0;for(var r=n;e>=Vo;)t[n++]=e&255|Ut,e/=128;for(;e&jo;)t[n++]=e&255|Ut,e>>>=7;return t[n]=e|0,dn.bytes=n-r+1,t}var Lo=Pe,qo=128,$t=127;function Pe(e,r){var n=0,r=r||0,o=0,i=r,s,c=e.length;do{if(i>=c)throw Pe.bytes=0,new RangeError("Could not decode varint");s=e[i++],n+=o<28?(s&$t)<<o:(s&$t)*Math.pow(2,o),o+=7}while(s>=qo);return Pe.bytes=i-r,n}var Po=Math.pow(2,7),Go=Math.pow(2,14),Ho=Math.pow(2,21),Xo=Math.pow(2,28),Zo=Math.pow(2,35),Ko=Math.pow(2,42),Yo=Math.pow(2,49),Jo=Math.pow(2,56),Wo=Math.pow(2,63),Qo=function(e){return e<Po?1:e<Go?2:e<Ho?3:e<Xo?4:e<Zo?5:e<Ko?6:e<Yo?7:e<Jo?8:e<Wo?9:10},ei={encode:Fo,decode:Lo,encodingLength:Qo},Te=ei;function Ge(e,t=0){return[Te.decode(e,t),Te.decode.bytes]}function Ce(e,t,n=0){return Te.encode(e,t,n),t}function Ie(e){return Te.encodingLength(e)}function He(e,t){const n=t.byteLength,r=Ie(e),o=r+Ie(n),i=new Uint8Array(o+n);return Ce(e,i,0),Ce(n,i,r),i.set(t,o),new dt(e,n,t,i)}function ti(e){const t=lt(e),[n,r]=Ge(t),[o,i]=Ge(t.subarray(r)),s=t.subarray(r+i);if(s.byteLength!==o)throw new Error("Incorrect length");return new dt(n,o,s,t)}function ni(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&Co(e.bytes,n.bytes)}}class dt{constructor(t,n,r,o){S(this,"code");S(this,"size");S(this,"digest");S(this,"bytes");this.code=t,this.size=n,this.digest=r,this.bytes=o}}function Ot(e,t){const{bytes:n,version:r}=e;switch(r){case 0:return oi(n,Xe(e),t??Z.encoder);default:return ii(n,Xe(e),t??_e.encoder)}}const Mt=new WeakMap;function Xe(e){const t=Mt.get(e);if(t==null){const n=new Map;return Mt.set(e,n),n}return t}var Pt;class C{constructor(t,n,r,o){S(this,"code");S(this,"version");S(this,"multihash");S(this,"bytes");S(this,"/");S(this,Pt,"CID");this.code=n,this.version=t,this.multihash=r,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:n}=this;if(t!==ue)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==si)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return C.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=He(t,n);return C.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return C.equals(this,t)}static equals(t,n){const r=n;return r!=null&&t.code===r.code&&t.version===r.version&&ni(t.multihash,r.multihash)}toString(t){return Ot(this,t)}toJSON(){return{"/":Ot(this)}}link(){return this}[(Pt=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const n=t;if(n instanceof C)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:r,code:o,multihash:i,bytes:s}=n;return new C(r,o,i,s??zt(r,o,i.bytes))}else if(n[ai]===!0){const{version:r,multihash:o,code:i}=n,s=ti(o);return C.create(r,i,s)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(n!==ue)throw new Error(`Version 0 CID must use dag-pb (code: ${ue}) block encoding`);return new C(t,n,r,r.bytes)}case 1:{const o=zt(t,n,r.bytes);return new C(t,n,r,o)}default:throw new Error("Invalid version")}}static createV0(t){return C.create(0,ue,t)}static createV1(t,n){return C.create(1,t,n)}static decode(t){const[n,r]=C.decodeFirst(t);if(r.length!==0)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=C.inspectBytes(t),r=n.size-n.multihashSize,o=lt(t.subarray(r,r+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const i=o.subarray(n.multihashSize-n.digestSize),s=new dt(n.multihashCode,n.digestSize,i,o);return[n.version===0?C.createV0(s):C.createV1(n.codec,s),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[v,p]=Ge(t.subarray(n));return n+=p,v};let o=r(),i=ue;if(o===18?(o=0,n=0):i=r(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const s=n,c=r(),u=r(),w=n+u,l=w-s;return{version:o,codec:i,multihashCode:c,digestSize:u,multihashSize:l,size:w}}static parse(t,n){const[r,o]=ri(t,n),i=C.decode(o);if(i.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Xe(i).set(r,t),i}}function ri(e,t){switch(e[0]){case"Q":{const n=t??Z;return[Z.prefix,n.decode(`${Z.prefix}${e}`)]}case Z.prefix:{const n=t??Z;return[Z.prefix,n.decode(e)]}case _e.prefix:{const n=t??_e;return[_e.prefix,n.decode(e)]}case Ve.prefix:{const n=t??Ve;return[Ve.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function oi(e,t,n){const{prefix:r}=n;if(r!==Z.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(o==null){const i=n.encode(e).slice(1);return t.set(r,i),i}else return o}function ii(e,t,n){const{prefix:r}=n,o=t.get(r);if(o==null){const i=n.encode(e);return t.set(r,i),i}else return o}const ue=112,si=18;function zt(e,t,n){const r=Ie(e),o=r+Ie(t),i=new Uint8Array(o+n.byteLength);return Ce(e,i,0),Ce(t,i,r),i.set(n,o),i}const ai=Symbol.for("@ipld/js-cid/CID"),hn=42;function yn(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function ci(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=C.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new h(a.tag,hn),new h(a.bytes,n)]}function fi(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function ui(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Ze={float64:!0,typeEncoders:{Object:ci,undefined:fi,number:ui}},li={...Ze,typeEncoders:{...Ze.typeEncoders}};function di(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return C.decode(e.subarray(1))}const Ne={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ne.tags[hn]=di;const hi={...Ne,tags:Ne.tags.slice()},yi="dag-cbor",pi=113,gi=e=>_o(e,Ze),wi=e=>To(yn(e),Ne),pn=Object.freeze(Object.defineProperty({__proto__:null,code:pi,decode:wi,decodeOptions:hi,encode:gi,encodeOptions:li,name:yi,toByteView:yn},Symbol.toStringTag,{value:"Module"})),mi=[{name:"D. Guttenfelder",url:"https://stanford.aa.dev.starlinglab.org"},{name:"K. Pollack",url:"https://kira.aa.prod.starlinglab.org"},{name:"C. Morris",url:"https://chris.aa.prod.starlinglab.org"}],xi=()=>{if(typeof localStorage<"u"){const e=localStorage.getItem("aa-explorer-endpoints");if(e)try{const t=JSON.parse(e);if(t&&t.length>0)return t}catch(t){console.error("Failed to parse stored endpoints:",t)}}return[...mi]},bi=et(xi()),Qi=et(null);bi.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("aa-explorer-endpoints",JSON.stringify(e))});const vi={show:!1,kind:"hash",data:null,selectedCID:null},gn=et(vi);function es(e,t,n){gn.set({show:!0,kind:e,data:t,selectedCID:n})}function ts(){gn.update(e=>({...e,show:!1}))}function _i({name:e,code:t,encode:n}){return new Ei(e,t,n)}class Ei{constructor(t,n,r){S(this,"name");S(this,"code");S(this,"encode");this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?He(this.code,n):n.then(r=>He(this.code,r))}else throw Error("Unknown type, must be binary type")}}function xe({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*Ai(e,t){if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n],i=C.asCID(r);i!=null?yield[o.join("/"),i]:typeof r=="object"&&(yield*Ke(r,o))}else{const n=C.asCID(t);n!=null?yield[e.join("/"),n]:yield*Ke(t,e)}}function*Ke(e,t){if(e==null||e instanceof Uint8Array)return;const n=C.asCID(e);n!=null&&(yield[t.join("/"),n]);for(const[r,o]of Object.entries(e)){const i=[...t,r];yield*Ai(i,o)}}function*ki(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n];yield o.join("/"),typeof r=="object"&&C.asCID(r)==null&&(yield*Ye(r,o))}else yield*Ye(t,e)}function*Ye(e,t){if(!(e==null||typeof e!="object"))for(const[n,r]of Object.entries(e)){const o=[...t,n];yield o.join("/"),r!=null&&!(r instanceof Uint8Array)&&typeof r=="object"&&C.asCID(r)==null&&(yield*ki(o,r))}}function Si(e,t){let n=e;for(const[r,o]of t.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${t.slice(0,r+1).map(s=>`[${JSON.stringify(s)}]`).join("")}`);const i=C.asCID(n);if(i!=null)return{value:i,remaining:t.slice(r+1).join("/")}}return{value:n}}class Bi{constructor({cid:t,bytes:n,value:r}){S(this,"cid");S(this,"bytes");S(this,"value");S(this,"asBlock");if(t==null||n==null||typeof r>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=n,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:xe(),bytes:xe(),value:xe(),asBlock:xe()})}links(){return Ke(this.value,[])}tree(){return Ye(this.value,[])}get(t="/"){return Si(this.value,t.split("/").filter(Boolean))}}async function wn({value:e,codec:t,hasher:n}){if(typeof e>"u")throw new Error('Missing required argument "value"');if(t==null||n==null)throw new Error("Missing required argument: codec or hasher");const r=t.encode(e),o=await n.digest(r),i=C.create(1,t.code,o);return new Bi({value:e,bytes:r,cid:i})}function Ti(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const mn=_i({name:"sha2-256",code:18,encode:Ti("SHA-256")});/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const O=2n**255n-19n,Ee=2n**252n+27742317777372353535851937790883648493n,Dt=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Rt=0x6666666666666666666666666666666666666666666666666666666666666658n,Ci=37095705934669439343138083508754565189542113879843219016388785533085940283555n,be={a:-1n,d:Ci,h:8},M=(e="")=>{throw new Error(e)},xn=e=>typeof e=="string",Ii=e=>e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array",pe=(e,t)=>!Ii(e)||typeof t=="number"&&t>0&&e.length!==t?M("Uint8Array of valid length expected"):e,re=e=>new Uint8Array(e),Ae=(e,t)=>pe(xn(e)?yt(e):re(pe(e)),t),g=(e,t=O)=>{let n=e%t;return n>=0n?n:t+n},Ft=e=>e instanceof z?e:M("Point expected");class z{constructor(t,n,r,o){this.ex=t,this.ey=n,this.ez=r,this.et=o}static fromAffine(t){return new z(t.x,t.y,1n,g(t.x*t.y))}static fromHex(t,n=!1){const{d:r}=be;t=Ae(t,32);const o=t.slice(),i=t[31];o[31]=i&-129;const s=pt(o);n&&!(0n<=s&&s<2n**256n)&&M("bad y coord 1"),!n&&!(0n<=s&&s<O)&&M("bad y coord 2");const c=g(s*s),u=g(c-1n),w=g(r*c+1n);let{isValid:l,value:v}=$i(u,w);l||M("bad y coordinate 3");const p=(v&1n)===1n,E=(i&128)!==0;return!n&&v===0n&&E&&M("bad y coord 3"),E!==p&&(v=g(-v)),new z(v,s,1n,g(v*s))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){const{ex:n,ey:r,ez:o}=this,{ex:i,ey:s,ez:c}=Ft(t),u=g(n*c),w=g(i*o),l=g(r*c),v=g(s*o);return u===w&&l===v}is0(){return this.equals(le)}negate(){return new z(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{ex:t,ey:n,ez:r}=this,{a:o}=be,i=g(t*t),s=g(n*n),c=g(2n*g(r*r)),u=g(o*i),w=t+n,l=g(g(w*w)-i-s),v=u+s,p=v-c,E=u-s,d=g(l*p),k=g(v*E),_=g(l*E),T=g(p*v);return new z(d,k,T,_)}add(t){const{ex:n,ey:r,ez:o,et:i}=this,{ex:s,ey:c,ez:u,et:w}=Ft(t),{a:l,d:v}=be,p=g(n*s),E=g(r*c),d=g(i*v*w),k=g(o*u),_=g((n+r)*(s+c)-p-E),T=g(k-d),b=g(k+d),m=g(E-l*p),y=g(_*T),x=g(b*m),I=g(_*m),N=g(T*b);return new z(y,x,N,I)}mul(t,n=!0){if(t===0n)return n===!0?M("cannot multiply by 0"):le;if(typeof t=="bigint"&&0n<t&&t<Ee||M("invalid scalar, must be < L"),!n&&this.is0()||t===1n)return this;if(this.equals(ge))return ji(t).p;let r=le,o=ge;for(let i=this;t>0n;i=i.double(),t>>=1n)t&1n?r=r.add(i):n&&(o=o.add(i));return r}multiply(t){return this.mul(t)}clearCofactor(){return this.mul(BigInt(be.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let t=this.mul(Ee/2n,!1).double();return Ee%2n&&(t=t.add(this)),t.is0()}toAffine(){const{ex:t,ey:n,ez:r}=this;if(this.equals(le))return{x:0n,y:1n};const o=vn(r,O);return g(r*o)!==1n&&M("invalid inverse"),{x:g(t*o),y:g(n*o)}}toRawBytes(){const{x:t,y:n}=this.toAffine(),r=Ni(n);return r[31]|=t&1n?128:0,r}toHex(){return ht(this.toRawBytes())}}z.BASE=new z(Dt,Rt,1n,g(Dt*Rt));z.ZERO=new z(0n,1n,1n,0n);const{BASE:ge,ZERO:le}=z,bn=(e,t)=>e.toString(16).padStart(t,"0"),ht=e=>Array.from(pe(e)).map(t=>bn(t,2)).join(""),P={_0:48,_9:57,A:65,F:70,a:97,f:102},jt=e=>{if(e>=P._0&&e<=P._9)return e-P._0;if(e>=P.A&&e<=P.F)return e-(P.A-10);if(e>=P.a&&e<=P.f)return e-(P.a-10)},yt=e=>{const t="hex invalid";if(!xn(e))return M(t);const n=e.length,r=n/2;if(n%2)return M(t);const o=re(r);for(let i=0,s=0;i<r;i++,s+=2){const c=jt(e.charCodeAt(s)),u=jt(e.charCodeAt(s+1));if(c===void 0||u===void 0)return M(t);o[i]=c*16+u}return o},Ni=e=>yt(bn(e,32*2)).reverse(),pt=e=>BigInt("0x"+ht(re(pe(e)).reverse())),Je=(...e)=>{const t=re(e.reduce((r,o)=>r+pe(o).length,0));let n=0;return e.forEach(r=>{t.set(r,n),n+=r.length}),t},vn=(e,t)=>{(e===0n||t<=0n)&&M("no inverse n="+e+" mod="+t);let n=g(e,t),r=t,o=0n,i=1n;for(;n!==0n;){const s=r/n,c=r%n,u=o-i*s;r=n,n=c,o=i,i=u}return r===1n?g(o,t):M("no inverse")},V=(e,t)=>{let n=e;for(;t-- >0n;)n*=n,n%=O;return n},Ui=e=>{const n=e*e%O*e%O,r=V(n,2n)*n%O,o=V(r,1n)*e%O,i=V(o,5n)*o%O,s=V(i,10n)*i%O,c=V(s,20n)*s%O,u=V(c,40n)*c%O,w=V(u,80n)*u%O,l=V(w,80n)*u%O,v=V(l,10n)*i%O;return{pow_p_5_8:V(v,2n)*e%O,b2:n}},Vt=19681161376707505956807079304988542015446066515923890162744021073123829784752n,$i=(e,t)=>{const n=g(t*t*t),r=g(n*n*t),o=Ui(e*r).pow_p_5_8;let i=g(e*n*o);const s=g(t*i*i),c=i,u=g(i*Vt),w=s===e,l=s===g(-e),v=s===g(-e*Vt);return w&&(i=c),(l||v)&&(i=u),(g(i)&1n)===1n&&(i=g(-i)),{isValid:w||l,value:i}},Oi=e=>g(pt(e),Ee);let Le;const Mi=(...e)=>En.sha512Async(...e);function zi(e,t){return Mi(t.hashable).then(t.finish)}const _n={zip215:!0},Di=(e,t,n,r=_n)=>{e=Ae(e,64),t=Ae(t),n=Ae(n,32);const{zip215:o}=r;let i,s,c,u,w=new Uint8Array;try{i=z.fromHex(n,o),s=z.fromHex(e.slice(0,32),o),c=pt(e.slice(32,64)),u=ge.mul(c,!1),w=Je(s.toRawBytes(),i.toRawBytes(),t)}catch{}return{hashable:w,finish:v=>{if(u==null||!o&&i.isSmallOrder())return!1;const p=Oi(v);return s.add(i.mul(p,!1)).add(u.negate()).clearCofactor().is0()}}},Ri=async(e,t,n,r=_n)=>zi(!0,Di(e,t,n,r)),Lt=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,En={bytesToHex:ht,hexToBytes:yt,concatBytes:Je,mod:g,invert:vn,randomBytes:(e=32)=>{const t=Lt();return(!t||!t.getRandomValues)&&M("crypto.getRandomValues must be defined"),t.getRandomValues(re(e))},sha512Async:async(...e)=>{const t=Lt(),n=t&&t.subtle;n||M("etc.sha512Async or crypto.subtle must be defined");const r=Je(...e);return re(await n.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(En,{sha512Sync:{configurable:!1,get(){return Le},set(e){Le||(Le=e)}}});const J=8,Fi=()=>{const e=[],t=256/J+1;let n=ge,r=n;for(let o=0;o<t;o++){r=n,e.push(r);for(let i=1;i<2**(J-1);i++)r=r.add(n),e.push(r);n=r.double()}return e};let qt;const ji=e=>{const t=qt||(qt=Fi()),n=(l,v)=>{let p=v.negate();return l?p:v};let r=le,o=ge;const i=1+256/J,s=2**(J-1),c=BigInt(2**J-1),u=2**J,w=BigInt(J);for(let l=0;l<i;l++){const v=l*s;let p=Number(e&c);e>>=w,p>s&&(p-=u,e+=1n);const E=v,d=v+Math.abs(p)-1,k=l%2!==0,_=p<0;p===0?o=o.add(n(k,t[E])):r=r.add(n(_,t[d]))}return{p:r,f:o}},Vi=[];async function ns(e,t,n){switch(e){case"hash":return{status:t.value.attestation.CID.toString()===n?"verified":"unverified"};case"signature":return t.value.signature?{status:await Li(t.value)?"verified":"present"}:{status:"unverified"};case"timestamp":if(t.value.timestamp&&t.value.timestamp.ots)try{return{status:await qi(t.value)?"verified":"present"}}catch(r){return console.log("Error verifying timestamp:",r),{status:"present"}}return{status:"unverified"};default:return console.log("Unknown kind:",e),{status:"unverified"}}}const Li=async e=>!Vi.includes(e.signature.pubKey)||!(await wn({value:e.attestation,codec:pn,hasher:mn})).cid.equals(e.signature.msg)?!1:await Ri(e.signature.sig,e.signature.msg.bytes,e.signature.pubKey),qi=async e=>{const t=window.OpenTimestamps;if(!(await wn({value:{signature:e.signature,attestation:e.attestation},codec:pn,hasher:mn})).cid.equals(e.timestamp.ots.msg))return!1;const r=new TextEncoder().encode(e.timestamp.ots.msg.toString()),o=e.timestamp.ots.proof,i=t.DetachedTimestampFile.fromBytes(new t.Ops.OpSHA256,r),s=t.DetachedTimestampFile.deserialize(o);let c;try{c=t.verify(s,i,{ignoreBitcoinNode:!0})}catch(u){return console.log("timestamp verification error:",u),!1}return c!=null};export{Zi as a,Yi as b,gn as c,Wi as d,bi as e,Qi as f,qe as g,ts as h,Xi as i,wi as j,es as k,Ki as r,Ji as s,ns as v};
