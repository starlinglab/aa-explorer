var On=Object.defineProperty;var Dn=(e,t,n)=>t in e?On(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t,n)=>Dn(e,typeof t!="symbol"?t+"":t,n);import{a6 as Qt,G as Fe,C as R,ae as zn,af as Rn,D as Ln,B as Fn,g as Bt,X as jn,H as Vn,F as $t,I as he,M as fe,am as Pn,J as en,K as tn,L as qn,aq as nn,A as Hn,Q as Gn,n as It,az as je,x as Nt,aA as et,aB as Ut,aC as Kn,ap as Xn,aD as Zn,as as Yn,aE as tt,aF as Jn,ak as Wn,aG as rn,aH as Qn,z as er,aI as tr,aJ as nr,aK as rr,aL as Ue,t as nt,T as rt}from"./gyiEl3Uc.js";import{i as or,d as sr,f as ir,g as ar,j as cr,n as ot,a as st}from"./nuOQF-VX.js";import{r as it}from"./CtItQhWX.js";import"./BkNFsCzC.js";function ur(e,t){if(t){const n=document.body;e.autofocus=!0,Qt(()=>{document.activeElement===n&&e.focus()})}}let Mt=!1;function fr(){Mt||(Mt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function li(e,t){return t}function lr(e,t,n,r){for(var o=[],s=t.length,i=0;i<s;i++)Kn(t[i].e,o,!0);var c=s>0&&o.length===0&&n!==null;if(c){var f=n.parentNode;Xn(f),f.append(n),r.clear(),K(e,t[0].prev,t[s-1].next)}Zn(o,()=>{for(var w=0;w<s;w++){var l=t[w];c||(r.delete(l.k),K(e,l.prev,l.next)),Yn(l.e,!c)}})}function di(e,t,n,r,o,s=null){var i=e,c={items:new Map,first:null},f=(t&rn)!==0;if(f){var w=e;i=R?Fe(zn(w)):w.appendChild(Rn())}R&&Ln();var l=null,v=!1,p=jn(()=>{var A=n();return Hn(A)?A:A==null?[]:nn(A)});Fn(()=>{var A=Bt(p),d=A.length;if(v&&d===0)return;v=d===0;let k=!1;if(R){var _=i.data===Vn;_!==(d===0)&&(i=$t(),Fe(i),he(!1),k=!0)}if(R){for(var T=null,x,m=0;m<d;m++){if(fe.nodeType===8&&fe.data===Pn){i=fe,k=!0,he(!1);break}var y=A[m],b=r(y,m);x=on(fe,c,T,null,y,b,m,o,t,n),c.items.set(b,x),T=x}d>0&&Fe($t())}R||dr(A,c,i,o,t,r,n),s!==null&&(d===0?l?en(l):l=tn(()=>s(i)):l!==null&&qn(l,()=>{l=null})),k&&he(!0),Bt(p)}),R&&(i=fe)}function dr(e,t,n,r,o,s,i){var Et,kt,St,Ct;var c=(o&Qn)!==0,f=(o&(tt|et))!==0,w=e.length,l=t.items,v=t.first,p=v,A,d=null,k,_=[],T=[],x,m,y,b;if(c)for(b=0;b<w;b+=1)x=e[b],m=s(x,b),y=l.get(m),y!==void 0&&((Et=y.a)==null||Et.measure(),(k??(k=new Set)).add(y));for(b=0;b<w;b+=1){if(x=e[b],m=s(x,b),y=l.get(m),y===void 0){var $=p?p.e.nodes_start:n;d=on($,t,d,d===null?t.first:d.next,x,m,b,r,o,i),l.set(m,d),_=[],T=[],p=d.next;continue}if(f&&hr(y,x,b,o),y.e.f&je&&(en(y.e),c&&((kt=y.a)==null||kt.unfix(),(k??(k=new Set)).delete(y))),y!==p){if(A!==void 0&&A.has(y)){if(_.length<T.length){var I=T[0],N;d=I.prev;var Y=_[0],Re=_[_.length-1];for(N=0;N<_.length;N+=1)Ot(_[N],I,n);for(N=0;N<T.length;N+=1)A.delete(T[N]);K(t,Y.prev,Re.next),K(t,d,Y),K(t,Re,I),p=I,d=Re,b-=1,_=[],T=[]}else A.delete(y),Ot(y,p,n),K(t,y.prev,y.next),K(t,y,d===null?t.first:d.next),K(t,d,y),d=y;continue}for(_=[],T=[];p!==null&&p.k!==m;)p.e.f&je||(A??(A=new Set)).add(p),T.push(p),p=p.next;if(p===null)continue;y=p}_.push(y),d=y,p=y.next}if(p!==null||A!==void 0){for(var ue=A===void 0?[]:nn(A);p!==null;)p.e.f&je||ue.push(p),p=p.next;var Le=ue.length;if(Le>0){var Mn=o&rn&&w===0?n:null;if(c){for(b=0;b<Le;b+=1)(St=ue[b].a)==null||St.measure();for(b=0;b<Le;b+=1)(Ct=ue[b].a)==null||Ct.fix()}lr(t,ue,Mn,l)}}c&&Qt(()=>{var Tt;if(k!==void 0)for(y of k)(Tt=y.a)==null||Tt.apply()}),Nt.first=t.first&&t.first.e,Nt.last=d&&d.e}function hr(e,t,n,r){r&tt&&Ut(e.v,t),r&et?Ut(e.i,n):e.i=n}function on(e,t,n,r,o,s,i,c,f,w){var l=(f&tt)!==0,v=(f&Jn)===0,p=l?v?Gn(o):It(o):o,A=f&et?It(i):i,d={i:A,v:p,k:s,a:null,e:null,prev:n,next:r};try{return d.e=tn(()=>c(e,p,A,w),R),d.e.prev=n&&n.e,d.e.next=r&&r.e,n===null?t.first=d:(n.next=d,n.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function Ot(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var i=Wn(s);o.before(s),s=i}}function K(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function sn(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=sn(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function yr(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=sn(e))&&(r&&(r+=" "),r+=t);return r}function pr(e){return typeof e=="object"?yr(e):e??""}function hi(e){if(R){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;He(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var o=e.checked;He(e,"checked",null),e.checked=o}}};e.__on_r=n,rr(n),fr()}}function yi(e,t){var n=e.__attributes??(e.__attributes={});n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function wr(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function He(e,t,n,r){var o=e.__attributes??(e.__attributes={});R&&(o[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||o[t]!==(o[t]=n)&&(t==="style"&&"__styles"in e&&(e.__styles={}),t==="loading"&&(e[tr]=n),n==null?e.removeAttribute(t):typeof n!="string"&&an(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function at(e,t,n,r,o=!1,s=!1,i=!1){let c=R&&s;c&&he(!1);var f=t||{},w=e.tagName==="OPTION";for(var l in t)l in n||(n[l]=null);n.class&&(n.class=pr(n.class));var v=an(e),p=e.__attributes??(e.__attributes={});for(const x in n){let m=n[x];if(w&&x==="value"&&m==null){e.value=e.__value="",f[x]=m;continue}var A=f[x];if(m!==A){f[x]=m;var d=x[0]+x[1];if(d!=="$$"){if(d==="on"){const y={},b="$$"+x;let $=x.slice(2);var k=cr($);if(or($)&&($=$.slice(0,-7),y.capture=!0),!k&&A){if(m!=null)continue;e.removeEventListener($,f[b],y),f[b]=null}if(m!=null)if(k)e[`__${$}`]=m,ir([$]);else{let I=function(N){f[x].call(this,N)};f[b]=sr($,e,I,y)}else k&&(e[`__${$}`]=void 0)}else if(x==="style"&&m!=null)e.style.cssText=m+"";else if(x==="autofocus")ur(e,!!m);else if(!s&&(x==="__value"||x==="value"&&m!=null))e.value=e.__value=m;else if(x==="selected"&&w)wr(e,m);else{var _=x;o||(_=ar(_));var T=_==="defaultValue"||_==="defaultChecked";if(m==null&&!s&&!T)if(p[x]=null,_==="value"||_==="checked"){let y=e;if(_==="value"){let b=y.defaultValue;y.removeAttribute(_),y.defaultValue=b}else{let b=y.defaultChecked;y.removeAttribute(_),y.defaultChecked=b}}else e.removeAttribute(x);else T||v.includes(_)&&(s||typeof m!="string")?e[_]=m:typeof m!="function"&&He(e,_,m)}x==="style"&&"__styles"in e&&(e.__styles={})}}}return c&&he(!0),f}var Dt=new Map;function an(e){var t=Dt.get(e.nodeName);if(t)return t;Dt.set(e.nodeName,t=[]);for(var n,r=e,o=Element.prototype;o!==r;){n=nr(r);for(var s in n)n[s].set&&t.push(s);r=er(r)}return t}function pi(e,t,n){var r=e.__className,o=gr(t);R&&e.className===o?e.__className=o:(r!==o||R&&e.className!==o)&&(t==null?e.removeAttribute("class"):e.className=o,e.__className=o)}function gr(e,t){return(e??"")+""}const mr=["string","number","bigint","symbol"],br=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function xr(e){if(e===null)return"null";if(e===void 0)return"undefined";if(e===!0||e===!1)return"boolean";const t=typeof e;if(mr.includes(t))return t;if(t==="function")return"Function";if(Array.isArray(e))return"Array";if(vr(e))return"Buffer";const n=_r(e);return n||"Object"}function vr(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function _r(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(br.includes(t))return t}class a{constructor(t,n,r){this.major=t,this.majorEncoded=t<<5,this.name=n,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(t){return this.major<t.major?-1:this.major>t.major?1:0}}a.uint=new a(0,"uint",!0);a.negint=new a(1,"negint",!0);a.bytes=new a(2,"bytes",!0);a.string=new a(3,"string",!0);a.array=new a(4,"array",!1);a.map=new a(5,"map",!1);a.tag=new a(6,"tag",!1);a.float=new a(7,"float",!0);a.false=new a(7,"false",!0);a.true=new a(7,"true",!0);a.null=new a(7,"null",!0);a.undefined=new a(7,"undefined",!0);a.break=new a(7,"break",!0);class h{constructor(t,n,r){this.type=t,this.value=n,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const se=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",Ar=new TextDecoder,Er=new TextEncoder;function Se(e){return se&&globalThis.Buffer.isBuffer(e)}function cn(e){return e instanceof Uint8Array?Se(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const kr=se?(e,t,n)=>n-t>64?globalThis.Buffer.from(e.subarray(t,n)).toString("utf8"):Rt(e,t,n):(e,t,n)=>n-t>64?Ar.decode(e.subarray(t,n)):Rt(e,t,n),Sr=se?e=>e.length>64?globalThis.Buffer.from(e):zt(e):e=>e.length>64?Er.encode(e):zt(e),P=e=>Uint8Array.from(e),ct=se?(e,t,n)=>Se(e)?new Uint8Array(e.subarray(t,n)):e.slice(t,n):(e,t,n)=>e.slice(t,n),Cr=se?(e,t)=>(e=e.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),cn(globalThis.Buffer.concat(e,t))):(e,t)=>{const n=new Uint8Array(t);let r=0;for(let o of e)r+o.length>n.length&&(o=o.subarray(0,n.length-r)),n.set(o,r),r+=o.length;return n},Tr=se?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function Br(e,t){if(Se(e)&&Se(t))return e.compare(t);for(let n=0;n<e.length;n++)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return 0}function zt(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t}function Rt(e,t,n){const r=[];for(;t<n;){const o=e[t];let s=null,i=o>239?4:o>223?3:o>191?2:1;if(t+i<=n){let c,f,w,l;switch(i){case 1:o<128&&(s=o);break;case 2:c=e[t+1],(c&192)===128&&(l=(o&31)<<6|c&63,l>127&&(s=l));break;case 3:c=e[t+1],f=e[t+2],(c&192)===128&&(f&192)===128&&(l=(o&15)<<12|(c&63)<<6|f&63,l>2047&&(l<55296||l>57343)&&(s=l));break;case 4:c=e[t+1],f=e[t+2],w=e[t+3],(c&192)===128&&(f&192)===128&&(w&192)===128&&(l=(o&15)<<18|(c&63)<<12|(f&63)<<6|w&63,l>65535&&l<1114112&&(s=l))}}s===null?(s=65533,i=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),t+=i}return $r(r)}const Lt=4096;function $r(e){const t=e.length;if(t<=Lt)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Lt));return n}const Ir=256;class un{constructor(t=Ir){this.chunkSize=t,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(t){let n=this.chunks[this.chunks.length-1];if(this.cursor+t.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(t,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}t.length<64&&t.length<this.chunkSize?(n=Tr(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(t,0)):(this.chunks.push(t),this.maxCursor+=t.length)}this.cursor+=t.length}toBytes(t=!1){let n;if(this.chunks.length===1){const r=this.chunks[0];t&&this.cursor>r.length/2?(n=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=ct(r,0,this.cursor)}else n=Cr(this.chunks,this.cursor);return t&&this.reset(),n}}const E="CBOR decode error:",fn="CBOR encode error:";function ie(e,t,n){if(e.length-t<n)throw new Error(`${E} not enough data for type`)}const U=[24,256,65536,4294967296,BigInt("18446744073709551616")];function Q(e,t,n){ie(e,t,1);const r=e[t];if(n.strict===!0&&r<U[0])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);return r}function ee(e,t,n){ie(e,t,2);const r=e[t]<<8|e[t+1];if(n.strict===!0&&r<U[1])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);return r}function te(e,t,n){ie(e,t,4);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(n.strict===!0&&r<U[2])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);return r}function ne(e,t,n){ie(e,t,8);const r=e[t]*16777216+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=e[t+4]*16777216+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(r)<<BigInt(32))+BigInt(o);if(n.strict===!0&&s<U[3])throw new Error(`${E} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(n.allowBigInt===!0)return s;throw new Error(`${E} integers outside of the safe integer range are not supported`)}function Nr(e,t,n,r){return new h(a.uint,Q(e,t+1,r),2)}function Ur(e,t,n,r){return new h(a.uint,ee(e,t+1,r),3)}function Mr(e,t,n,r){return new h(a.uint,te(e,t+1,r),5)}function Or(e,t,n,r){return new h(a.uint,ne(e,t+1,r),9)}function re(e,t){return L(e,0,t.value)}function L(e,t,n){if(n<U[0]){const r=Number(n);e.push([t|r])}else if(n<U[1]){const r=Number(n);e.push([t|24,r])}else if(n<U[2]){const r=Number(n);e.push([t|25,r>>>8,r&255])}else if(n<U[3]){const r=Number(n);e.push([t|26,r>>>24&255,r>>>16&255,r>>>8&255,r&255])}else{const r=BigInt(n);if(r<U[4]){const o=[t|27,0,0,0,0,0,0,0];let s=Number(r&BigInt(4294967295)),i=Number(r>>BigInt(32)&BigInt(4294967295));o[8]=s&255,s=s>>8,o[7]=s&255,s=s>>8,o[6]=s&255,s=s>>8,o[5]=s&255,o[4]=i&255,i=i>>8,o[3]=i&255,i=i>>8,o[2]=i&255,i=i>>8,o[1]=i&255,e.push(o)}else throw new Error(`${E} encountered BigInt larger than allowable range`)}}re.encodedSize=function(t){return L.encodedSize(t.value)};L.encodedSize=function(t){return t<U[0]?1:t<U[1]?2:t<U[2]?3:t<U[3]?5:9};re.compareTokens=function(t,n){return t.value<n.value?-1:t.value>n.value?1:0};function Dr(e,t,n,r){return new h(a.negint,-1-Q(e,t+1,r),2)}function zr(e,t,n,r){return new h(a.negint,-1-ee(e,t+1,r),3)}function Rr(e,t,n,r){return new h(a.negint,-1-te(e,t+1,r),5)}const ut=BigInt(-1),ln=BigInt(1);function Lr(e,t,n,r){const o=ne(e,t+1,r);if(typeof o!="bigint"){const s=-1-o;if(s>=Number.MIN_SAFE_INTEGER)return new h(a.negint,s,9)}if(r.allowBigInt!==!0)throw new Error(`${E} integers outside of the safe integer range are not supported`);return new h(a.negint,ut-BigInt(o),9)}function ft(e,t){const n=t.value,r=typeof n=="bigint"?n*ut-ln:n*-1-1;L(e,t.type.majorEncoded,r)}ft.encodedSize=function(t){const n=t.value,r=typeof n=="bigint"?n*ut-ln:n*-1-1;return r<U[0]?1:r<U[1]?2:r<U[2]?3:r<U[3]?5:9};ft.compareTokens=function(t,n){return t.value<n.value?1:t.value>n.value?-1:0};function me(e,t,n,r){ie(e,t,n+r);const o=ct(e,t+n,t+n+r);return new h(a.bytes,o,n+r)}function Fr(e,t,n,r){return me(e,t,1,n)}function jr(e,t,n,r){return me(e,t,2,Q(e,t+1,r))}function Vr(e,t,n,r){return me(e,t,3,ee(e,t+1,r))}function Pr(e,t,n,r){return me(e,t,5,te(e,t+1,r))}function qr(e,t,n,r){const o=ne(e,t+1,r);if(typeof o=="bigint")throw new Error(`${E} 64-bit integer bytes lengths not supported`);return me(e,t,9,o)}function Ce(e){return e.encodedBytes===void 0&&(e.encodedBytes=e.type===a.string?Sr(e.value):e.value),e.encodedBytes}function Me(e,t){const n=Ce(t);L(e,t.type.majorEncoded,n.length),e.push(n)}Me.encodedSize=function(t){const n=Ce(t);return L.encodedSize(n.length)+n.length};Me.compareTokens=function(t,n){return Hr(Ce(t),Ce(n))};function Hr(e,t){return e.length<t.length?-1:e.length>t.length?1:Br(e,t)}function be(e,t,n,r,o){const s=n+r;ie(e,t,s);const i=new h(a.string,kr(e,t+n,t+s),s);return o.retainStringBytes===!0&&(i.byteValue=ct(e,t+n,t+s)),i}function Gr(e,t,n,r){return be(e,t,1,n,r)}function Kr(e,t,n,r){return be(e,t,2,Q(e,t+1,r),r)}function Xr(e,t,n,r){return be(e,t,3,ee(e,t+1,r),r)}function Zr(e,t,n,r){return be(e,t,5,te(e,t+1,r),r)}function Yr(e,t,n,r){const o=ne(e,t+1,r);if(typeof o=="bigint")throw new Error(`${E} 64-bit integer string lengths not supported`);return be(e,t,9,o,r)}const Jr=Me;function ae(e,t,n,r){return new h(a.array,r,n)}function Wr(e,t,n,r){return ae(e,t,1,n)}function Qr(e,t,n,r){return ae(e,t,2,Q(e,t+1,r))}function eo(e,t,n,r){return ae(e,t,3,ee(e,t+1,r))}function to(e,t,n,r){return ae(e,t,5,te(e,t+1,r))}function no(e,t,n,r){const o=ne(e,t+1,r);if(typeof o=="bigint")throw new Error(`${E} 64-bit integer array lengths not supported`);return ae(e,t,9,o)}function ro(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${E} indefinite length items not allowed`);return ae(e,t,1,1/0)}function lt(e,t){L(e,a.array.majorEncoded,t.value)}lt.compareTokens=re.compareTokens;lt.encodedSize=function(t){return L.encodedSize(t.value)};function ce(e,t,n,r){return new h(a.map,r,n)}function oo(e,t,n,r){return ce(e,t,1,n)}function so(e,t,n,r){return ce(e,t,2,Q(e,t+1,r))}function io(e,t,n,r){return ce(e,t,3,ee(e,t+1,r))}function ao(e,t,n,r){return ce(e,t,5,te(e,t+1,r))}function co(e,t,n,r){const o=ne(e,t+1,r);if(typeof o=="bigint")throw new Error(`${E} 64-bit integer map lengths not supported`);return ce(e,t,9,o)}function uo(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${E} indefinite length items not allowed`);return ce(e,t,1,1/0)}function dt(e,t){L(e,a.map.majorEncoded,t.value)}dt.compareTokens=re.compareTokens;dt.encodedSize=function(t){return L.encodedSize(t.value)};function fo(e,t,n,r){return new h(a.tag,n,1)}function lo(e,t,n,r){return new h(a.tag,Q(e,t+1,r),2)}function ho(e,t,n,r){return new h(a.tag,ee(e,t+1,r),3)}function yo(e,t,n,r){return new h(a.tag,te(e,t+1,r),5)}function po(e,t,n,r){return new h(a.tag,ne(e,t+1,r),9)}function ht(e,t){L(e,a.tag.majorEncoded,t.value)}ht.compareTokens=re.compareTokens;ht.encodedSize=function(t){return L.encodedSize(t.value)};const wo=20,go=21,mo=22,bo=23;function xo(e,t,n,r){if(r.allowUndefined===!1)throw new Error(`${E} undefined values are not supported`);return r.coerceUndefinedToNull===!0?new h(a.null,null,1):new h(a.undefined,void 0,1)}function vo(e,t,n,r){if(r.allowIndefinite===!1)throw new Error(`${E} indefinite length items not allowed`);return new h(a.break,void 0,1)}function yt(e,t,n){if(n){if(n.allowNaN===!1&&Number.isNaN(e))throw new Error(`${E} NaN values are not supported`);if(n.allowInfinity===!1&&(e===1/0||e===-1/0))throw new Error(`${E} Infinity values are not supported`)}return new h(a.float,e,t)}function _o(e,t,n,r){return yt(wt(e,t+1),3,r)}function Ao(e,t,n,r){return yt(gt(e,t+1),5,r)}function Eo(e,t,n,r){return yt(pn(e,t+1),9,r)}function pt(e,t,n){const r=t.value;if(r===!1)e.push([a.float.majorEncoded|wo]);else if(r===!0)e.push([a.float.majorEncoded|go]);else if(r===null)e.push([a.float.majorEncoded|mo]);else if(r===void 0)e.push([a.float.majorEncoded|bo]);else{let o,s=!1;(!n||n.float64!==!0)&&(hn(r),o=wt(F,1),r===o||Number.isNaN(r)?(F[0]=249,e.push(F.slice(0,3)),s=!0):(yn(r),o=gt(F,1),r===o&&(F[0]=250,e.push(F.slice(0,5)),s=!0))),s||(ko(r),o=pn(F,1),F[0]=251,e.push(F.slice(0,9)))}}pt.encodedSize=function(t,n){const r=t.value;if(r===!1||r===!0||r===null||r===void 0)return 1;if(!n||n.float64!==!0){hn(r);let o=wt(F,1);if(r===o||Number.isNaN(r))return 3;if(yn(r),o=gt(F,1),r===o)return 5}return 9};const dn=new ArrayBuffer(9),z=new DataView(dn,1),F=new Uint8Array(dn,0);function hn(e){if(e===1/0)z.setUint16(0,31744,!1);else if(e===-1/0)z.setUint16(0,64512,!1);else if(Number.isNaN(e))z.setUint16(0,32256,!1);else{z.setFloat32(0,e);const t=z.getUint32(0),n=(t&2139095040)>>23,r=t&8388607;if(n===255)z.setUint16(0,31744,!1);else if(n===0)z.setUint16(0,(e&2147483648)>>16|r>>13,!1);else{const o=n-127;o<-24?z.setUint16(0,0):o<-14?z.setUint16(0,(t&2147483648)>>16|1<<24+o,!1):z.setUint16(0,(t&2147483648)>>16|o+15<<10|r>>13,!1)}}}function wt(e,t){if(e.length-t<2)throw new Error(`${E} not enough data for float16`);const n=(e[t]<<8)+e[t+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const r=n>>10&31,o=n&1023;let s;return r===0?s=o*2**-24:r!==31?s=(o+1024)*2**(r-25):s=o===0?1/0:NaN,n&32768?-s:s}function yn(e){z.setFloat32(0,e,!1)}function gt(e,t){if(e.length-t<4)throw new Error(`${E} not enough data for float32`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,4).getFloat32(0,!1)}function ko(e){z.setFloat64(0,e,!1)}function pn(e,t){if(e.length-t<8)throw new Error(`${E} not enough data for float64`);const n=(e.byteOffset||0)+t;return new DataView(e.buffer,n,8).getFloat64(0,!1)}pt.compareTokens=re.compareTokens;function C(e,t,n){throw new Error(`${E} encountered invalid minor (${n}) for major ${e[t]>>>5}`)}function Oe(e){return()=>{throw new Error(`${E} ${e}`)}}const u=[];for(let e=0;e<=23;e++)u[e]=C;u[24]=Nr;u[25]=Ur;u[26]=Mr;u[27]=Or;u[28]=C;u[29]=C;u[30]=C;u[31]=C;for(let e=32;e<=55;e++)u[e]=C;u[56]=Dr;u[57]=zr;u[58]=Rr;u[59]=Lr;u[60]=C;u[61]=C;u[62]=C;u[63]=C;for(let e=64;e<=87;e++)u[e]=Fr;u[88]=jr;u[89]=Vr;u[90]=Pr;u[91]=qr;u[92]=C;u[93]=C;u[94]=C;u[95]=Oe("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)u[e]=Gr;u[120]=Kr;u[121]=Xr;u[122]=Zr;u[123]=Yr;u[124]=C;u[125]=C;u[126]=C;u[127]=Oe("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)u[e]=Wr;u[152]=Qr;u[153]=eo;u[154]=to;u[155]=no;u[156]=C;u[157]=C;u[158]=C;u[159]=ro;for(let e=160;e<=183;e++)u[e]=oo;u[184]=so;u[185]=io;u[186]=ao;u[187]=co;u[188]=C;u[189]=C;u[190]=C;u[191]=uo;for(let e=192;e<=215;e++)u[e]=fo;u[216]=lo;u[217]=ho;u[218]=yo;u[219]=po;u[220]=C;u[221]=C;u[222]=C;u[223]=C;for(let e=224;e<=243;e++)u[e]=Oe("simple values are not supported");u[244]=C;u[245]=C;u[246]=C;u[247]=xo;u[248]=Oe("simple values are not supported");u[249]=_o;u[250]=Ao;u[251]=Eo;u[252]=C;u[253]=C;u[254]=C;u[255]=vo;const V=[];for(let e=0;e<24;e++)V[e]=new h(a.uint,e,1);for(let e=-1;e>=-24;e--)V[31-e]=new h(a.negint,e,1);V[64]=new h(a.bytes,new Uint8Array(0),1);V[96]=new h(a.string,"",1);V[128]=new h(a.array,0,1);V[160]=new h(a.map,0,1);V[244]=new h(a.false,!1,1);V[245]=new h(a.true,!0,1);V[246]=new h(a.null,null,1);function So(e){switch(e.type){case a.false:return P([244]);case a.true:return P([245]);case a.null:return P([246]);case a.bytes:return e.value.length?void 0:P([64]);case a.string:return e.value===""?P([96]):void 0;case a.array:return e.value===0?P([128]):void 0;case a.map:return e.value===0?P([160]):void 0;case a.uint:return e.value<24?P([Number(e.value)]):void 0;case a.negint:if(e.value>=-24)return P([31-Number(e.value)])}}const Co={float64:!1,mapSorter:$o,quickEncodeToken:So};function To(){const e=[];return e[a.uint.major]=re,e[a.negint.major]=ft,e[a.bytes.major]=Me,e[a.string.major]=Jr,e[a.array.major]=lt,e[a.map.major]=dt,e[a.tag.major]=ht,e[a.float.major]=pt,e}const wn=To(),Ve=new un;class Te{constructor(t,n){this.obj=t,this.parent=n}includes(t){let n=this;do if(n.obj===t)return!0;while(n=n.parent);return!1}static createCheck(t,n){if(t&&t.includes(n))throw new Error(`${fn} object contains circular references`);return new Te(n,t)}}const G={null:new h(a.null,null),undefined:new h(a.undefined,void 0),true:new h(a.true,!0),false:new h(a.false,!1),emptyArray:new h(a.array,0),emptyMap:new h(a.map,0)},Z={number(e,t,n,r){return!Number.isInteger(e)||!Number.isSafeInteger(e)?new h(a.float,e):e>=0?new h(a.uint,e):new h(a.negint,e)},bigint(e,t,n,r){return e>=BigInt(0)?new h(a.uint,e):new h(a.negint,e)},Uint8Array(e,t,n,r){return new h(a.bytes,e)},string(e,t,n,r){return new h(a.string,e)},boolean(e,t,n,r){return e?G.true:G.false},null(e,t,n,r){return G.null},undefined(e,t,n,r){return G.undefined},ArrayBuffer(e,t,n,r){return new h(a.bytes,new Uint8Array(e))},DataView(e,t,n,r){return new h(a.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength))},Array(e,t,n,r){if(!e.length)return n.addBreakTokens===!0?[G.emptyArray,new h(a.break)]:G.emptyArray;r=Te.createCheck(r,e);const o=[];let s=0;for(const i of e)o[s++]=_e(i,n,r);return n.addBreakTokens?[new h(a.array,e.length),o,new h(a.break)]:[new h(a.array,e.length),o]},Object(e,t,n,r){const o=t!=="Object",s=o?e.keys():Object.keys(e),i=o?e.size:s.length;if(!i)return n.addBreakTokens===!0?[G.emptyMap,new h(a.break)]:G.emptyMap;r=Te.createCheck(r,e);const c=[];let f=0;for(const w of s)c[f++]=[_e(w,n,r),_e(o?e.get(w):e[w],n,r)];return Bo(c,n),n.addBreakTokens?[new h(a.map,i),c,new h(a.break)]:[new h(a.map,i),c]}};Z.Map=Z.Object;Z.Buffer=Z.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))Z[`${e}Array`]=Z.DataView;function _e(e,t={},n){const r=xr(e),o=t&&t.typeEncoders&&t.typeEncoders[r]||Z[r];if(typeof o=="function"){const i=o(e,r,t,n);if(i!=null)return i}const s=Z[r];if(!s)throw new Error(`${fn} unsupported type: ${r}`);return s(e,r,t,n)}function Bo(e,t){t.mapSorter&&e.sort(t.mapSorter)}function $o(e,t){const n=Array.isArray(e[0])?e[0][0]:e[0],r=Array.isArray(t[0])?t[0][0]:t[0];if(n.type!==r.type)return n.type.compare(r.type);const o=n.type.major,s=wn[o].compareTokens(n,r);return s===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s}function gn(e,t,n,r){if(Array.isArray(t))for(const o of t)gn(e,o,n,r);else n[t.type.major](e,t,r)}function Io(e,t,n){const r=_e(e,n);if(!Array.isArray(r)&&n.quickEncodeToken){const o=n.quickEncodeToken(r);if(o)return o;const s=t[r.type.major];if(s.encodedSize){const i=s.encodedSize(r,n),c=new un(i);if(s(c,r,n),c.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${r} was wrong`);return cn(c.chunks[0])}}return Ve.reset(),gn(Ve,r,t,n),Ve.toBytes(!0)}function No(e,t){return t=Object.assign({},Co,t),Io(e,wn,t)}const Uo={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Mo{constructor(t,n={}){this._pos=0,this.data=t,this.options=n}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const t=this.data[this._pos];let n=V[t];if(n===void 0){const r=u[t];if(!r)throw new Error(`${E} no decoder for major type ${t>>>5} (byte 0x${t.toString(16).padStart(2,"0")})`);const o=t&31;n=r(this.data,this._pos,o,this.options)}return this._pos+=n.encodedLength,n}}const ye=Symbol.for("DONE"),De=Symbol.for("BREAK");function Oo(e,t,n){const r=[];for(let o=0;o<e.value;o++){const s=pe(t,n);if(s===De){if(e.value===1/0)break;throw new Error(`${E} got unexpected break to lengthed array`)}if(s===ye)throw new Error(`${E} found array but not enough entries (got ${o}, expected ${e.value})`);r[o]=s}return r}function Do(e,t,n){const r=n.useMaps===!0,o=r?void 0:{},s=r?new Map:void 0;for(let i=0;i<e.value;i++){const c=pe(t,n);if(c===De){if(e.value===1/0)break;throw new Error(`${E} got unexpected break to lengthed map`)}if(c===ye)throw new Error(`${E} found map but not enough entries (got ${i} [no key], expected ${e.value})`);if(r!==!0&&typeof c!="string")throw new Error(`${E} non-string keys not supported (got ${typeof c})`);if(n.rejectDuplicateMapKeys===!0&&(r&&s.has(c)||!r&&c in o))throw new Error(`${E} found repeat map key "${c}"`);const f=pe(t,n);if(f===ye)throw new Error(`${E} found map but not enough entries (got ${i} [no value], expected ${e.value})`);r?s.set(c,f):o[c]=f}return r?s:o}function pe(e,t){if(e.done())return ye;const n=e.next();if(n.type===a.break)return De;if(n.type.terminal)return n.value;if(n.type===a.array)return Oo(n,e,t);if(n.type===a.map)return Do(n,e,t);if(n.type===a.tag){if(t.tags&&typeof t.tags[n.value]=="function"){const r=pe(e,t);return t.tags[n.value](r)}throw new Error(`${E} tag not supported (${n.value})`)}throw new Error("unsupported")}function zo(e,t){if(!(e instanceof Uint8Array))throw new Error(`${E} data to decode must be a Uint8Array`);t=Object.assign({},Uo,t);const n=t.tokenizer||new Mo(e,t),r=pe(n,t);if(r===ye)throw new Error(`${E} did not find any content to decode`);if(r===De)throw new Error(`${E} got unexpected break`);return[r,e.subarray(n.pos())]}function Ro(e,t){const[n,r]=zo(e,t);if(r.length>0)throw new Error(`${E} too many terminals, data makes no sense`);return n}function Lo(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}function mt(e){if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")}function Fo(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var o=0;o<e.length;o++){var s=e.charAt(o),i=s.charCodeAt(0);if(n[i]!==255)throw new TypeError(s+" is ambiguous");n[i]=o}var c=e.length,f=e.charAt(0),w=Math.log(c)/Math.log(256),l=Math.log(256)/Math.log(c);function v(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";for(var k=0,_=0,T=0,x=d.length;T!==x&&d[T]===0;)T++,k++;for(var m=(x-T)*l+1>>>0,y=new Uint8Array(m);T!==x;){for(var b=d[T],$=0,I=m-1;(b!==0||$<_)&&I!==-1;I--,$++)b+=256*y[I]>>>0,y[I]=b%c>>>0,b=b/c>>>0;if(b!==0)throw new Error("Non-zero carry");_=$,T++}for(var N=m-_;N!==m&&y[N]===0;)N++;for(var Y=f.repeat(k);N<m;++N)Y+=e.charAt(y[N]);return Y}function p(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;var k=0;if(d[k]!==" "){for(var _=0,T=0;d[k]===f;)_++,k++;for(var x=(d.length-k)*w+1>>>0,m=new Uint8Array(x);d[k];){var y=n[d.charCodeAt(k)];if(y===255)return;for(var b=0,$=x-1;(y!==0||b<T)&&$!==-1;$--,b++)y+=c*m[$]>>>0,m[$]=y%256>>>0,y=y/256>>>0;if(y!==0)throw new Error("Non-zero carry");T=b,k++}if(d[k]!==" "){for(var I=x-T;I!==x&&m[I]===0;)I++;for(var N=new Uint8Array(_+(x-I)),Y=_;I!==x;)N[Y++]=m[I++];return N}}}function A(d){var k=p(d);if(k)return k;throw new Error(`Non-${t} character`)}return{encode:v,decodeUnsafe:p,decode:A}}var jo=Fo,Vo=jo;class Po{constructor(t,n,r){S(this,"name");S(this,"prefix");S(this,"baseEncode");this.name=t,this.prefix=n,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class qo{constructor(t,n,r){S(this,"name");S(this,"prefix");S(this,"baseDecode");S(this,"prefixCodePoint");this.name=t,this.prefix=n;const o=n.codePointAt(0);if(o===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=o,this.baseDecode=r}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return mn(this,t)}}class Ho{constructor(t){S(this,"decoders");this.decoders=t}or(t){return mn(this,t)}decode(t){const n=t[0],r=this.decoders[n];if(r!=null)return r.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function mn(e,t){return new Ho({...e.decoders??{[e.prefix]:e},...t.decoders??{[t.prefix]:t}})}class Go{constructor(t,n,r,o){S(this,"name");S(this,"prefix");S(this,"baseEncode");S(this,"baseDecode");S(this,"encoder");S(this,"decoder");this.name=t,this.prefix=n,this.baseEncode=r,this.baseDecode=o,this.encoder=new Po(t,n,r),this.decoder=new qo(t,n,o)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}function bn({name:e,prefix:t,encode:n,decode:r}){return new Go(e,t,n,r)}function ze({name:e,prefix:t,alphabet:n}){const{encode:r,decode:o}=Vo(n,e);return bn({prefix:t,name:e,encode:r,decode:s=>mt(o(s))})}function Ko(e,t,n,r){const o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let s=e.length;for(;e[s-1]==="=";)--s;const i=new Uint8Array(s*n/8|0);let c=0,f=0,w=0;for(let l=0;l<s;++l){const v=o[e[l]];if(v===void 0)throw new SyntaxError(`Non-${r} character`);f=f<<n|v,c+=n,c>=8&&(c-=8,i[w++]=255&f>>c)}if(c>=n||255&f<<8-c)throw new SyntaxError("Unexpected end of data");return i}function Xo(e,t,n){const r=t[t.length-1]==="=",o=(1<<n)-1;let s="",i=0,c=0;for(let f=0;f<e.length;++f)for(c=c<<8|e[f],i+=8;i>n;)i-=n,s+=t[o&c>>i];if(i!==0&&(s+=t[o&c<<n-i]),r)for(;s.length*n&7;)s+="=";return s}function H({name:e,prefix:t,bitsPerChar:n,alphabet:r}){return bn({prefix:t,name:e,encode(o){return Xo(o,r,n)},decode(o){return Ko(o,r,n,e)}})}const Ae=H({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});H({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});H({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});H({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});H({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});H({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});H({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});H({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});H({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const Pe=ze({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});ze({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});const X=ze({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});ze({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zo=xn,Ft=128,Yo=-128,Jo=Math.pow(2,31);function xn(e,t,n){t=t||[],n=n||0;for(var r=n;e>=Jo;)t[n++]=e&255|Ft,e/=128;for(;e&Yo;)t[n++]=e&255|Ft,e>>>=7;return t[n]=e|0,xn.bytes=n-r+1,t}var Wo=Ge,Qo=128,jt=127;function Ge(e,r){var n=0,r=r||0,o=0,s=r,i,c=e.length;do{if(s>=c)throw Ge.bytes=0,new RangeError("Could not decode varint");i=e[s++],n+=o<28?(i&jt)<<o:(i&jt)*Math.pow(2,o),o+=7}while(i>=Qo);return Ge.bytes=s-r,n}var es=Math.pow(2,7),ts=Math.pow(2,14),ns=Math.pow(2,21),rs=Math.pow(2,28),os=Math.pow(2,35),ss=Math.pow(2,42),is=Math.pow(2,49),as=Math.pow(2,56),cs=Math.pow(2,63),us=function(e){return e<es?1:e<ts?2:e<ns?3:e<rs?4:e<os?5:e<ss?6:e<is?7:e<as?8:e<cs?9:10},fs={encode:Zo,decode:Wo,encodingLength:us},Be=fs;function Ke(e,t=0){return[Be.decode(e,t),Be.decode.bytes]}function $e(e,t,n=0){return Be.encode(e,t,n),t}function Ie(e){return Be.encodingLength(e)}function Xe(e,t){const n=t.byteLength,r=Ie(e),o=r+Ie(n),s=new Uint8Array(o+n);return $e(e,s,0),$e(n,s,r),s.set(t,o),new bt(e,n,t,s)}function ls(e){const t=mt(e),[n,r]=Ke(t),[o,s]=Ke(t.subarray(r)),i=t.subarray(r+s);if(i.byteLength!==o)throw new Error("Incorrect length");return new bt(n,o,i,t)}function ds(e,t){if(e===t)return!0;{const n=t;return e.code===n.code&&e.size===n.size&&n.bytes instanceof Uint8Array&&Lo(e.bytes,n.bytes)}}class bt{constructor(t,n,r,o){S(this,"code");S(this,"size");S(this,"digest");S(this,"bytes");this.code=t,this.size=n,this.digest=r,this.bytes=o}}function Vt(e,t){const{bytes:n,version:r}=e;switch(r){case 0:return ys(n,Ze(e),t??X.encoder);default:return ps(n,Ze(e),t??Ae.encoder)}}const Pt=new WeakMap;function Ze(e){const t=Pt.get(e);if(t==null){const n=new Map;return Pt.set(e,n),n}return t}var Wt;class B{constructor(t,n,r,o){S(this,"code");S(this,"version");S(this,"multihash");S(this,"bytes");S(this,"/");S(this,Wt,"CID");this.code=n,this.version=t,this.multihash=r,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:t,multihash:n}=this;if(t!==le)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==ws)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return B.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:t,digest:n}=this.multihash,r=Xe(t,n);return B.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return B.equals(this,t)}static equals(t,n){const r=n;return r!=null&&t.code===r.code&&t.version===r.version&&ds(t.multihash,r.multihash)}toString(t){return Vt(this,t)}toJSON(){return{"/":Vt(this)}}link(){return this}[(Wt=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;const n=t;if(n instanceof B)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:r,code:o,multihash:s,bytes:i}=n;return new B(r,o,s,i??qt(r,o,s.bytes))}else if(n[gs]===!0){const{version:r,multihash:o,code:s}=n,i=ls(o);return B.create(r,s,i)}else return null}static create(t,n,r){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(n!==le)throw new Error(`Version 0 CID must use dag-pb (code: ${le}) block encoding`);return new B(t,n,r,r.bytes)}case 1:{const o=qt(t,n,r.bytes);return new B(t,n,r,o)}default:throw new Error("Invalid version")}}static createV0(t){return B.create(0,le,t)}static createV1(t,n){return B.create(1,t,n)}static decode(t){const[n,r]=B.decodeFirst(t);if(r.length!==0)throw new Error("Incorrect length");return n}static decodeFirst(t){const n=B.inspectBytes(t),r=n.size-n.multihashSize,o=mt(t.subarray(r,r+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const s=o.subarray(n.multihashSize-n.digestSize),i=new bt(n.multihashCode,n.digestSize,s,o);return[n.version===0?B.createV0(i):B.createV1(n.codec,i),t.subarray(n.size)]}static inspectBytes(t){let n=0;const r=()=>{const[v,p]=Ke(t.subarray(n));return n+=p,v};let o=r(),s=le;if(o===18?(o=0,n=0):s=r(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const i=n,c=r(),f=r(),w=n+f,l=w-i;return{version:o,codec:s,multihashCode:c,digestSize:f,multihashSize:l,size:w}}static parse(t,n){const[r,o]=hs(t,n),s=B.decode(o);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ze(s).set(r,t),s}}function hs(e,t){switch(e[0]){case"Q":{const n=t??X;return[X.prefix,n.decode(`${X.prefix}${e}`)]}case X.prefix:{const n=t??X;return[X.prefix,n.decode(e)]}case Ae.prefix:{const n=t??Ae;return[Ae.prefix,n.decode(e)]}case Pe.prefix:{const n=t??Pe;return[Pe.prefix,n.decode(e)]}default:{if(t==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}}function ys(e,t,n){const{prefix:r}=n;if(r!==X.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=t.get(r);if(o==null){const s=n.encode(e).slice(1);return t.set(r,s),s}else return o}function ps(e,t,n){const{prefix:r}=n,o=t.get(r);if(o==null){const s=n.encode(e);return t.set(r,s),s}else return o}const le=112,ws=18;function qt(e,t,n){const r=Ie(e),o=r+Ie(t),s=new Uint8Array(o+n.byteLength);return $e(e,s,0),$e(t,s,r),s.set(n,o),s}const gs=Symbol.for("@ipld/js-cid/CID"),vn=42;function _n(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}function ms(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const t=B.asCID(e);if(!t)return null;const n=new Uint8Array(t.bytes.byteLength+1);return n.set(t.bytes,1),[new h(a.tag,vn),new h(a.bytes,n)]}function bs(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function xs(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const Ye={float64:!0,typeEncoders:{Object:ms,undefined:bs,number:xs}},vs={...Ye,typeEncoders:{...Ye.typeEncoders}};function _s(e){if(e[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return B.decode(e.subarray(1))}const Ne={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};Ne.tags[vn]=_s;const As={...Ne,tags:Ne.tags.slice()},Es="dag-cbor",ks=113,Ss=e=>No(e,Ye),An=e=>Ro(_n(e),Ne),En=Object.freeze(Object.defineProperty({__proto__:null,code:ks,decode:An,decodeOptions:As,encode:Ss,encodeOptions:vs,name:Es,toByteView:_n},Symbol.toStringTag,{value:"Module"})),Cs=Ue([{name:"D.Guttenfelder",key:"d8b304cdf6fca3c8c7db9932f92aac84eec095d8e166b6c13dabfe28091fec7b"}]),Ts=[{name:"D. Guttenfelder",url:"https://stanford.aa.dev.starlinglab.org"},{name:"K. Pollack",url:"https://kira.aa.prod.starlinglab.org"},{name:"C. Morris",url:"https://chris.aa.prod.starlinglab.org"}],Bs=()=>{if(typeof localStorage<"u"){const e=localStorage.getItem("aa-explorer-endpoints");if(e)try{const t=JSON.parse(e);if(t&&t.length>0)return t}catch(t){console.error("Failed to parse stored endpoints:",t)}}return[...Ts]},xt=Ue(Bs()),wi=Ue(null);xt.subscribe(e=>{typeof localStorage<"u"&&localStorage.setItem("aa-explorer-endpoints",JSON.stringify(e))});const $s={show:!1,kind:"hash",data:null,selectedCID:null},kn=Ue($s);function gi(e,t,n){kn.set({show:!0,kind:e,data:t,selectedCID:n})}function mi(){kn.update(e=>({...e,show:!1}))}var Is=ot('<svg><path fill="currentColor" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m-2 15l-5-5l1.41-1.41L10 14.17l7.59-7.59L19 8z"></path></svg>');function bi(e,t){const n=it(t,["$$slots","$$events","$$legacy"]);var r=Is();let o;nt(()=>o=at(r,o,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),st(e,r)}var Ns=ot('<svg><path fill="currentColor" d="m15.07 11.25l-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2a2 2 0 0 0-2 2H8a4 4 0 0 1 4-4a4 4 0 0 1 4 4a3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10a10 10 0 0 0 10-10c0-5.53-4.5-10-10-10"></path></svg>');function xi(e,t){const n=it(t,["$$slots","$$events","$$legacy"]);var r=Ns();let o;nt(()=>o=at(r,o,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),st(e,r)}var Us=ot('<svg><path fill="currentColor" d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12S6.47 2 12 2m3.59 5L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z"></path></svg>');function vi(e,t){const n=it(t,["$$slots","$$events","$$legacy"]);var r=Us();let o;nt(()=>o=at(r,o,{viewBox:"0 0 24 24",width:"1.2em",height:"1.2em",...n},void 0,!0)),st(e,r)}async function Ms(e){if(!e.ok)throw new Error(`Network error: ${e.statusText}`);return e.arrayBuffer()}const Os=e=>An(e);async function Sn(e){const t=await fetch(e),n=await Ms(t),r=new Uint8Array(n);return Os(r)}async function Ds(e){const t=`${e.url}/v1/cids`;return Sn(t)}async function _i(){const e=rt(xt);return(await Promise.all(e.map(n=>Ds(n)))).flat()}async function zs(e,t){const n=`${e.url}/v1/c/${t}`;return Sn(n)}async function Ai(e){const t=rt(xt);return(await Promise.all(t.map(async(r,o)=>{const s=await zs(r,e);return Object.entries(s).map(([i,c])=>({key:i,value:c,sourceEndpoint:r.url,sourceName:r.name,isPrimarySource:o===0}))}))).flat()}const Ei=e=>`${e.slice(0,4)}…${e.slice(-4)}`,ki=e=>Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("");function Si(e,t){if(!t)return;e.preventDefault();const n=new URL(window.location.href);n.searchParams.set("selectedCID",t),window.history.pushState({},"",n),window.dispatchEvent(new Event("popstate"))}function Rs({name:e,code:t,encode:n}){return new Ls(e,t,n)}class Ls{constructor(t,n,r){S(this,"name");S(this,"code");S(this,"encode");this.name=t,this.code=n,this.encode=r}digest(t){if(t instanceof Uint8Array){const n=this.encode(t);return n instanceof Uint8Array?Xe(this.code,n):n.then(r=>Xe(this.code,r))}else throw Error("Unknown type, must be binary type")}}function xe({enumerable:e=!0,configurable:t=!1}={}){return{enumerable:e,configurable:t,writable:!1}}function*Fs(e,t){if(t!=null&&typeof t=="object")if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n],s=B.asCID(r);s!=null?yield[o.join("/"),s]:typeof r=="object"&&(yield*Je(r,o))}else{const n=B.asCID(t);n!=null?yield[e.join("/"),n]:yield*Je(t,e)}}function*Je(e,t){if(e==null||e instanceof Uint8Array)return;const n=B.asCID(e);n!=null&&(yield[t.join("/"),n]);for(const[r,o]of Object.entries(e)){const s=[...t,r];yield*Fs(s,o)}}function*js(e,t){if(Array.isArray(t))for(const[n,r]of t.entries()){const o=[...e,n];yield o.join("/"),typeof r=="object"&&B.asCID(r)==null&&(yield*We(r,o))}else yield*We(t,e)}function*We(e,t){if(!(e==null||typeof e!="object"))for(const[n,r]of Object.entries(e)){const o=[...t,n];yield o.join("/"),r!=null&&!(r instanceof Uint8Array)&&typeof r=="object"&&B.asCID(r)==null&&(yield*js(o,r))}}function Vs(e,t){let n=e;for(const[r,o]of t.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${t.slice(0,r+1).map(i=>`[${JSON.stringify(i)}]`).join("")}`);const s=B.asCID(n);if(s!=null)return{value:s,remaining:t.slice(r+1).join("/")}}return{value:n}}class Ps{constructor({cid:t,bytes:n,value:r}){S(this,"cid");S(this,"bytes");S(this,"value");S(this,"asBlock");if(t==null||n==null||typeof r>"u")throw new Error("Missing required argument");this.cid=t,this.bytes=n,this.value=r,this.asBlock=this,Object.defineProperties(this,{cid:xe(),bytes:xe(),value:xe(),asBlock:xe()})}links(){return Je(this.value,[])}tree(){return We(this.value,[])}get(t="/"){return Vs(this.value,t.split("/").filter(Boolean))}}async function Cn({value:e,codec:t,hasher:n}){if(typeof e>"u")throw new Error('Missing required argument "value"');if(t==null||n==null)throw new Error("Missing required argument: codec or hasher");const r=t.encode(e),o=await n.digest(r),s=B.create(1,t.code,o);return new Ps({value:e,bytes:r,cid:s})}function qs(e){return async t=>new Uint8Array(await crypto.subtle.digest(e,t))}const Tn=Rs({name:"sha2-256",code:18,encode:qs("SHA-256")});/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const M=2n**255n-19n,Ee=2n**252n+27742317777372353535851937790883648493n,Ht=0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51an,Gt=0x6666666666666666666666666666666666666666666666666666666666666658n,Hs=37095705934669439343138083508754565189542113879843219016388785533085940283555n,ve={a:-1n,d:Hs,h:8},O=(e="")=>{throw new Error(e)},Bn=e=>typeof e=="string",Gs=e=>e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array",we=(e,t)=>!Gs(e)||typeof t=="number"&&t>0&&e.length!==t?O("Uint8Array of valid length expected"):e,oe=e=>new Uint8Array(e),ke=(e,t)=>we(Bn(e)?_t(e):oe(we(e)),t),g=(e,t=M)=>{let n=e%t;return n>=0n?n:t+n},Kt=e=>e instanceof D?e:O("Point expected");class D{constructor(t,n,r,o){this.ex=t,this.ey=n,this.ez=r,this.et=o}static fromAffine(t){return new D(t.x,t.y,1n,g(t.x*t.y))}static fromHex(t,n=!1){const{d:r}=ve;t=ke(t,32);const o=t.slice(),s=t[31];o[31]=s&-129;const i=At(o);n&&!(0n<=i&&i<2n**256n)&&O("bad y coord 1"),!n&&!(0n<=i&&i<M)&&O("bad y coord 2");const c=g(i*i),f=g(c-1n),w=g(r*c+1n);let{isValid:l,value:v}=Zs(f,w);l||O("bad y coordinate 3");const p=(v&1n)===1n,A=(s&128)!==0;return!n&&v===0n&&A&&O("bad y coord 3"),A!==p&&(v=g(-v)),new D(v,i,1n,g(v*i))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}equals(t){const{ex:n,ey:r,ez:o}=this,{ex:s,ey:i,ez:c}=Kt(t),f=g(n*c),w=g(s*o),l=g(r*c),v=g(i*o);return f===w&&l===v}is0(){return this.equals(de)}negate(){return new D(g(-this.ex),this.ey,this.ez,g(-this.et))}double(){const{ex:t,ey:n,ez:r}=this,{a:o}=ve,s=g(t*t),i=g(n*n),c=g(2n*g(r*r)),f=g(o*s),w=t+n,l=g(g(w*w)-s-i),v=f+i,p=v-c,A=f-i,d=g(l*p),k=g(v*A),_=g(l*A),T=g(p*v);return new D(d,k,T,_)}add(t){const{ex:n,ey:r,ez:o,et:s}=this,{ex:i,ey:c,ez:f,et:w}=Kt(t),{a:l,d:v}=ve,p=g(n*i),A=g(r*c),d=g(s*v*w),k=g(o*f),_=g((n+r)*(i+c)-p-A),T=g(k-d),x=g(k+d),m=g(A-l*p),y=g(_*T),b=g(x*m),$=g(_*m),I=g(T*x);return new D(y,b,I,$)}mul(t,n=!0){if(t===0n)return n===!0?O("cannot multiply by 0"):de;if(typeof t=="bigint"&&0n<t&&t<Ee||O("invalid scalar, must be < L"),!n&&this.is0()||t===1n)return this;if(this.equals(ge))return ni(t).p;let r=de,o=ge;for(let s=this;t>0n;s=s.double(),t>>=1n)t&1n?r=r.add(s):n&&(o=o.add(s));return r}multiply(t){return this.mul(t)}clearCofactor(){return this.mul(BigInt(ve.h),!1)}isSmallOrder(){return this.clearCofactor().is0()}isTorsionFree(){let t=this.mul(Ee/2n,!1).double();return Ee%2n&&(t=t.add(this)),t.is0()}toAffine(){const{ex:t,ey:n,ez:r}=this;if(this.equals(de))return{x:0n,y:1n};const o=In(r,M);return g(r*o)!==1n&&O("invalid inverse"),{x:g(t*o),y:g(n*o)}}toRawBytes(){const{x:t,y:n}=this.toAffine(),r=Ks(n);return r[31]|=t&1n?128:0,r}toHex(){return vt(this.toRawBytes())}}D.BASE=new D(Ht,Gt,1n,g(Ht*Gt));D.ZERO=new D(0n,1n,1n,0n);const{BASE:ge,ZERO:de}=D,$n=(e,t)=>e.toString(16).padStart(t,"0"),vt=e=>Array.from(we(e)).map(t=>$n(t,2)).join(""),q={_0:48,_9:57,A:65,F:70,a:97,f:102},Xt=e=>{if(e>=q._0&&e<=q._9)return e-q._0;if(e>=q.A&&e<=q.F)return e-(q.A-10);if(e>=q.a&&e<=q.f)return e-(q.a-10)},_t=e=>{const t="hex invalid";if(!Bn(e))return O(t);const n=e.length,r=n/2;if(n%2)return O(t);const o=oe(r);for(let s=0,i=0;s<r;s++,i+=2){const c=Xt(e.charCodeAt(i)),f=Xt(e.charCodeAt(i+1));if(c===void 0||f===void 0)return O(t);o[s]=c*16+f}return o},Ks=e=>_t($n(e,32*2)).reverse(),At=e=>BigInt("0x"+vt(oe(we(e)).reverse())),Qe=(...e)=>{const t=oe(e.reduce((r,o)=>r+we(o).length,0));let n=0;return e.forEach(r=>{t.set(r,n),n+=r.length}),t},In=(e,t)=>{(e===0n||t<=0n)&&O("no inverse n="+e+" mod="+t);let n=g(e,t),r=t,o=0n,s=1n;for(;n!==0n;){const i=r/n,c=r%n,f=o-s*i;r=n,n=c,o=s,s=f}return r===1n?g(o,t):O("no inverse")},j=(e,t)=>{let n=e;for(;t-- >0n;)n*=n,n%=M;return n},Xs=e=>{const n=e*e%M*e%M,r=j(n,2n)*n%M,o=j(r,1n)*e%M,s=j(o,5n)*o%M,i=j(s,10n)*s%M,c=j(i,20n)*i%M,f=j(c,40n)*c%M,w=j(f,80n)*f%M,l=j(w,80n)*f%M,v=j(l,10n)*s%M;return{pow_p_5_8:j(v,2n)*e%M,b2:n}},Zt=19681161376707505956807079304988542015446066515923890162744021073123829784752n,Zs=(e,t)=>{const n=g(t*t*t),r=g(n*n*t),o=Xs(e*r).pow_p_5_8;let s=g(e*n*o);const i=g(t*s*s),c=s,f=g(s*Zt),w=i===e,l=i===g(-e),v=i===g(-e*Zt);return w&&(s=c),(l||v)&&(s=f),(g(s)&1n)===1n&&(s=g(-s)),{isValid:w||l,value:s}},Ys=e=>g(At(e),Ee);let qe;const Js=(...e)=>Un.sha512Async(...e);function Ws(e,t){return Js(t.hashable).then(t.finish)}const Nn={zip215:!0},Qs=(e,t,n,r=Nn)=>{e=ke(e,64),t=ke(t),n=ke(n,32);const{zip215:o}=r;let s,i,c,f,w=new Uint8Array;try{s=D.fromHex(n,o),i=D.fromHex(e.slice(0,32),o),c=At(e.slice(32,64)),f=ge.mul(c,!1),w=Qe(i.toRawBytes(),s.toRawBytes(),t)}catch{}return{hashable:w,finish:v=>{if(f==null||!o&&s.isSmallOrder())return!1;const p=Ys(v);return i.add(s.mul(p,!1)).add(f.negate()).clearCofactor().is0()}}},ei=async(e,t,n,r=Nn)=>Ws(!0,Qs(e,t,n,r)),Yt=()=>typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Un={bytesToHex:vt,hexToBytes:_t,concatBytes:Qe,mod:g,invert:In,randomBytes:(e=32)=>{const t=Yt();return(!t||!t.getRandomValues)&&O("crypto.getRandomValues must be defined"),t.getRandomValues(oe(e))},sha512Async:async(...e)=>{const t=Yt(),n=t&&t.subtle;n||O("etc.sha512Async or crypto.subtle must be defined");const r=Qe(...e);return oe(await n.digest("SHA-512",r.buffer))},sha512Sync:void 0};Object.defineProperties(Un,{sha512Sync:{configurable:!1,get(){return qe},set(e){qe||(qe=e)}}});const W=8,ti=()=>{const e=[],t=256/W+1;let n=ge,r=n;for(let o=0;o<t;o++){r=n,e.push(r);for(let s=1;s<2**(W-1);s++)r=r.add(n),e.push(r);n=r.double()}return e};let Jt;const ni=e=>{const t=Jt||(Jt=ti()),n=(l,v)=>{let p=v.negate();return l?p:v};let r=de,o=ge;const s=1+256/W,i=2**(W-1),c=BigInt(2**W-1),f=2**W,w=BigInt(W);for(let l=0;l<s;l++){const v=l*i;let p=Number(e&c);e>>=w,p>i&&(p-=f,e+=1n);const A=v,d=v+Math.abs(p)-1,k=l%2!==0,_=p<0;p===0?o=o.add(n(k,t[A])):r=r.add(n(_,t[d]))}return{p:r,f:o}},J=new Map,ri=5*60*1e3;async function Ci(e,t,n){switch(e){case"hash":return{status:t.value.attestation.CID.toString()===n?"verified":"unverified"};case"signature":if(t.value.signature){const{valid:r,knownKey:o,keyName:s}=await oi(t.value);return r&&o?{status:"verified",knownKey:o,keyName:s}:r&&!o?{status:"unknown_key",knownKey:!1}:{status:"present",knownKey:o}}return{status:"unverified"};case"timestamp":if(t.value.timestamp&&t.value.timestamp.ots){const r=t.value.timestamp.ots.msg.toString(),o=J.get(r);if(o&&new Date().getTime()-o.timestamp.getTime()<3e4)return{status:"cached",cachedValue:o.result,cacheTimestamp:o.timestamp};try{return{status:await si(t.value)?"verified":"present"}}catch{return{status:"present"}}}return{status:"unverified"};default:return{status:"unverified"}}}const oi=async e=>{const t=rt(Cs),n=Array.from(e.signature.pubKey).map(c=>c.toString(16).padStart(2,"0")).join(""),r=t.find(c=>c.key===n),o=!!r;return(await Cn({value:e.attestation,codec:En,hasher:Tn})).cid.equals(e.signature.msg)?{valid:await ei(e.signature.sig,e.signature.msg.bytes,e.signature.pubKey),knownKey:o,keyName:r==null?void 0:r.name}:{valid:!1,knownKey:o,keyName:r==null?void 0:r.name}},si=async e=>{if(!e.timestamp||!e.timestamp.ots||!e.timestamp.ots.msg)return!1;const t=e.timestamp.ots.msg.toString(),n=J.get(t);if(n&&new Date().getTime()-n.timestamp.getTime()<ri)return n.result;const r=window.OpenTimestamps;if(!r)return console.error("OpenTimestamps library not found on window object"),!1;try{if((await Cn({value:{signature:e.signature,attestation:e.attestation},codec:En,hasher:Tn})).cid.toString()!==e.timestamp.ots.msg.toString())return J.set(t,{timestamp:new Date,result:!1}),!1}catch{return J.set(t,{timestamp:new Date,result:!1}),!1}try{if(!e.timestamp.ots.proof||!(e.timestamp.ots.proof instanceof Uint8Array))return J.set(t,{timestamp:new Date,result:!1}),!1;const o=new TextEncoder().encode(e.timestamp.ots.msg.toString()),s=e.timestamp.ots.proof,i=r.DetachedTimestampFile.fromBytes(new r.Ops.OpSHA256,o),c=r.DetachedTimestampFile.deserialize(s),w=r.verify(c,i,{ignoreBitcoinNode:!0})!=null;return J.set(t,{timestamp:new Date,result:w}),w}catch{return J.set(t,{timestamp:new Date,result:!1}),!1}};export{bi as C,xi as H,di as a,yi as b,kn as c,pi as d,xt as e,vi as f,wi as g,mi as h,li as i,He as j,gi as k,Ei as l,Cs as m,Si as n,Ai as o,_i as p,hi as r,at as s,ki as u,Ci as v};
